<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.0">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2022-10-10T17:55:59-04:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">The Horenberger Zone</title><subtitle>Cite me in your thesis</subtitle><author><name>Beau Horenberger</name></author><entry><title type="html">Tropisms</title><link href="http://localhost:4000/2022/10/10/tropisms.html" rel="alternate" type="text/html" title="Tropisms" /><published>2022-10-10T00:00:00-04:00</published><updated>2022-10-10T00:00:00-04:00</updated><id>http://localhost:4000/2022/10/10/tropisms</id><content type="html" xml:base="http://localhost:4000/2022/10/10/tropisms.html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;I am not gravitropic.
My body splays out, feeling,
Searching.
For what?
I am not phototropic.
I curl inward on myself;
These gnarled limbs entwine.
But I will find something,
Even if it is not the light,
As my bark scrapes along itself
Rendering the surface
So as to mark its way
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>Beau Horenberger</name></author><summary type="html">I am not gravitropic. My body splays out, feeling, Searching. For what? I am not phototropic. I curl inward on myself; These gnarled limbs entwine. But I will find something, Even if it is not the light, As my bark scrapes along itself Rendering the surface So as to mark its way</summary></entry><entry><title type="html">Bernoulli Diffusion Derivations</title><link href="http://localhost:4000/2022/10/03/bernoulliderivations.html" rel="alternate" type="text/html" title="Bernoulli Diffusion Derivations" /><published>2022-10-03T00:00:00-04:00</published><updated>2022-10-03T00:00:00-04:00</updated><id>http://localhost:4000/2022/10/03/bernoulliderivations</id><content type="html" xml:base="http://localhost:4000/2022/10/03/bernoulliderivations.html">&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#what-is-bernoulli-diffusion&quot; id=&quot;markdown-toc-what-is-bernoulli-diffusion&quot;&gt;What is Bernoulli Diffusion?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#who-is-this-article-for&quot; id=&quot;markdown-toc-who-is-this-article-for&quot;&gt;Who is this article for?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#prependix&quot; id=&quot;markdown-toc-prependix&quot;&gt;Prependix&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#kl-divergence-of-multivariate-bernoulli-distributions&quot; id=&quot;markdown-toc-kl-divergence-of-multivariate-bernoulli-distributions&quot;&gt;KL divergence of Multivariate Bernoulli Distributions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#tildebeta_t-for-calculating-qleftmathbfxtvert-mathbfx0-right&quot; id=&quot;markdown-toc-tildebeta_t-for-calculating-qleftmathbfxtvert-mathbfx0-right&quot;&gt;$\tilde{\beta}_t$ for Calculating $q\left(\mathbf{x}^{(t)}\vert \mathbf{x}^{(0)} \right)$&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#calculating-the-posterior-qleftmathbfxt-1vert-mathbfxtmathbfx0-right&quot; id=&quot;markdown-toc-calculating-the-posterior-qleftmathbfxt-1vert-mathbfxtmathbfx0-right&quot;&gt;Calculating the Posterior $q\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)},\mathbf{x}^{(0)} \right)$&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#entropy-of-multivariate-bernoulli-distributions&quot; id=&quot;markdown-toc-entropy-of-multivariate-bernoulli-distributions&quot;&gt;Entropy of Multivariate Bernoulli Distributions&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;what-is-bernoulli-diffusion&quot;&gt;What is Bernoulli Diffusion?&lt;/h2&gt;

&lt;p&gt;Short answer: &lt;a href=&quot;https://github.com/horenbergerb/BernoulliDiffusion&quot;&gt;a Github repo that I made.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Long answer:&lt;/p&gt;

&lt;p&gt;Diffusion originated from the classic publication &lt;a href=&quot;https://arxiv.org/abs/1503.03585&quot;&gt;Deep Unsupervised Learning using Nonequilibrium Thermodynamics&lt;/a&gt; by Sohl-Dickstein et al.&lt;/p&gt;

&lt;p&gt;In the original paper–as well as most practical applications of diffusion (see &lt;a href=&quot;https://arstechnica.com/information-technology/2022/09/with-stable-diffusion-you-may-never-believe-what-you-see-online-again/&quot;&gt;stable-diffusion&lt;/a&gt;)–a Gaussian Markov diffusion kernel is used. This means the algorithm iteratively applies Gaussian noise to samples from the target distribution and then learns to reverse the noising process.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/notesonbernoullidiffusion/gaussiandiffusionillustration.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;An illustration of Gaussian diffusion stolen from &lt;a href=&quot;https://arxiv.org/abs/2006.11239&quot;&gt;this paper&lt;/a&gt;. You’re legally required to put this in any technical article about diffusion.&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;However, the original paper offhandedly mentions that you can also implement diffusion for binary-valued data using a &lt;a href=&quot;https://en.wikipedia.org/wiki/Bernoulli_distribution&quot;&gt;Bernoulli distribution&lt;/a&gt; as your Markov diffusion kernel.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/notesonbernoullidiffusion/originalpaperbernoullidiffusion.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;A segment of the original diffusion paper which mentions using Bernoulli diffusion to learn “heartbeat data”.&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The authors of the paper &lt;a href=&quot;https://github.com/Sohl-Dickstein/Diffusion-Probabilistic-Models/tree/master&quot;&gt;published the code for the Gaussian diffusion&lt;/a&gt;, but for some reason chose not to publish the Bernoulli diffusion model. I have yet to find an implementation of Bernoulli diffusion anywhere on the internet.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/horenbergerb/BernoulliDiffusion&quot;&gt;So I decided to implement it myself&lt;/a&gt;. It was very hard. I calculated a lot of things and learned a lot of fancy new words.&lt;/p&gt;

&lt;p&gt;Here I will be detailing some of the more interesting derivations that I haven’t seen documented anywhere else.&lt;/p&gt;

&lt;h2 id=&quot;who-is-this-article-for&quot;&gt;Who is this article for?&lt;/h2&gt;

&lt;p&gt;Me. I need to dump this all somewhere so that I can finally forget it. However, it might help if you are trying to understand the code in the Bernoulli Diffusion repo. One day in the distant future, these notes might even help college students cheat on their homework.&lt;/p&gt;

&lt;h2 id=&quot;prependix&quot;&gt;Prependix&lt;/h2&gt;

&lt;p&gt;Most of these calculations have to do with the terms involved in this the loss approximation (equation 14 in the paper):&lt;/p&gt;

\[K = -\sum_{t=2}^T\int d\mathbf{x}^{(0)} d\mathbf{x}^{(t)} q\left(\mathbf{x}^{(0)}, \mathbf{x}^{(t)} \right)\cdot \\
D_{KL}\left(q\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)},\mathbf{x}^{(0)} \right) \vert \vert p\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)}\right)\right) \\
+ H_q(\mathbf{X}^{(T)}\vert \mathbf{X}^{(0)}) - H_q(\mathbf{X}^{(1)}\vert \mathbf{X}^{(0)}) - H_q(\mathbf{X}^{(T)})\]

&lt;p&gt;So I figured I’d prepend it here for reference later.&lt;/p&gt;

&lt;h2 id=&quot;kl-divergence-of-multivariate-bernoulli-distributions&quot;&gt;KL divergence of Multivariate Bernoulli Distributions&lt;/h2&gt;

&lt;p&gt;In order to calculate $K$, we will need to calculate&lt;/p&gt;

\[D_{KL}\left(q\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)},\mathbf{x}^{(0)} \right) \vert \vert p\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)}\right)\right)\]

&lt;p&gt;Where $q\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)},\mathbf{x}^{(0)} \right)$ and $p\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)}\right)$ are both essentially a bunch of Bernoulli distributions.&lt;/p&gt;

&lt;p&gt;I actually found the answer &lt;a href=&quot;https://math.stackexchange.com/questions/2604566/kl-divergence-between-two-multivariate-bernoulli-distribution&quot;&gt;here&lt;/a&gt;, so I’m not going to elaborate on this one.&lt;/p&gt;

&lt;h2 id=&quot;tildebeta_t-for-calculating-qleftmathbfxtvert-mathbfx0-right&quot;&gt;$\tilde{\beta}_t$ for Calculating $q\left(\mathbf{x}^{(t)}\vert \mathbf{x}^{(0)} \right)$&lt;/h2&gt;

&lt;p&gt;Okay, so in &lt;a href=&quot;https://arxiv.org/abs/2006.11239&quot;&gt;this paper&lt;/a&gt; the authors casually remark that the forward process in Gaussian diffusion has a really nice computational property. Specifically, if&lt;/p&gt;

\[q\left(\mathbf{x}^{(t)}\vert \mathbf{x}^{(t-1)} \right) =\mathcal{N}\left(\mathbf{x}^{(t)};\sqrt{1-\beta_t}\mathbf{x}^{(t-1)}, \beta_t\mathbf{I}\right)\]

&lt;p&gt;then you can define $\alpha_t := 1-\beta_t$ and $\bar{\alpha_t} := \prod_{s=1}^{t} \alpha_{s}$, and it follows that&lt;/p&gt;

\[q\left(\mathbf{x}^{(t)}\vert \mathbf{x}^{(0)} \right) =\mathcal{N}\left(\mathbf{x}^{(t)};\sqrt{\bar{\alpha}_t}\mathbf{x}^{(0)}, (1-\bar{\alpha}_t)\mathbf{I}\right)\]

&lt;p&gt;So, in other words, you don’t have to iterate the forward noising process $t$ times to get a sample $\mathbf{x}^{(t)}$. You can just sample it directly.&lt;/p&gt;

&lt;p&gt;I figured something similar held for the Bernoulli case. However, the authors didn’t actually demonstrate how this relationship is derived. I’ll leave the Gaussian case as an exercise and show the Bernoulli case instead.&lt;/p&gt;

&lt;p&gt;We can focus on an individual digit $\mathbf{x}^{(t)}_i$. The way I derived this was by denoting&lt;/p&gt;

\[\mathbf{x}^{(t)}_i = \mathbf{x}^{(t-1)}_i(1-\epsilon_t) + (1-\mathbf{x}^{(t-1)}_i)\epsilon_t = \mathbf{x}^{(t-1)}_i + \epsilon_t - 2\epsilon_t \mathbf{x}^{(t-1)}_i\]

&lt;p&gt;Where $\epsilon_t = \mathcal{B}(0.5\beta_t)$ is a Bernoulli random variable. This is just another way of representing the typical noising process as a probability of flipping bits.&lt;/p&gt;

&lt;p&gt;I used this recursively to represent $\mathbf{x}^{(t+1)}_i$ in terms of $\mathbf{x}^{(t-1)}_i$ and then simplified to find that:&lt;/p&gt;

\[\mathbf{x}^{(t+1)}_i = \mathbf{x}^{(t-1)}_i + \epsilon_t + \epsilon_{t+1} - \epsilon_t \epsilon_{t+1} - 2(\epsilon_t + \epsilon_{t+1} - \epsilon_t \epsilon_{t+1})\mathbf{x}^{(t-1)}_i\]

&lt;p&gt;denoting $\tilde{\epsilon}_ {t+1} := \epsilon_t + \epsilon_{t+1} - \epsilon_t \epsilon_{t+1}$, we see that&lt;/p&gt;

\[\mathbf{x}^{(t+1)}_i = \mathbf{x}^{(t-1)}_i + \tilde{\epsilon}_{t+1} - 2\tilde{\epsilon}_{t+1}\mathbf{x}^{(t-1)}_i\]

&lt;p&gt;Which is the same relationship as the original case! If we wanted to skip even further, say from $\mathbf{x}^{(t-1)}$ to $\mathbf{x}^{(t+2)}$, then we would derive that&lt;/p&gt;

\[\mathbf{x}^{(t+2)}_i = \mathbf{x}^{(t-1)}_i + \tilde{\epsilon}_{t+1} + \epsilon_{t+2} - {\epsilon}_{t+1}\epsilon_{t+2} - 2(\tilde{\epsilon}_{t+1} + \epsilon_{t+2} - {\epsilon}_{t+1}\epsilon_{t+2})\mathbf{x}^{(t-1)}_i\]

&lt;p&gt;So generally we have that&lt;/p&gt;

\[\tilde{\epsilon}_ {t+1} = \tilde{\epsilon}_{t} + \epsilon_{t+1} - \tilde{\epsilon}_{t}\epsilon_{t+1}\]

&lt;p&gt;Then the corresponding Bernoulli distribution is&lt;/p&gt;

\[\mathcal{B}(0.5(\tilde{\beta}_{t} + \beta_{t+1} - \beta_{t+1}\tilde{\beta}_{t})) := \mathcal{B}(0.5\tilde{\beta}_{t+1})\]

&lt;p&gt;And we have a recursive relationship for our desired values,&lt;/p&gt;

\[\tilde{\beta}_{t+1} = \tilde{\beta}_{t} + \beta_{t+1} - \beta_{t+1}\tilde{\beta}_{t}\]

&lt;p&gt;Then&lt;/p&gt;

\[q\left(\mathbf{x}^{(t)}\vert \mathbf{x}^{(0)} \right) =\mathcal{B}\left(\mathbf{x}^{(0)}(1-\tilde{\beta}_{t}) + 0.5\tilde{\beta}_{t}\right)\]

&lt;p&gt;Badda bing, badda boom.&lt;/p&gt;

&lt;h2 id=&quot;calculating-the-posterior-qleftmathbfxt-1vert-mathbfxtmathbfx0-right&quot;&gt;Calculating the Posterior $q\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)},\mathbf{x}^{(0)} \right)$&lt;/h2&gt;

&lt;p&gt;Another obstacle while computing the loss $K$ is the posterior,&lt;/p&gt;

\[q\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)},\mathbf{x}^{(0)} \right)\]

&lt;p&gt;Where $\mathbf{x}$ and $\mathbf{x}^{(t)}$ are given. The first time I saw this, I had no idea how to even interpret it, and the authors never even mention it beyond “oh, yeah, that’s the posterior.”&lt;/p&gt;

&lt;p&gt;But contextually, it seems like it should be analytically computable, and in fact you can find a &lt;a href=&quot;https://github.com/Sohl-Dickstein/Diffusion-Probabilistic-Models/blob/master/model.py#L203&quot;&gt;computation of the posterior in the source code of the Gaussian diffusion repo&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I eventually realized that the authors don’t mention it because it’s trivial to a keen Bayesian statistican. Essentially, you can think of this as a tiny Bayesian model within the larger system. The inspiration came to me while reading &lt;a href=&quot;http://www.stat.columbia.edu/~gelman/book/&quot;&gt;Bayesian Data Analysis, by Andrew Gelman&lt;/a&gt;, particularly section 2.5. This is coincidentally almost exactly the solution for the Gaussian posterior.&lt;/p&gt;

&lt;p&gt;Usually with a Bayesian system, you construct a sampling model $p(y\vert \theta)$ dependent on the parameters $\theta$. Then you establish a prior distribution on the parameters $p(\theta)$.&lt;/p&gt;

&lt;p&gt;When you finally collect data $y$ and want to determine the proper parameters $\theta$, you’ll need to calculate the posterior distribution (or something proportional to it):&lt;/p&gt;

\[p(\theta \vert y) = \frac{p(y\vert\theta)p(\theta)}{p(y)} \propto p(y\vert\theta)p(\theta)\]

&lt;p&gt;we can translate this into our current case as follows:&lt;/p&gt;

\[y = \mathbf{x}^{(t)} \\
\theta = \mathbf{x}^{(t-1)} \\
p(\theta) = q\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(0)} \right) = \mathcal{B}\left(\mathbf{x}^{(0)}(1-\tilde{\beta}_{t-1}) + 0.5\tilde{\beta}_{t-1}\right) \\
p(y\vert \theta) = q\left(\mathbf{x}^{(t)}\vert \mathbf{x}^{(t-1)},\mathbf{x}^{(0)} \right) = \mathcal{B}\left(\mathbf{x}^{(t-1)}(1-\beta_{t}) + 0.5\beta_{t}\right) \\
p(\theta\vert y) = q\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)},\mathbf{x}^{(0)} \right)\]

&lt;p&gt;Now the given variables, $\mathbf{x}^{(t)}$ and $\mathbf{x}^{(0)}$, determine a prior distribution and a set of observations, so we can get to work calculating the posterior&lt;/p&gt;

\[p(\theta \vert y) \propto p(y\vert\theta)p(\theta) = q\left(\mathbf{x}^{(t)}\vert \mathbf{x}^{(t-1)},\mathbf{x}^{(0)} \right)q\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(0)} \right)\]

&lt;p&gt;Since we parameterize the Bernoulli distributions using the probability of observing 1, want to calculate $p(\theta =1\vert y)$ and thus we set $\mathbf{x}^{(t-1)} = 1$.&lt;/p&gt;

&lt;p&gt;I also ended up calculating the cases for $\mathbf{x}^{(t)} = 1$ and $\mathbf{x}^{(t)} = 0$ separately because it seemed easier. Then I combined them into a single equation:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  posterior = x_0*(1-self.beta_tilde_t[t-1]) + 0.5*self.beta_tilde_t[t-1]
  posterior *= x_t * (1-0.5*beta_t) + (1 - x_t) * (1.5*beta_t)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Honestly, I’m still not totally sure if this needs to be normalized or something. I should probably put that on my long list of to-dos.&lt;/p&gt;

&lt;h2 id=&quot;entropy-of-multivariate-bernoulli-distributions&quot;&gt;Entropy of Multivariate Bernoulli Distributions&lt;/h2&gt;

&lt;p&gt;This one was a doozy. While calculating that darn $K$ value, we find ourselves in need of the following entropies:&lt;/p&gt;

\[H_q(\mathbf{X}^{(T)}\vert \mathbf{X}^{(0)}) - H_q(\mathbf{X}^{(1)}\vert \mathbf{X}^{(0)}) - H_q(\mathbf{X}^{(T)})\]

&lt;p&gt;These are entropies of multivariate Bernoulli distributions. So, first thing’s first, the definition of the entropy of a discrete distribution $p(x)$ over $\mathcal{X}$ is&lt;/p&gt;

\[H(p(x)) = -\sum_{x\in\mathcal{X}}p(x)\log p(x)\]

&lt;p&gt;Now, for a single Bernoulli distribution with probability $0\leq c \leq 1$, it works out that&lt;/p&gt;

\[H(\mathcal{B}(c)) = -(c\log c + (1-c) \log c)\]

&lt;p&gt;But life is not so simple when you get to the multivariate case. If we have $n$ Bernoulli distributions, each with probability $p_i$, then the probability of an outcome $x\in\{0,1\}^n$ is given by&lt;/p&gt;

\[p(x) = \prod_{i=1}^n x_i p_i + (1-x_i)(1-p_i)\]

&lt;p&gt;and there are $2^n$ values of $x$ in our entropy summation… If we are learning sequences of length 20, each loss calculation would involve summing $2^{20}=1048576$ products. That is not efficient.&lt;/p&gt;

&lt;p&gt;However! There are additional constraints at play which give us hope.&lt;/p&gt;

&lt;p&gt;Let’s consider $H_q(\mathbf{X}^{(T)}\vert \mathbf{X}^{(0)})$. Recall that&lt;/p&gt;

\[q\left(\mathbf{x}^{(T)}\vert \mathbf{x}^{(0)} \right) = \mathcal{B}\left(\mathbf{x}^{(0)}(1-\tilde{\beta}_{T}) + 0.5\tilde{\beta}_{T}\right)\]

&lt;p&gt;Consequently, each Bernoulli distribution can only have one of two probabilities:&lt;/p&gt;

\[p_i =
\begin{cases}
1-0.5\tilde{\beta}_T, &amp;amp; \text{if} &amp;amp; \mathbf{x}^{(0)}_i = 1 \\
0.5\tilde{\beta}_T, &amp;amp; \text{if} &amp;amp; \mathbf{x}^{(0)}_i = 0
\end{cases}\]

&lt;p&gt;It follows almost immediately that $\mathbf{x}^{(T)}_i = \mathbf{x}^{(0)}_i$, then the probability must be $1-0.5\tilde{\beta}_T$, and otherwise the probability of $\mathbf{x}^{(T)}_i$ is $0.5\tilde{\beta}_T$.&lt;/p&gt;

&lt;p&gt;In other words, the probability of any outcome $\mathbf{x}^{(T)}$ is totally determined by the number of digits it has in common with $\mathbf{x}^{(0)}$. If they agree in $k$ digits and disagree for the other $k-n$, then the probability of $\mathbf{x}^{(T)}$ is&lt;/p&gt;

\[(1-0.5\tilde{\beta}_T)^k (0.5\tilde{\beta}_T)^{n-k}\]

&lt;p&gt;So how many samples will have each probability? a bit of thought will convince you that there is $n$ choose $k$ ways to agree in $k$ digits.&lt;/p&gt;

&lt;p&gt;Now, how does this all tie back into entropy? Well, all three entropies are similar, but wrapping up the case of $H_q(\mathbf{X}^{(T)}\vert \mathbf{X}^{(0)})$, we can calculate that&lt;/p&gt;

\[H(p(x)) = -\sum_{x\in\mathcal{X}}p(x)\log p(x) \\
=-\sum_{k=0}^n {n\choose k}(1-0.5\tilde{\beta}_T)^k (0.5\tilde{\beta}_T)^{n-k}\log \left((1-0.5\tilde{\beta}_T)^k (0.5\tilde{\beta}_T)^{n-k}\right)\]

&lt;p&gt;Easy as.&lt;/p&gt;</content><author><name>Beau Horenberger</name></author><summary type="html">What is Bernoulli Diffusion? What is Bernoulli Diffusion?</summary></entry><entry><title type="html">The Mystery of the Frog Riddle</title><link href="http://localhost:4000/2022/08/16/mysteryofthefrogriddle.html" rel="alternate" type="text/html" title="The Mystery of the Frog Riddle" /><published>2022-08-16T00:00:00-04:00</published><updated>2022-08-16T00:00:00-04:00</updated><id>http://localhost:4000/2022/08/16/mysteryofthefrogriddle</id><content type="html" xml:base="http://localhost:4000/2022/08/16/mysteryofthefrogriddle.html">&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#problem-statement-suppose-you-must-lick-a-frog&quot; id=&quot;markdown-toc-problem-statement-suppose-you-must-lick-a-frog&quot;&gt;Problem Statement: Suppose You Must Lick A Frog&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#plot-twist-losing-my-marbles&quot; id=&quot;markdown-toc-plot-twist-losing-my-marbles&quot;&gt;Plot Twist: Losing My Marbles&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#clarifying-the-frog-problem&quot; id=&quot;markdown-toc-clarifying-the-frog-problem&quot;&gt;Clarifying the Frog Problem&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#shared-assumptions&quot; id=&quot;markdown-toc-shared-assumptions&quot;&gt;Shared Assumptions&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#frog-problem-formulation-1&quot; id=&quot;markdown-toc-frog-problem-formulation-1&quot;&gt;Frog Problem Formulation 1&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#frog-problem-formulation-2&quot; id=&quot;markdown-toc-frog-problem-formulation-2&quot;&gt;Frog Problem Formulation 2&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#the-boy-or-girl-paradox&quot; id=&quot;markdown-toc-the-boy-or-girl-paradox&quot;&gt;The Boy or Girl Paradox&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#the-crux&quot; id=&quot;markdown-toc-the-crux&quot;&gt;The Crux&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#conclusion&quot; id=&quot;markdown-toc-conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ps&quot; id=&quot;markdown-toc-ps&quot;&gt;PS&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Author’s Note:&lt;/p&gt;

&lt;p&gt;I have significantly overhauled this article since it was first published. Many readers crafted finely-tuned arguments, precisely identifying the logical weaknesses of my original post.&lt;/p&gt;

&lt;p&gt;In response, I have shuffled the logical weaknesses of the article around, rendering all previous discourse nonsensical.&lt;/p&gt;

&lt;h2 id=&quot;problem-statement-suppose-you-must-lick-a-frog&quot;&gt;Problem Statement: Suppose You Must Lick A Frog&lt;/h2&gt;

&lt;p&gt;Recently a friend of mine, Seong, posted an interesting video called “Can you solve the frog riddle? - Derek Abbot” in his &lt;a href=&quot;https://discord.gg/CywQETvt&quot;&gt;Discord server.&lt;/a&gt; The video describes a statistical puzzle:&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/cpwSGsb-rTs&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;The problem statement is as follows:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;…You’ve eaten a poisonous mushroom. To save your life, you need the antidote excreted by a certain species of frog. Unfortunately, only the female of the species produces the antidote, and to make matters worse, the male and female occur in equal numbers and look identical, with no way for you to tell them apart, except that the male has a distinctive croak…&lt;/p&gt;

  &lt;p&gt;To your left, you’ve spotted a frog on a tree stump, but before you start running to it, you’re startled by the croak of a male frog coming from a clearing in the opposite direction. There, you see two frogs, but you can’t tell which one made the sound… You only have time to go in one direction before you collapse.&lt;/p&gt;

  &lt;p&gt;What are your chances of survival if you head for the clearing and lick both of the frogs there? What about if you go to the tree stump?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The video eventually gets around to describing the proposed solution:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;So here’s the right answer: going for the clearing gives you a two in three chance of survival…&lt;/p&gt;

  &lt;p&gt;When we first see the two frogs, there are several possible combinations of male and female. If we write out the full list, we have what mathematicians call the sample space…&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The sample space for the frogs in the clearing looks like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Frog1 | Frog2
-------------
Male  | Male
Male  | Female
Female| Male
Female| Female
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then,&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Out of the four possible combinations, only one has two males… The croak gives us additional information. As soon as we know that one of the frogs is male, that tells us there can’t be a pair of females, which means we can eliminate that possibility from the sample space, leaving us with three possible combinations.&lt;/p&gt;

  &lt;p&gt;Of them, one still has two males, giving us our two in three chance… of getting a female.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;There you have it! It’s all clear, right? We see that probability is mysterious and confusing and you can always solve your problems by appealing to the sample space. There’s nothing left to talk about, case closed, see you later.&lt;/p&gt;

&lt;h2 id=&quot;plot-twist-losing-my-marbles&quot;&gt;Plot Twist: Losing My Marbles&lt;/h2&gt;

&lt;p&gt;It was late last night. I had just finished watching the frog video, and I was laying in bed feeling quite smug. Then, I received the following messages:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-08-16-mysteryofthefrogriddle/Pasted image 20220816172519.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-08-16-mysteryofthefrogriddle/Pasted image 20220816172544.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This made me feel bad.&lt;/p&gt;

&lt;p&gt;Let’s start with the base case. Suppose you have the bag with just one marble in it. Suppose this marble is equally likely to be red or black. If you were to draw the marble of the bag, it’s a one out of two, i.e. 50%, chance that the marble is black. No mystery there.&lt;/p&gt;

&lt;p&gt;Now, let’s take the bag with the unknown marble again. This time, we drop a red marble into the bag and give it a good shake. When we dump both marbles out of the bag, what are the odds we find a black marble? Well, let’s use the sample space approach from the frog video:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Marble1 | Marble2
-----------------
Black   | Black
Black   | Red
Red     | Black
Red     | Red
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But we know one of the marbles must be red, so &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Black Black&lt;/code&gt; can be crossed off the list. This leaves three possibilities, and two of them involve a black marble, so… There’s a two in three chance of finding a black marble?&lt;/p&gt;

&lt;p&gt;To be extremely clear, the conclusion here is this: dropping a red marble in the bag &lt;em&gt;increases the chance that the unknown marble will be black&lt;/em&gt;. You can extend this to show that as you add red marbles, the probability of the bag containing a black marble continues to rise.&lt;/p&gt;

&lt;p&gt;So what, do we just lay down and take this? Is this the reality we live in?&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-08-16-mysteryofthefrogriddle/Pasted image 20220816180915.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I think not.&lt;/p&gt;

&lt;h2 id=&quot;clarifying-the-frog-problem&quot;&gt;Clarifying the Frog Problem&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://stats.stackexchange.com/questions/201502/the-frog-riddle-conditional-probabilities&quot;&gt;We are not the first people to feel upset by this video.&lt;/a&gt; Additionally, &lt;a href=&quot;https://www.duckware.com/blog/the-ted-ed-frog-riddle-is-wrong/index.html&quot;&gt;we are not the first people to take a whack at correcting it.&lt;/a&gt; The cited attempt fixes the problem by assuming additional information. They assume males have a 50% chance of croaking, and females have a 0% chance of croaking. Then it follows that the probability of finding a female frog in the clearing matches the 2/3 from the original video. Another weird consequence is that the probability of the frog on the stump being female is now also 2/3, so both directions offer the same probability.&lt;/p&gt;

&lt;p&gt;I wanted to clarify the original problem so that it could be solved unambiguously, but I also wanted to keep the problem as close to the original formulation as possible.&lt;/p&gt;

&lt;p&gt;One way to remove ambiguity from the frog problem is by making it complete from a frequentist perspective. In other words, we should define the problem such that it contains sufficient information to set up and perform repeated trials. Then any mathematical proof about probabilities has a clear meaning: it is a statement about the quantity of each outcome after repeated trials (when the number of trials is very large). This comes with the added bonus that we can verify our theorems empirically.&lt;/p&gt;

&lt;p&gt;I found two formulations of the frog problem which are complete from the frequentist perspective. We will discuss both below.&lt;/p&gt;

&lt;h3 id=&quot;shared-assumptions&quot;&gt;Shared Assumptions&lt;/h3&gt;

&lt;p&gt;Both formulations use the following assumptions:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;The genders of frogs are independent and identically distributed.&lt;/li&gt;
  &lt;li&gt;$p(M)=p(F)=0.5$ for an arbitrarily sampled frog.&lt;/li&gt;
  &lt;li&gt;If you go to the stump, you will sample one frog.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;frog-problem-formulation-1&quot;&gt;Frog Problem Formulation 1&lt;/h3&gt;

&lt;p&gt;Additional assumptions:&lt;/p&gt;

&lt;ol start=&quot;4&quot;&gt;
  &lt;li&gt;If you go to the clearing, you will sample one frog and additionally receive a male frog.&lt;/li&gt;
  &lt;li&gt;If you go the clearing, there is a 50% chance you will sample before receiving the male frog (and a 50% chance of the converse).&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Note that this is equivalent to randomly assigning one of the frogs to be male (50/50 which frog gets chosen) and then randomly sampling the other frog’s gender.&lt;/p&gt;

&lt;p&gt;So what can we prove about this formulation?&lt;/p&gt;

&lt;p&gt;For the stump, it follows trivially from (2) and (3) that $p(M)=p(F)=0.5$, so you’ve got a 50% chance of getting a female frog.&lt;/p&gt;

&lt;p&gt;How about the clearing? Well, using (1), (2), and (4), we see that the frog we will sample has probabilities $p(M)=p(F)=0.5$. So what do our outcomes look like? This is where we must use assumption (5).&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Sample first, Sample is male (MM): $50\%*50\%=25\%$&lt;/li&gt;
  &lt;li&gt;Sample first, Sample is female (FM): $50\%*50\%=25\%$&lt;/li&gt;
  &lt;li&gt;Sample second, Sample is male (MM): $50\%*50\%=25\%$&lt;/li&gt;
  &lt;li&gt;Sample second, Sample is female (MF): $50\%*50\%=25\%$&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Now, adding these up, we see that (MM) has a probability of 50% whereas (FM) and (MF) together have a probability of 50%.&lt;/p&gt;

&lt;p&gt;Thus, it’s clear that there is only a 50% chance that you will survive if you run to the clearing.&lt;/p&gt;

&lt;p&gt;I’ve got the data to back it up:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;from random import randint

num_trials = 1000000
num_trials_survived = 0

for i in range(num_trials):
    both_frogs = []
    known_frog = ['M']
    unknown_frog = ['F'] if randint(0,1) else ['M']
    # Shuffle the known and unknown frog
    if randint(0,1):
        both_frogs = known_frog + unknown_frog
    else:
        both_frogs = unknown_frog + known_frog
    if 'F' in both_frogs:
        num_trials_survived += 1

print(num_trials_survived/num_trials) # 0.500412
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;frog-problem-formulation-2&quot;&gt;Frog Problem Formulation 2&lt;/h3&gt;

&lt;p&gt;Additional assumptions:&lt;/p&gt;

&lt;ol start=&quot;4&quot;&gt;
  &lt;li&gt;If you go to the clearing, you will sample two frogs. If both frogs are female, resample both frogs.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This approach was not intuitive to me. I read a lot of angry Facebook comments describing this method before I finally understood that it was different from Formulation 1.&lt;/p&gt;

&lt;p&gt;This approach is computationally annoying because each trial might involve resampling multiple times. (Note to self: is there a way that avoids resampling?) However, it meets all the criteria of the original frog problem, just like Formulation 1.&lt;/p&gt;

&lt;p&gt;The single frog on the stump is the same as before: (2) and (3) imply a 50% chance of survival.&lt;/p&gt;

&lt;p&gt;The two frogs in the clearing, however, are different. Let’s step through a single trial. For the first sample, there are four possible outcomes:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Sample 1
__________________________________
Outcome         | Probability
________________________________
M M             | 0.5*0.5 = 0.25
M F             | 0.5*0.5 = 0.25
F M             | 0.5*0.5 = 0.25
F F (Resample)  | 0.5*0.5 = 0.25
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If we drew (FF) and needed to resample, the odds would be identical for Sample 2.&lt;/p&gt;

&lt;p&gt;So what are the odds that you get (FF) for Sample 1, resample once, and then get (MF) for Sample 2? The answer is $0.25*0.25$. We can similarly calculate the odds of resampling an arbitrary number of times before getting (MM), (MF), or (FM).&lt;/p&gt;

&lt;p&gt;It follows that, for each trial, the actual probability for $MM$, $MF$, and $FM$ are all equal:&lt;/p&gt;

\[P(MM)=P(MF)=P(FM)=\sum_{n=1}^\infty 0.25^n = \frac{1}{3}\]

&lt;p&gt;Then it follows that the probability of survival is equal to $P(MF)+P(FM) = \frac{2}{3}$.&lt;/p&gt;

&lt;p&gt;Here’s the empirical evidence for those who lack faith:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;from random import randint

num_trials = 1000000
num_trials_survived = 0

def sample_frog():
    return ['F'] if randint(0,1) else ['M']

for i in range(num_trials):
    both_frogs = sample_frog() + sample_frog()
    while both_frogs == ['F', 'F']:
        both_frogs = sample_frog() + sample_frog()
    if 'F' in both_frogs:
        num_trials_survived += 1

print(num_trials_survived/num_trials) # 0.666342
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;the-boy-or-girl-paradox&quot;&gt;The Boy or Girl Paradox&lt;/h2&gt;

&lt;p&gt;Let me start by stating a subtle yet crucial mathematical fact:&lt;/p&gt;

\[\frac{2}{3}\neq \frac{1}{2}\]

&lt;p&gt;We have created two experimental setups which met all of the criteria from the original problem, and each setup produced different probabilities of survival. How? Why? Let’s reiterate what we know:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Both probabilities were derived incontrovertibly from their respective assumptions&lt;/li&gt;
  &lt;li&gt;In both formulations, there are two frogs in the clearing such that at least one frog is male&lt;/li&gt;
  &lt;li&gt;The only difference between the two formulations is how we sampled the two frogs in the clearing&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;It turns out that we have stumbled into the &lt;a href=&quot;https://en.wikipedia.org/wiki/Boy_or_Girl_paradox#Second_question&quot;&gt;Boy or Girl paradox&lt;/a&gt;. The paradox regards a set of two questions which first appeared in 1959 in the Scientific American. The questions were presented as statistics brain teasers. We are most interested in the second question of the two:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Mr. Smith has two children. At least one of them is a boy. What is the probability that both children are boys?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;It wasn’t until after publication that the author, Martin Gardner, realized the question was incomplete; the answer could be $\frac{1}{2}$ or $\frac{2}{3}$ depending on how we determined that “at least one of them is a boy.”&lt;/p&gt;

&lt;p&gt;According to Wikipedia, the two outcomes can be obtained from the following two sampling procedures:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;From all families with two children, one child is selected at random, and the sex of that child is specified to be a boy. This would yield an answer of 1/2.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;From all families with two children, at least one of whom is a boy, a family is chosen at random. This would yield the answer of 1/3.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Can we translate this into frog licking? Let’s start with formulating the question:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The clearing has two frogs. At least one of them croaks (and therefore is male). What is the probability that both frogs are male?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Now the sampling methods:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;From all clearings with two frogs, one frog is selected at random, and the sex of that frog is specified to be male. This would yield the answer of 1/2.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;From all clearings with two frogs, at least one of whom is a male, a clearing is chosen at random. This would yield the answer of 1/3.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;We can verify these map to the two Frog Problem Formulations above. Frog Problem Formulation 2 corresponds to selecting a clearing at random out of all clearings with two frogs, one of whom is male. This is why we only throw out (MM) samples.&lt;/p&gt;

&lt;p&gt;On the other hand, Frog Problem Formulation 1 corresponds to selecting a random frog and observing that it is male.&lt;/p&gt;

&lt;p&gt;Clearly, we are caught in a paradox. And now it’s time to resolve the paradox. We have to decide on a sampling method.&lt;/p&gt;

&lt;h2 id=&quot;the-crux&quot;&gt;The Crux&lt;/h2&gt;

&lt;p&gt;So here we are. I’ve tipped my hand. You know everything I know. One question remains.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Suppose that tomorrow I’m out wandering in a clearing. Behind me, I hear a croak. I turn around and see two frogs. What is the probability that at least one of the frogs is female?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;In my opinion,&lt;/em&gt; because I did not select the clearing specifically to guarantee that it would have at least one male, then it follows that the first sampling method from the previous section is the correct method, and the probability is thus 1/2.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;In my opinion,&lt;/em&gt; if you disagree with me, then you are a baboon and the game was rigged from the start.&lt;/p&gt;

&lt;p&gt;But I’ll be honest. I’m not 100% sure I’ve got the right answer here, much less that there’s a correct answer at all. But I have to follow my heart, and my heart is telling me that you’re an simpleton if you think the probability is 1/3.&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;It seems pretty fucking clear to me that this video sucks. At best, it leaves out essential assumptions. At worst, it’s straight-up wrong. I stayed up until 2AM thinking about this, and I &lt;em&gt;almost&lt;/em&gt; gave in to the belief that adding black marbles to the bag makes the red marble more likely. This video made me hit rock bottom.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-08-16-mysteryofthefrogriddle/Pasted image 20220816183317.png&quot; alt=&quot;Credit to 16mhz from the TPM Discord server&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ps&quot;&gt;PS&lt;/h2&gt;

&lt;p&gt;There are other famous problems where different sampling procedures produce different results, such as the &lt;a href=&quot;https://en.wikipedia.org/wiki/Bertrand_paradox_(probability)&quot;&gt;Bertrand paradox&lt;/a&gt;. The Bertrand paradox is still considered unresolved.&lt;/p&gt;

&lt;p&gt;Also, the Marble paradox is left as an exercise to the reader.&lt;/p&gt;</content><author><name>Beau Horenberger</name></author><summary type="html">Author’s Note:</summary></entry><entry><title type="html">What is an object? Object Detection and Philosophy… In Runescape</title><link href="http://localhost:4000/2022/07/19/runescapeobjectdetection.html" rel="alternate" type="text/html" title="What is an object? Object Detection and Philosophy… In Runescape" /><published>2022-07-19T00:00:00-04:00</published><updated>2022-07-19T00:00:00-04:00</updated><id>http://localhost:4000/2022/07/19/runescapeobjectdetection</id><content type="html" xml:base="http://localhost:4000/2022/07/19/runescapeobjectdetection.html">&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#the-means-justify-the-ends&quot; id=&quot;markdown-toc-the-means-justify-the-ends&quot;&gt;The means justify the ends&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#extracting-bounding-boxes-from-runelite&quot; id=&quot;markdown-toc-extracting-bounding-boxes-from-runelite&quot;&gt;Extracting bounding boxes from Runelite&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#calculating-bounding-boxes&quot; id=&quot;markdown-toc-calculating-bounding-boxes&quot;&gt;Calculating bounding boxes&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#exporting-the-data&quot; id=&quot;markdown-toc-exporting-the-data&quot;&gt;Exporting the data&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#approximating-whether-an-object-is-visible&quot; id=&quot;markdown-toc-approximating-whether-an-object-is-visible&quot;&gt;Approximating whether an object is visible&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#defining-images-and-objects&quot; id=&quot;markdown-toc-defining-images-and-objects&quot;&gt;Defining images and objects&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#what-is-an-object-like&quot; id=&quot;markdown-toc-what-is-an-object-like&quot;&gt;What is an object like?&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#surprise-were-talking-about-region-proposal&quot; id=&quot;markdown-toc-surprise-were-talking-about-region-proposal&quot;&gt;Surprise! We’re talking about region proposal!&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#the-visibility-model&quot; id=&quot;markdown-toc-the-visibility-model&quot;&gt;The visibility model&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#training-an-object-detector&quot; id=&quot;markdown-toc-training-an-object-detector&quot;&gt;Training an object detector&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#conclusion&quot; id=&quot;markdown-toc-conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;the-means-justify-the-ends&quot;&gt;The means justify the ends&lt;/h2&gt;

&lt;p&gt;This is a story about a very dope problem I stumbled upon while doing very dumb shit.&lt;/p&gt;

&lt;p&gt;First: the very dumb shit.&lt;/p&gt;

&lt;p&gt;I wanted to train an object detection algorithm to detect interactible objects (as opposed to scenery) in Runescape. I did this in two parts:&lt;/p&gt;

&lt;p&gt;1) Collect training data for an object detection algorithm&lt;/p&gt;

&lt;p&gt;2) Implement and train an object detection algorithm&lt;/p&gt;

&lt;p&gt;The first obvious question was data collection. Where in the world do you get training data for detecting interactible objects in Runescape? I programmed a Runelite plugin using the Runelite API which extracted “ground truth” data from the Runelite game client. This ground truth data contained bounding boxes around all interactible objects in the player’s field of view.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719172210.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;An example of the data that can be extracted from Runelite&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Collecting this ground truth data was not straightforward. I had to modify some existing Runelite plugins to calculate bounding boxes around objects of interest.&lt;/p&gt;

&lt;p&gt;Now: the dope problem.&lt;/p&gt;

&lt;p&gt;Once I had this data, I discovered we did not have sufficient information: the data describes all objects in the camera’s field of view, even if they are totally obscured from the player’s view. This is a problem, because obviously (although I never realized it until this problem popped up) I wanted to train the object detection algorithm to detect &lt;em&gt;visible objects&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;So I ended up having to solve the &lt;em&gt;visible object problem&lt;/em&gt;:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Suppose you have an image containing some object. Suppose the object might be partially or totally obscured by other objects in the image, but you aren’t sure. In fact, suppose you don’t even know what the object is supposed to be.  However, suppose there is one thing you know: You know where the object &lt;em&gt;would&lt;/em&gt; be in the image &lt;em&gt;if&lt;/em&gt; it were visible in the image. Can you guess whether the object is visible by looking at the image?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Before we solve this problem, I’ll talk about how I got the data. After that, though, we’ll start filtering visible vs invisible objects and then use the resulting data to train a YOLO classifier to identify interactible objects in Runescape.&lt;/p&gt;

&lt;h2 id=&quot;extracting-bounding-boxes-from-runelite&quot;&gt;Extracting bounding boxes from Runelite&lt;/h2&gt;

&lt;p&gt;Here’s the nitty gritty about how I got this data out of the game. You can skim this if you want, it’s cool, I get it.&lt;/p&gt;

&lt;h3 id=&quot;calculating-bounding-boxes&quot;&gt;Calculating bounding boxes&lt;/h3&gt;

&lt;p&gt;I discovered that Runelite has a built-in plugin called NPC Indicators which visually displays “convex hulls” around NPCs. This kind of calculation is quite similar to determining bounding boxes around objects, so it seemed obvious to start by attempting to modify this plugin.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220716195549.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;A default Runelite plugin that renders convex hulls around NPCs&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;I added a new setting to the plugin that calculated bounding boxes. Runelite’s API limits what data you can extract from the Runescape client, so I ended up having to start with the convex hull and calculate the equivalent bounding box. It was a pretty simple job, all things considered.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220716195954.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Quick code for turning a convex hull into a bounding box&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The results were not bad!&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220716201132.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;My modified plugin that calculates bounding boxes around NPCs&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;exporting-the-data&quot;&gt;Exporting the data&lt;/h3&gt;

&lt;p&gt;This bounding box data is ready to be extracted to CSV files. I extended the plugin so that it applied to all interactible objects instead of just non-player characters (NPCs). This was boring and not worth talking about. Then, I modified the built-in Screenshot plugin so that it periodically took screenshots and saved the corresponding bounding box data. The result was some nice-looking ground truth data:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220718202731.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;A sample of the training data in its natural form: image and csv pairs&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Let’s plot it:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719172210.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Visualizing the training data we obtained. Clearly it’s not what we wanted&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;So now I had arrived at the problem. These bounding boxes included objects which were completely obscured from view! Just look at the Man on the top-right of the screen:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719172335.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;This guy is not visible&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;This was unacceptable as ground truth training data. It would have been nice if I could ask the game for this information, since surely it knows which objects are visible. Unfortunately, I searched and searched, but I couldn’t find a way to determine if objects are visible using the Runelite API. So what can we do?&lt;/p&gt;

&lt;h2 id=&quot;approximating-whether-an-object-is-visible&quot;&gt;Approximating whether an object is visible&lt;/h2&gt;

&lt;h3 id=&quot;defining-images-and-objects&quot;&gt;Defining images and objects&lt;/h3&gt;

&lt;p&gt;Yeah, this is where things got a little weird. I wanted to take a down-and-dirty, model-based approach to filtering this bounding box data into “visible” and “not visible.” How would I build a model?&lt;/p&gt;

&lt;p&gt;Suppose we’re dealing with an $n\times m$ black-and-white image&lt;/p&gt;

\[I(x,y): \mathbb{Z}_n \times \mathbb{Z}_m \rightarrow \mathbb{Z}_{255}\]

&lt;p&gt;By definition, $I(x,y)$ tells the intensity value for pixel $(x,y)$. We know certain subsets of the pixels constitute visible objects. We assume visible objects are rectangular regions of pixels. Then there are an unknown amount, $k$, of rectangular regions of the image ${r_0,r_1,\ldots,r_p}$, where $r_i\subset \mathbb{Z}_n\times\mathbb{Z}_m$, which are visible objects.&lt;/p&gt;

&lt;h3 id=&quot;what-is-an-object-like&quot;&gt;What is an object like?&lt;/h3&gt;

&lt;p&gt;What can we assume about visible objects? One assumption is that subregions of a visible object have similar intensity histograms. Let’s look at an example from the previous images. Here we compare the distribution of intensities among the top and bottom halves of this goblin.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719211010.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Regions from the same object tend to have similar intensity histograms&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;While they’re not exactly the same, there’s certainly similarity. We can approximate the intensity similarity using histogram intersection:&lt;/p&gt;

&lt;p&gt;\(s_{intensity}(r_i, r_j) = \sum_{k=0}^{255}\text{min}(t_i^k,t_j^k)\)
Where $t_i^k$ is the quantity of pixels in region $r_i$ with intensity $k$. The similarity score of the top and bottom halves of this goblin is 398.&lt;/p&gt;

&lt;p&gt;Another similar concept is texture similarity, which uses the spatial intensity gradient instead of the raw intensity values. We can also generalize these concepts to color images.&lt;/p&gt;

&lt;h3 id=&quot;surprise-were-talking-about-region-proposal&quot;&gt;Surprise! We’re talking about region proposal!&lt;/h3&gt;

&lt;p&gt;Thinking about “what is an object” reminded me of some algorithms I saw in my computer vision class. This led me to discover the Selective Search Algorithm (SSA), which is exactly what we were looking for.&lt;/p&gt;

&lt;p&gt;Region proposal has been thoroughly studied in computer vision. According to the &lt;a href=&quot;http://www.huppelen.nl/publications/selectiveSearchDraft.pdf&quot;&gt;paper describing the SSA,&lt;/a&gt; region proposal concerns “generating possible object locations for use in object recognition.”&lt;/p&gt;

&lt;p&gt;The SSA used image segmentation along with metrics such as color similarity, intensity similarity, and texture similarity to generate a large set of regions. Region proposal algorithms tend to produce lots of false positives, as they cast a wide net and let a down-stream classifier filter these further.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719223250.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Region proposals from the original SSA paper&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Indeed, early object detectors were basically just model-based region proposer followed by a classifier. For example, the &lt;a href=&quot;https://towardsdatascience.com/r-cnn-fast-r-cnn-faster-r-cnn-yolo-object-detection-algorithms-36d53571365e&quot;&gt;R-CNN&lt;/a&gt; operated in two stages (image source &lt;a href=&quot;https://towardsdatascience.com/r-cnn-fast-r-cnn-faster-r-cnn-yolo-object-detection-algorithms-36d53571365e&quot;&gt;here&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;1)Generate a ton of region proposals from the image using &lt;a href=&quot;https://learnopencv.com/selective-search-for-object-detection-cpp-python/&quot;&gt;Selective Search Algorithm&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;2) Resize each region to some fixed dimensions and feed it into a CNN classifier&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719174426.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;the-visibility-model&quot;&gt;The visibility model&lt;/h3&gt;

&lt;p&gt;So, how does this relate guessing whether an object is visible given an image and the object’s bounding box? This is the “model” I settled on:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;An object is visible if and only if its bounding box is (approximately) generated by Selective Search Algorithm&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;So I generated region proposals using SSA, and if any of these proposals had an &lt;a href=&quot;https://en.wikipedia.org/wiki/Jaccard_index&quot;&gt;Intersection over Union (IoU)&lt;/a&gt; with an object bounding box close to 1, then we call them a match and declare the object visible.&lt;/p&gt;

&lt;p&gt;That’s it! Sounds stupid, right? Well fuck off, I was pretty proud of this little trick.&lt;/p&gt;

&lt;p&gt;So does it work? See for yourself:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719174900.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Left: Objects labeled “visible” by SSA. Right: Objects labeled “invisible” by SSA&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719175132.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Left: Objects labeled “visible” by SSA. Right: Objects labeled “invisible” by SSA&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Come on, that’s not bad! Maybe it’s a little overly cautious, but I think this will filter out a nice dataset of visible objects! So that’s the trick! That’s how I created training data for visually detecting interactible objects in Runescape.&lt;/p&gt;

&lt;h2 id=&quot;training-an-object-detector&quot;&gt;Training an object detector&lt;/h2&gt;
&lt;p&gt;I used &lt;a href=&quot;https://pytorch.org/hub/ultralytics_yolov5/&quot;&gt;YOLOV5&lt;/a&gt; and trained on a bunch of training data collected from around Lumbridge area in Runescape. The results were not too bad:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719224900.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Using a trained YOLOV5 to detect interactible objects&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719225052.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Using a trained YOLOV5 to detect interactible objects&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Nobody’s calling it perfect, but it’s pretty fast and not terribly inaccurate! This thing is pretty good at guessing what objects you can click in Runescape.&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;There is no conclusion. The human condition drives us forward, hurtling ourselves blindly into the unknown. I leapfrog from idea to idea, and each hop manifests ripples on the surface of the water. These are my signature, my proof that I was here. It seems you have found one of my ripples.&lt;/p&gt;</content><author><name>Beau Horenberger</name></author><summary type="html">The means justify the ends The means justify the ends</summary></entry><entry><title type="html">Egyptians and the Rhind Mathematical Papyrus: Egyptian Arithmetic (2)</title><link href="http://localhost:4000/2022/06/18/egyptianmath2.html" rel="alternate" type="text/html" title="Egyptians and the Rhind Mathematical Papyrus: Egyptian Arithmetic (2)" /><published>2022-06-18T00:00:00-04:00</published><updated>2022-06-18T00:00:00-04:00</updated><id>http://localhost:4000/2022/06/18/egyptianmath2</id><content type="html" xml:base="http://localhost:4000/2022/06/18/egyptianmath2.html">&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#intro&quot; id=&quot;markdown-toc-intro&quot;&gt;Intro&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#hieroglyphic&quot; id=&quot;markdown-toc-hieroglyphic&quot;&gt;Hieroglyphic&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#egyptian-numerals&quot; id=&quot;markdown-toc-egyptian-numerals&quot;&gt;Egyptian Numerals&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#adding-and-multiplying&quot; id=&quot;markdown-toc-adding-and-multiplying&quot;&gt;Adding And Multiplying&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#division-and-egyptian-fractions&quot; id=&quot;markdown-toc-division-and-egyptian-fractions&quot;&gt;Division and Egyptian Fractions&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#fractions&quot; id=&quot;markdown-toc-fractions&quot;&gt;Fractions&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#division&quot; id=&quot;markdown-toc-division&quot;&gt;Division&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#conclusion&quot; id=&quot;markdown-toc-conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;p&gt;If you’ve read &lt;a href=&quot;https://horenbergerb.github.io/2022/05/26/egyptianmath1.html&quot;&gt;the first article in this series&lt;/a&gt;, then you may be aware of the Rhind Mathematical Papyrus. The RMP is an Egyptian scroll and one of the earliest written mathematical documents. Rather than diving straight into the RMP, this article discusses the written Egyptian language, hieroglyphic, as well as the Egyptian number system and basic Egyptian arithmetic.&lt;/p&gt;

&lt;p&gt;Arithmetic may sound like trivial material to some, but the Egyptians did not have the intellectual infrastructure we take for granted today. The Egyptian methods and notation we will discuss are over 3000 years old and were practically the first written mathematics in Egypt. They are a far cry from modern algebra.&lt;/p&gt;

&lt;h2 id=&quot;hieroglyphic&quot;&gt;Hieroglyphic&lt;/h2&gt;

&lt;p&gt;You don’t really need to know about hieroglyphs to understand Egyptian numbers, but I’m going to tell you about it anyways.&lt;/p&gt;

&lt;p&gt;This section is a criminally-reductive paraphrasing of “Middle Egyptian: An Introduction to the Language and Culture of Hieroglyphs” by James P. Allen.&lt;/p&gt;

&lt;p&gt;The first known Egyptian writing is dated around 3200BC, near the beginning of Egypt. The language survived until around 1100AD, and it has many distinct stages of life. The stage which interests us most is Middle Egyptian (2100BC-1600BC). Middle Egyptian is one of the best-understood eras of Hieroglyphic. The RMP was written in Middle Egyptian.&lt;/p&gt;

&lt;p&gt;Middle Egyptian was composed of around 500 unique hieroglyphs. Each hieroglyph was an illustration. Every hieroglyph could be used in each of three ways:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;As an &lt;em&gt;ideogram&lt;/em&gt;, meaning that the hieroglyph means what it depicts. For example, a hieroglyph depicting a house, if it is used as an ideogram, is supposed to convey the concept of a house.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;As a &lt;em&gt;phonogram&lt;/em&gt;, meaning that the hieroglyph is supposed to convey the sound of pronouncing the word associated with the hieroglyph’s ideogram. For example, we can communicate the word “belief” by using the following pictures as phonograms:&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://www.researchgate.net/profile/Philipp-Wicke-3/publication/316168050/figure/fig6/AS:484112994705409@1492432940097/Exemplary-use-of-the-rebus-principle-with-Emojis-Here-the-Emoji-Unicode-U-1F41D-for.png&quot; alt=&quot;Using phonograms to communicate spoken words in writing&quot; /&gt;&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Using phonograms to communicate spoken words in writing&lt;/em&gt;&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;As a &lt;em&gt;determinative&lt;/em&gt;, meaning that it indicates whether other hieroglyphs should be read as ideograms or phonograms. Words were made by groupings of hieroglyphs ending with a determinative that instructed you how to read them.&lt;/li&gt;
&lt;/ol&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/Relief_of_Nofer.jpg&quot; alt=&quot;Hieroglyphs on the Relief of Nofer from the Boston Museum of Fine Arts&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Hieroglyphs on the Relief of Nofer from the Boston Museum of Fine Arts&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;There’s, like, a lot more to understanding hieroglyphic, but these three concepts outline the basic functionality.&lt;/p&gt;

&lt;p&gt;The Egyptians also wrote in hieratic, which was essentially the cursive version of Hieroglyph. Hieratic was more common for scrolls and bureaucratic texts, while hieroglyphic would be used for rituals and decoration in tombs and palaces.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/6/66/Scribe%27s_exercise_tablet_1.jpg&quot; alt=&quot;Hieratic writing, &amp;quot;Be on your guard against all who are subordinate to you... Trust no brother, know no friend, make no intimates.&amp;quot; Probably lyrics by an Egyptian rapper or something&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Hieratic writing, “Be on your guard against all who are subordinate to you… Trust no brother, know no friend, make no intimates.”&lt;sup&gt;&lt;a href=&quot;https://collections.mfa.org/objects/136183/relief-of-nofer?ctx=de17a16a-c1f5-4149-849e-fde75b21deea&amp;amp;idx=12&quot;&gt;6&lt;/a&gt;&lt;/sup&gt; Probably lyrics by an Egyptian rapper or something&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;egyptian-numerals&quot;&gt;Egyptian Numerals&lt;/h2&gt;

&lt;p&gt;Before written language, it is commonly believed counting was performed through the use of tally marks.&lt;/p&gt;

&lt;p&gt;Carving notches into bones is the earliest concrete evidence of counting, possibly going as far back as 30,000BC.&lt;sup&gt;&lt;a href=&quot;https://web.archive.org/web/20111213011551/http://www.thocp.net/timeline/0000.htm&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; There is usually debate surrounding any example of tally marks in the pre-language era, something like, “you don’t really know they were counting! They could have just been goofing around!” Sure, whatever.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://web.archive.org/web/20111213011600im_/http://www.thocp.net/timeline/pictures/tally_sticks_wolvebones_30000bc.gif&quot; alt=&quot;Counting with tally marks?&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Counting?&lt;sup&gt;&lt;a href=&quot;https://web.archive.org/web/20111213011551/http://www.thocp.net/timeline/0000.htm&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;It should come as no surprise, then, that the Egyptian symbol for 1 appears to be simply a tally mark, and for small numbers, they just wrote more tally marks.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/2_and_3_example.png&quot; alt=&quot;Egyptian hieratic depiction of the numbers 2 and 3 from the RMP&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Egyptian hieratic depiction of the numbers 2 and 3 from the RMP&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Tally marks quickly became inconvenient for larger numbers, so new symbols were created to represent these numbers. Coincidentally, the Egyptians used a base 10 numeral system. Perhaps there is some relationship to counting on fingers?&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/hieratic_numerals.png&quot; alt=&quot;Behold, numbers&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Behold, numbers&lt;sup&gt;&lt;a href=&quot;https://www.britannica.com/science/hieratic-numeral&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Numbers were represented as groupings of these symbols. A number is equal to the sum of its substituent hieroglyphics.&lt;sup&gt;&lt;a href=&quot;https://books.google.com/books/about/A_History_of_Mathematics.html?id=h50fAQAAIAAJ&quot;&gt;5&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;For example, here is the number 17 depicted in the RMP:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/17_rmp.png&quot; alt=&quot;The number 17&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;The number 17&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;Warning:&lt;/strong&gt; The Egyptians didn’t give a fuck, and they apparently invented multiple symbols to represent the same numbers. For example, the RMP often depicts 4 as a single horizontal bar (half of an 8, if you will). I haven’t found any scholarly sources discussing this. We all just have to live with it.&lt;/p&gt;

&lt;h2 id=&quot;adding-and-multiplying&quot;&gt;Adding And Multiplying&lt;/h2&gt;

&lt;p&gt;Egyptians were fairly comfortable with arithmetic, i.e. adding, multiplying, and dividing. They had somewhat standardized procedures for these operations. They did not use algebraic symbols like our $+$ and $*$ signs, so specifying the operation to be performed was done in words or intuited from the context.&lt;/p&gt;

&lt;p&gt;Adding two numbers was pretty simple to the Egyptians. You literally put them together, and if you’re feeling really generous, you can reduce it to make it prettier.&lt;/p&gt;

&lt;p&gt;Egyptian multiplication was a little more complex. Using modern algebra, you can think of it like this:&lt;/p&gt;

&lt;p&gt;Say you want to calculate $33*47$.&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/rhindmathematica0000robi_h8l4&quot;&gt;7&lt;/a&gt;&lt;/sup&gt; Calculating this directly might be annoying, so the Egyptians would break it up into easier products:&lt;/p&gt;

\[33*47 = (1 + 10 + 20 + 2)*47 =\]

\[1*47\]

\[+10*47\]

\[+20*47\]

\[+2*47\]

&lt;p&gt;If the Egyptians didn’t know how they wanted to break apart a number, they would use the base 2 decomposition:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/Robins_multiplication.png&quot; alt=&quot;Multiplication using powers of two&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Multiplication using powers of two&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/rhindmathematica0000robi_h8l4&quot;&gt;7&lt;/a&gt;&lt;/sup&gt;&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Scholars generally regard this as “absolutely nuts,” because it’s crazy that the Egyptians figured out every number can be represented as a sum of powers of two. Some sources suggest this method of multiplication by doubling may have originated from Africa.&lt;sup&gt;&lt;a href=&quot;https://books.google.com/books/about/A_History_of_Mathematics.html?id=h50fAQAAIAAJ&quot;&gt;5&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;This idea of breaking apart a number into a convenient sum is &lt;em&gt;huge&lt;/em&gt; in Egyptian mathematics. It was also commonly applied to division.&lt;/p&gt;

&lt;h2 id=&quot;division-and-egyptian-fractions&quot;&gt;Division and Egyptian Fractions&lt;/h2&gt;

&lt;h3 id=&quot;fractions&quot;&gt;Fractions&lt;/h3&gt;

&lt;p&gt;Okay, this is where shit starts to get really weird. First, let’s talk about fractions. In hieratic, any number $n$ could be modified by putting a dot above it in order to represent $\frac{1}{n}$.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/1_over_8_rmp.png&quot; alt=&quot;The fraction 1/8&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;The fraction 1/8&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;In proper Egyptian Hieroglyphic, the eye symbol &lt;em&gt;er&lt;/em&gt; was used instead of a dot. &lt;em&gt;er&lt;/em&gt; can mean “from” or “of,” perhaps intending to convey &lt;img src=&quot;/images/one_third.png&quot; alt=&quot;one third&quot; /&gt; as “(one) of 3.”&lt;/p&gt;

&lt;p&gt;There were also, of course, special symbols for certain common fractions:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/fractions_reference.png&quot; alt=&quot;Table of common fraction symbols&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Table of common fraction symbols.&lt;sup&gt;&lt;a href=&quot;https://en.wikisource.org/wiki/A_History_Of_Mathematical_Notations/Volume_1/Egyptians&quot;&gt;8&lt;/a&gt;&lt;/sup&gt;&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The way that Egyptians used these fractions was weird. They preferred not to repeat fractions. Depicting $\frac{2}{5}$ as &lt;img src=&quot;/images/one_fifth.png&quot; alt=&quot;one fifth&quot; /&gt; &lt;img src=&quot;/images/one_fifth.png&quot; alt=&quot;one fifth&quot; /&gt; was considered “unfinished.” One was expected to instead calculate (or look up) a sum of unique unit fractions equal to $\frac{2}{5}$.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/2_over_n_table_5_rmp.png&quot; alt=&quot;The 2nd row of the RMP's 2/n table calculates 2/5 as a sum of unique unit fractions&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;The 2nd row of the RMP’s 2/n table calculates $\frac{2}{5}=\frac{1}{3}+\frac{1}{15}$&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;In fact, the Rhind Mathematical Papyrus begins with a massive table called the “2/n table” which calculates a unique sum of unit fractions for $\frac{2}{n}$ starting with $n=3$ and going all the way to $n=101$! That’s bonkers.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/2_over_n_table_column_one_rmp.png&quot; alt=&quot;The first column of the 2/n table covering n=3 through n=15&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;The first column of the 2/n table covering n=3 through n=15. The $n$ value for each row appears on the right-hand side. Values in red denote the sums of unit fractions.&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;It’s not clear why the Egyptians felt the need to represent vulgar fractions as the sum of unique unit fractions. One hypothesis is that the common procedure for dividing (ex. splitting 2 loaves of bread equally among 5 men) made these sums natural and obvious to Egyptians. We’ll discuss this in more detail in the next article of the series.&lt;/p&gt;

&lt;h3 id=&quot;division&quot;&gt;Division&lt;/h3&gt;

&lt;p&gt;Alright, I’m running out of steam here, so let’s wrap this up. Division was a mess. I am, once again, going to pull an example straight out of Gay Robins’ &lt;em&gt;The Rhind Mathematical Papyrus&lt;/em&gt;. To divide 47 by 33, the Egyptians would, in their own words, “treat 33 so as to obtain 47.” For example, they might simply observe that&lt;/p&gt;

\[47 = 1*33 + \frac{1}{3}*33 + \frac{1}{11}*33 \implies\]

\[47 = (1+\frac{1}{3}+\frac{1}{11})33 \implies\]

\[\frac{47}{33} = 1+\frac{1}{3}+\frac{1}{11}\]

&lt;p&gt;In this case, we obviously got very lucky with our divisors of 33, so the solution was “easy.” If we instead divide 33 by 47, things get nasty. The Egyptians would again break 47 into a convenient sum and just go to town:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/robins_division.png&quot; alt=&quot;Dividing 33 by 47 like an Egyptian&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Dividing 33 by 47 like an Egyptian&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/rhindmathematica0000robi_h8l4&quot;&gt;7&lt;/a&gt;&lt;/sup&gt;&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Note that the 3 with a double bar above it represents $\frac{2}{3}$. Although $\frac{2}{3}$ isn’t a unit fraction, it apparently didn’t bother the Egyptians, and they frequently included it in their sums.&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;So now you’ve got the basic idea of how Egyptian arithmetic was performed. With the “how” out of the way, you are free to consider the “why?”. Why did the Egyptians prefer sums of nonrepeating unit fractions? Why did they use powers of 2 when multiplying? I dunno.&lt;/p&gt;

&lt;p&gt;Egyptian mathematics is one of the first well-documented mathematical cultures in human history. We take for granted our sleek mathematical concepts and notations, and we often consider our ways to be obvious or “natural.” Effective, unambiguous fraction notation didn’t pop up until at least 500AD, thousands of years after the beginning of written math.&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/rhindmathematica0000robi_h8l4&quot;&gt;7&lt;/a&gt;&lt;/sup&gt; These things are apparently not intuitive until after the fact. Perhaps we should treat the fundamentals of modern mathematics with a little more respect, or perhaps with a little more skepticism…&lt;/p&gt;</content><author><name>Beau Horenberger</name></author><summary type="html"></summary></entry><entry><title type="html">Egyptians and the Rhind Mathematical Papyrus: Historical Context (1)</title><link href="http://localhost:4000/2022/05/26/egyptianmath1.html" rel="alternate" type="text/html" title="Egyptians and the Rhind Mathematical Papyrus: Historical Context (1)" /><published>2022-05-26T00:00:00-04:00</published><updated>2022-05-26T00:00:00-04:00</updated><id>http://localhost:4000/2022/05/26/egyptianmath1</id><content type="html" xml:base="http://localhost:4000/2022/05/26/egyptianmath1.html">&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#preface&quot; id=&quot;markdown-toc-preface&quot;&gt;Preface&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#intro&quot; id=&quot;markdown-toc-intro&quot;&gt;Intro&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#egypt-a-timeline-up-to-the-rmp&quot; id=&quot;markdown-toc-egypt-a-timeline-up-to-the-rmp&quot;&gt;Egypt: A Timeline Up To The RMP&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#the-rhind-mathematical-papyrus&quot; id=&quot;markdown-toc-the-rhind-mathematical-papyrus&quot;&gt;The Rhind Mathematical Papyrus&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#book-i-arithmetic&quot; id=&quot;markdown-toc-book-i-arithmetic&quot;&gt;Book I: Arithmetic&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#book-ii-geometry&quot; id=&quot;markdown-toc-book-ii-geometry&quot;&gt;Book II: Geometry&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#book-iii-miscellaneous&quot; id=&quot;markdown-toc-book-iii-miscellaneous&quot;&gt;Book III: Miscellaneous&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#conclusion&quot; id=&quot;markdown-toc-conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;preface&quot;&gt;Preface&lt;/h2&gt;

&lt;p&gt;Recently I had the idea that I might appreciate mathematics more if I understood how it originated. “I’m so clever,” I thought, “I’ll just Google ‘Ancient Egyptian Mathematics’ and then everything will make sense.” Surprise! Nobody has a complete understanding of Egyptian mathematics. There are many mysteries about how Egyptians performed mathematical operations and how Egyptians understood mathematics.&lt;/p&gt;

&lt;p&gt;To make matters worse, I’m beginning to suspect that there’s not a simple solution. I’m not going to have a breakthrough and think “Oh, &lt;em&gt;that’s&lt;/em&gt; what mathematics meant to Egyptians!” The deeper I dig, the more mysteries present themselves…&lt;/p&gt;

&lt;p&gt;As such, this series of blog posts is an attempt to document my experience of digging ever deeper in search of answers which don’t exist.&lt;/p&gt;

&lt;p&gt;I’ll warn you now; this first post is going reference Wikipedia. Deal with it.&lt;/p&gt;

&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;p&gt;We start with a very brief history of Egypt from its origin up to the point at which the Rhind Mathematical Papyrus was written. Next we describe the RMP and discuss simple observations about the problems it contained.&lt;/p&gt;

&lt;h2 id=&quot;egypt-a-timeline-up-to-the-rmp&quot;&gt;Egypt: A Timeline Up To The RMP&lt;/h2&gt;

&lt;p&gt;Set the scene in Egypt, circa 3500 BC, along the Nile. It was well over 5000 years ago. Large cultures along the Nile have been practicing agriculture and animal husbandry, making pottery, and generally having a good time. There were stone, copper, and obsidians tools, there was jewelry and painted ceramics, and there was an ongoing consolidation of power around the Nile valley.&lt;/p&gt;

&lt;p&gt;In passing, note that the earliest known Hieroglyphic writing appeared suddenly in 3250BC, already a complete writing system. Its origins are unknown.&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/ALLEN2014MiddleEgyptianAnIntroductionToTheLanguageAndCultureOfHieroglyphs/mode/2up&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://www.thoughtco.com/thmb/HR4ROK-3AhAmrtKS0BC3YIk8sfo=/4898x3391/filters:no_upscale():max_bytes(150000):strip_icc()/Map_of_Egypt-f1a95b7e0515423aaa66bad08b627d50.jpg&quot; alt=&quot;A map of ancient Egypt&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;A map of ancient Egypt&lt;sup&gt;&lt;a href=&quot;https://www.thoughtco.com/predynastic-egypt-beginners-guide-172128&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;We will boldly proclaim the beginning of Egyptian civilization to be placed around 3000BC, in what is called the Early Dynastic Period. At this point, power in Egyptian society began to consolidate under Dynastic kings. There were more elaborately constructed tombs and government institutions.&lt;/p&gt;

&lt;p&gt;Around 2686BC, things really started to take off during the Old Kingdom period of Egypt. “Major advances in architecture, art, and technology were made during the Old Kingdom, fueled by the increased agricultural productivity and resulting population, made possible by a well-developed central administration.”&lt;sup&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Ancient_Egypt&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; Shit like the Giza pyramids and Great Sphinx happened next. There were large, coordinated government operations involving collecting taxes (mathematics is important for taxes).&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/en/timeline/pr44hfmar3p9o4kq975b3mhp2tqmrns.png&quot; alt=&quot;A timeline, as promised&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;A timeline, as promised&lt;sup&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Ancient_Egypt&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Next there was government collapse, food shortages, re-emergence of organized societies, more kings, innovation in the arts, kingdoms weakening, introduction of the composite bow (by the invading Hyksos), war campaigns, and eventually (surprisingly) prosperity by the time you reach 1500BC.&lt;sup&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Ancient_Egypt&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; It was a busy era.&lt;/p&gt;

&lt;h2 id=&quot;the-rhind-mathematical-papyrus&quot;&gt;The Rhind Mathematical Papyrus&lt;/h2&gt;

&lt;p&gt;This happens to be around the time that the Rhind Mathematical Papyrus (RMP) was written. The RMP is basically a huge scroll detailing many mathematical problems and solutions. Its design suggests that it was intended to be used by a teacher to assign problems to students.&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/ALLEN2014MiddleEgyptianAnIntroductionToTheLanguageAndCultureOfHieroglyphs/mode/2up&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; It was written near 1550BC.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://curiosmos.com/wp-content/uploads/2020/09/Rhind-mathematical-papyrus.jpg&quot; alt=&quot;A sample of the Rhind Mathematical Papyrus&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;A sample of the Rhind Mathematical Papyrus&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The original RMP is lost. The available copy that exists today claims to be written by a scribe named Ahmes approximately 200 years after the original RMP was written. The scroll itself is about 13 inches tall and would have been 13 ft long altogether.&lt;/p&gt;

&lt;p&gt;The RMP is one of the major bodies of evidence about ancient Egyptian math and how it related to Egyptian society. It contains “a series of general mathematical problems, which are nevertheless concrete and representative of the practical day-to-day situations that were expected of the graduating apprentice.”&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/SpalingerTheRhindMathematicalPapyrusAsAHistoricalDocumentSAK171990/page/n9/mode/2up&quot;&gt;9&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;Scholars generally agree that the scroll is divided into three parts, which we refer to as “Book 1: Arithmetic,” “Book 2: Geometry,” and “Book 3: Miscellaneous.”&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/ALLEN2014MiddleEgyptianAnIntroductionToTheLanguageAndCultureOfHieroglyphs/mode/2up&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; These, in turn, are divided into ordered problems, which we typically refer to by number. For example, problem 39 is in Book 1 and concerns distributing 100 bread loaves among 10 men unequally according to some algebraic rules.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/rmp_roadmap.png&quot; alt=&quot;A roadmap of the Rhind Mathematical Papyrus&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;A roadmap of the Rhind Mathematical Papyrus&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/Peet_1923/page/n1/mode/2up&quot;&gt;8&lt;/a&gt;&lt;/sup&gt;&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;We will finish this article by hinting at the flavor of the three books.&lt;/p&gt;

&lt;h3 id=&quot;book-i-arithmetic&quot;&gt;Book I: Arithmetic&lt;/h3&gt;

&lt;p&gt;This is basically the “bread-sharing” part of the book. Many of the problems describe dividing up bread to share among men in different ways. However, there are also mathematical problems which offer no concrete context. One of which solves a linear equation. Many of the others regard the use of “&lt;a href=&quot;https://en.wikipedia.org/wiki/Egyptian_fraction&quot;&gt;Egyptian fractions&lt;/a&gt;,” which involved determining and proving identities such as&lt;/p&gt;

\[\frac{4}{10}=\frac{1}{3} + \frac{1}{15}\]

&lt;p&gt;Egyptian fractions will be discussed further in future articles. Their nature is still not totally understood, and frankly, I think it is very interesting.&lt;/p&gt;

&lt;h3 id=&quot;book-ii-geometry&quot;&gt;Book II: Geometry&lt;/h3&gt;

&lt;p&gt;The problems in Book II were about measurement of length, area, and volume. They also measured slope (degree of flatness) and “lack of quality indicating a dilution factor in such commodities as bread and beer.”&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/rhindmathematica0000robi_h8l4&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;All of these measurements have convenient practical motivations. Area, for example, was used in taxation.&lt;sup&gt;&lt;a href=&quot;https://daily.jstor.org/tax-day-ancient-egypt/&quot;&gt;5&lt;/a&gt;&lt;/sup&gt; A government agent, the “holder of the cord,” would measure the area of property where grain was grown, and the property owner would be taxed a percentage of their total crop.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/rope_measurement.png&quot; alt=&quot;Measuring area with a rope&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Taxation goes way back&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/rhindmathematica0000robi_h8l4&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Volume was commonly used for measuring grain or flower as well as liquids such as beer. For example, RMP section 42 computes the volume of a circular granary in terms of barrels.&lt;sup&gt;&lt;a href=&quot;https://books.google.com/books?id=8c10QYoGa4UC&quot;&gt;6&lt;/a&gt;&lt;/sup&gt; This kind of math would be useful for knowing how much grain your kingdom possesses and preventing famines and governmental collapse.&lt;/p&gt;

&lt;h3 id=&quot;book-iii-miscellaneous&quot;&gt;Book III: Miscellaneous&lt;/h3&gt;

&lt;p&gt;Book III is full of miscellaneous problems. No grand narrative that I can weave off the top of my head. There’s more Egyptian fraction problems, some vaguely humorous problems, and a lot of other stuff. Here’s an example problem:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;A bag of three precious metals, gold, silver and lead, has been purchased for 84 sha’ty, which is a monetary unit. All three substances weigh the same, and a deben is a unit of weight. 1 deben of gold costs 12 sha’ty, 1 deben of silver costs 6 sha’ty, and 1 deben of lead costs 3 sha’ty. Find the common weight W of any of the three metals in the bag.&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/rhindmathematica0000robi_h8l4&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;Egypt had a lot going on. Their civilization is so ancient that it is difficult to retrieve and interpret their artifacts. However, what we have discovered has given us many insights into what the life of an Egyptian may have been like. The Rhind Mathematical Papyrus is one of these windows into the past. What can we learn from it? Follow me on Twitter to find out.&lt;/p&gt;</content><author><name>Beau Horenberger</name></author><summary type="html"></summary></entry><entry><title type="html">Where Am I? Estimating Location In Runescape With The Mini-Map</title><link href="http://localhost:4000/2022/03/04/runescapelocationfinding.html" rel="alternate" type="text/html" title="Where Am I? Estimating Location In Runescape With The Mini-Map" /><published>2022-03-04T00:00:00-05:00</published><updated>2022-03-04T00:00:00-05:00</updated><id>http://localhost:4000/2022/03/04/runescapelocationfinding</id><content type="html" xml:base="http://localhost:4000/2022/03/04/runescapelocationfinding.html">&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#solving-runescape-so-i-can-finally-quit-&quot; id=&quot;markdown-toc-solving-runescape-so-i-can-finally-quit-&quot;&gt;Solving Runescape So I Can Finally Quit &lt;a name=&quot;Solving-Runescape-So-I-Can-Finally-Quit&quot;&gt;&lt;/a&gt;&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#if-the-mini-map-is-oriented-north-&quot; id=&quot;markdown-toc-if-the-mini-map-is-oriented-north-&quot;&gt;If The Mini-Map Is Oriented North &lt;a name=&quot;If-The-Mini-Map-Is-Oriented-North&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#if-the-mini-map-is-not-oriented-north-&quot; id=&quot;markdown-toc-if-the-mini-map-is-not-oriented-north-&quot;&gt;If The Mini-Map Is Not Oriented North &lt;a name=&quot;If-The-Mini-Map-Is-Not-Oriented-North&quot;&gt;&lt;/a&gt;&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#extracting-angle-information-from-the-compass-by-transforming-between-features-&quot; id=&quot;markdown-toc-extracting-angle-information-from-the-compass-by-transforming-between-features-&quot;&gt;Extracting Angle Information From The Compass By Transforming Between Features &lt;a name=&quot;Extracting-Angle-Information-From-The-Compass-By-Transforming-Between-Features&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#rotating-the-mini-map-&quot; id=&quot;markdown-toc-rotating-the-mini-map-&quot;&gt;Rotating The Mini-Map &lt;a name=&quot;Rotating-The-Mini-Map&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#conclusion-&quot; id=&quot;markdown-toc-conclusion-&quot;&gt;Conclusion &lt;a name=&quot;Conclusion&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#appendix-&quot; id=&quot;markdown-toc-appendix-&quot;&gt;Appendix &lt;a name=&quot;Appendix&quot;&gt;&lt;/a&gt;&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#blogutilitiesipynb&quot; id=&quot;markdown-toc-blogutilitiesipynb&quot;&gt;blog/utilities.ipynb&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# see appendix for more info
&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blog&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;utilities&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ipynb&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;solving-runescape-so-i-can-finally-quit-&quot;&gt;Solving Runescape So I Can Finally Quit &lt;a name=&quot;Solving-Runescape-So-I-Can-Finally-Quit&quot;&gt;&lt;/a&gt;&lt;/h1&gt;

&lt;p&gt;Runescape is a boring video game for losers. In the game, your location is represented to you in both a world map and a mini-map. My goal was to estimate the player’s location on the world map using only the mini-map. Real-time location estimation is the first step in breaking the game so that it can play itself and we can all go home.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;world_map_lumbridge&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/images/rotation_estimation/world_map_lumbridge.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;north_oriented_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/images/rotation_estimation/north_oriented_map.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subplots&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dpi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;north_oriented_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'The player&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\'&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s minimap'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;world_map_lumbridge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'A small piece of the world map'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subplots_adjust&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wspace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/rotation_estimation/rotation_estimation_3_0.png&quot; alt=&quot;png&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;if-the-mini-map-is-oriented-north-&quot;&gt;If The Mini-Map Is Oriented North &lt;a name=&quot;If-The-Mini-Map-Is-Oriented-North&quot;&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;So we’re given an image of the mini-map, and we estimate the corresponding location on the world map. If the mini-map is north-facing, this is a fairly simple problem. We can simply take the map from the mini-map and template search to find it on the world map.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;cropped_mini_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/images/rotation_estimation/cropped_mini_map.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# template search
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TM_CCOEFF_NORMED&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;matchTemplate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cropped_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;world_map_lumbridge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;min_val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;min_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minMaxLoc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# plot the estimated match
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;template_match_plotted&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;world_map_lumbridge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rectangle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;template_match_plotted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cropped_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cropped_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;show_images&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cropped_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;template_match_plotted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The cropped mini-map'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The corresponding template match (Good)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/rotation_estimation/rotation_estimation_5_0.png&quot; alt=&quot;png&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;if-the-mini-map-is-not-oriented-north-&quot;&gt;If The Mini-Map Is Not Oriented North &lt;a name=&quot;If-The-Mini-Map-Is-Not-Oriented-North&quot;&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;In this case, we can’t apply a template search right away. The map is crooked, so we won’t get good detections&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;crooked_mini_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/images/rotation_estimation/crooked_mini_map.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# template search
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TM_CCOEFF_NORMED&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;matchTemplate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;crooked_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;world_map_lumbridge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;min_val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;min_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minMaxLoc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# plot the estimated match
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result_plotted&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;world_map_lumbridge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rectangle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result_plotted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;crooked_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;crooked_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;show_images&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;crooked_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result_plotted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The rotated mini-map'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The corresponding template match (Bad)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/rotation_estimation/rotation_estimation_7_0.png&quot; alt=&quot;png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;So, how could we convert a rotated mini-map back into a north-facing minimap?&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;north_east_oriented_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/images/rotation_estimation/north_east_oriented_map.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;show_images&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;north_east_oriented_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;north_oriented_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The map we are given'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The map we want to convert to'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/rotation_estimation/rotation_estimation_9_0.png&quot; alt=&quot;png&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;extracting-angle-information-from-the-compass-by-transforming-between-features-&quot;&gt;Extracting Angle Information From The Compass By Transforming Between Features &lt;a name=&quot;Extracting-Angle-Information-From-The-Compass-By-Transforming-Between-Features&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;If we can determine the angle of rotation, then we can rotate the mini-map image to match its north-facing counterpart. We can estimate the angle of rotation using the compass. The first step is to detect “features” on the rotated compass and correspond them to features on the north-facing compass. First we detect features using the SIFT algorithm.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;compass_north&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/images/rotation_estimation/compass_north.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;COLOR_BGR2GRAY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/images/rotation_estimation/compass_northeast.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;COLOR_BGR2GRAY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Initiate SIFT detector
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sift&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SIFT_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# find the keypoints and descriptors with SIFT
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kp1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;des1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sift&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;detectAndCompute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;kp2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;des2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sift&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;detectAndCompute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;compass_north_east_features&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;compass_north_features&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compass_north&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;compass_north_east_features&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;drawKeypoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kp1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compass_north_east_features&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DRAW_MATCHES_FLAGS_DEFAULT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;compass_north_features&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;drawKeypoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kp2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compass_north_features&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DRAW_MATCHES_FLAGS_DEFAULT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;show_images&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north_features&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compass_north_east_features&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Features for north compass'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Features for north-east compass'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/rotation_estimation/rotation_estimation_11_0.png&quot; alt=&quot;png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Next we pair the features between the compasses using Flann matcher, which takes advantage of the gradient information represented in SIFT features. We won’t go into details on how this works. We use Flann to get acceptable matches according to some threshold&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;FLANN_INDEX_KDTREE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;index_params&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;algorithm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FLANN_INDEX_KDTREE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trees&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;search_params&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;checks&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;flann&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FlannBasedMatcher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index_params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;search_params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;matches&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;flann&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;knnMatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;des1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;des2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;lowe_ratio_threshold&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.7&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;good_matches&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;matches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;distance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lowe_ratio_threshold&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;distance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;good_matches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

        
&lt;span class=&quot;n&quot;&gt;img_matches&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;empty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compass_north&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dtype&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uint8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;drawMatches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kp1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compass_north&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kp2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
               &lt;span class=&quot;n&quot;&gt;good_matches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;img_matches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DrawMatchesFlags_NOT_DRAW_SINGLE_POINTS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img_matches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;matplotlib.image.AxesImage at 0x7fc6f4a09d30&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/rotation_estimation/rotation_estimation_13_1.png&quot; alt=&quot;png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Now we want to calculate an explicit translation between the paired features of the two compasses. We can do this if we make an assumption that the compasses are related by an affine function, i.e. a mix of scaling, rotation, and translation. In reality, we should find out that the transformation is almost entirely rotation with very little scaling.&lt;/p&gt;

&lt;p&gt;A 2D affine transformation involving a scaling by $s_x, s_y$, shearing by $c_x, c_y$, rotation by $\theta$, and a translation by $x_t, y_t$, can be represented in 3D as a linear transformation with the help of homogenous coordinates,&lt;/p&gt;

\[M = 
  \left[ {\begin{array}{cc}
    s_x\cos{\theta} &amp;amp; -c_x\sin{\theta}  &amp;amp; x\\
    c_y\sin{\theta} &amp;amp; s_y\cos{\theta}  &amp;amp; y\\
    0 &amp;amp; 0 &amp;amp; 1\\
  \end{array} } \right]\]

&lt;p&gt;So that we can map a feature at $(x,y)$ on the original image to the corresponding feature at $(x’, y’)$ on the final image&lt;/p&gt;

\[M 
    \left[ {\begin{array}{cc}
    x\\
    y\\
    1\\
  \end{array} } \right]
    =
    \left[ {\begin{array}{cc}
    x'\\
    y'\\
    1'\\
  \end{array} } \right]\]

&lt;p&gt;We will approximate the best of these matrices for mapping between the features of the two compasses using OpenCV’s EstimateAffine2D. Then we can simply calculate $\theta$ from the matrix we obtain.&lt;/p&gt;

&lt;p&gt;EstimateAffine2D uses Random Sample Consensus, or RANSAC, to estimate the affine transformation from our limited set of sample points.&lt;/p&gt;

&lt;p&gt;##&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;src_pts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;float32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kp1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;queryIdx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pt&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;good_matches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reshape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;dst_pts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;float32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kp2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trainIdx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pt&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;good_matches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reshape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;M&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mask&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;estimateAffine2D&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;src_pts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dst_pts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RANSAC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;M&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;array([[  0.57565154,   0.85025771, -14.11907287],
       [ -0.8060638 ,   0.58425459,  44.51285597]])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Wow, very cool. Let’s assume that $c_x, s_x \approxeq 1$. Then we can calculate our angle of rotation as $\arctan{(\sin{\theta},\cos{\theta})}=\arctan{(-M_{01}, M_{00})}$&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arctan2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;M&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;M&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-0.9756521224680054
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is about $.3\pi$ radians. Let’s get convert that to English.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;angle_degrees&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;180.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;angle_degrees&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-55.90074889039763
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Very nice. Looks like we’ve got our angle, boys. I’m a little worried about the simplifying assumptions we made (i.e. that $c_x, s_x \approxeq 1$), but I’ve found that in practice this does a pretty darn good job of consistently approximating the angle. It also doesn’t matter, since our mini-map correction will use the whole translation matrix.&lt;/p&gt;

&lt;h3 id=&quot;rotating-the-mini-map-&quot;&gt;Rotating The Mini-Map &lt;a name=&quot;Rotating-The-Mini-Map&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Okay, let’s bring it home now. We need to use the calculated transformation to rotate our mini-map so that it is once again north-facing. Let’s try it with our compass first.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;rows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cols&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;corrected_compass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;warpAffine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;M&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cols&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;show_images&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;corrected_compass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The compass we were given'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The corrected compass we computed'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'gray'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/rotation_estimation/rotation_estimation_21_0.png&quot; alt=&quot;png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Great, now let’s try the mini-map&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;crooked_mini_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/images/rotation_estimation/crooked_mini_map.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;corrected_mini_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;warpAffine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;crooked_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;M&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cols&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;show_images&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;crooked_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;corrected_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The mini-map we were given'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The corrected mini-map we computed'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/rotation_estimation/rotation_estimation_23_0.png&quot; alt=&quot;png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I resized to make sure the mini-map is actually the same size as the compass we used to calculate the transformation. This makes the procedure more reliable in the face of weird translation shenanigans.&lt;/p&gt;

&lt;p&gt;Finally, we can resize to the proper scale for a template search, trim off the gross bits on the corners, and figure out where in the world we are&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;rows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cols&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;corrected_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;trim&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sqrt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rows&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rows&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cols&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cols&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;final_mini_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;corrected_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;final_mini_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale_img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;final_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# template search
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TM_CCOEFF_NORMED&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;matchTemplate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;final_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;world_map_lumbridge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;min_val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;min_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minMaxLoc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# plot the estimated match
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;template_match_plotted&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;world_map_lumbridge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rectangle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;template_match_plotted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;final_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;final_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;show_images&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;final_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;template_match_plotted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The corrected mini-map'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The corresponding template match (Good)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/rotation_estimation/rotation_estimation_25_0.png&quot; alt=&quot;png&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;conclusion-&quot;&gt;Conclusion &lt;a name=&quot;Conclusion&quot;&gt;&lt;/a&gt;&lt;/h1&gt;

&lt;p&gt;Runescape is a horrible game. All you do is grind repetitive tasks to gain experience and gold pieces. Anyone could play it. Why can’t a computer? I’m trying to design a representation of the game that makes it playable by a computer in a human-like way. To do this, I’m breaking the game into conceptual components that I can model mathematically. For example, here we have established that the player is a point on a two-dimensional surface, and that the coordinates of both the player and world locations can be established using computer vision along with a copy of the world map.&lt;/p&gt;

&lt;p&gt;The next thing I will be exploring is using object detection to detect interactable components of the screen, such as “seeing” that there is a goblin which I can attack. I’ll also be working on the Ratcatchers quest in OSRS because my stupid computer can’t do it for me.&lt;/p&gt;

&lt;h1 id=&quot;appendix-&quot;&gt;Appendix &lt;a name=&quot;Appendix&quot;&gt;&lt;/a&gt;&lt;/h1&gt;

&lt;h2 id=&quot;blogutilitiesipynb&quot;&gt;blog/utilities.ipynb&lt;/h2&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;cv2&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;matplotlib&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pyplot&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;scale_img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale_percent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale_percent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale_percent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dim&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interpolation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;INTER_AREA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;load_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;COLOR_BGR2RGB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cvtColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale_img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;show_images&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;img2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wspace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dpi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subplots&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dpi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dpi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subplots_adjust&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wspace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wspace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;make_grayscale_and_resize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;new_img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cvtColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;COLOR_RGB2GRAYSCALE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;new_img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale_img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new_img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_img&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>Beau Horenberger</name></author><summary type="html"></summary></entry><entry><title type="html">Elliptic Functions Revisited: What Were They Thinking</title><link href="http://localhost:4000/2020/11/18/ellipticcurvessequel.html" rel="alternate" type="text/html" title="Elliptic Functions Revisited: What Were They Thinking" /><published>2020-11-18T00:00:00-05:00</published><updated>2020-11-18T00:00:00-05:00</updated><id>http://localhost:4000/2020/11/18/ellipticcurvessequel</id><content type="html" xml:base="http://localhost:4000/2020/11/18/ellipticcurvessequel.html">&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#introduction-&quot; id=&quot;markdown-toc-introduction-&quot;&gt;Introduction &lt;a name=&quot;0.0&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#elliptic-integrals-if-you-cant-integrate-em-relate-em--&quot; id=&quot;markdown-toc-elliptic-integrals-if-you-cant-integrate-em-relate-em--&quot;&gt;Elliptic Integrals: If You Can’t Integrate ‘Em, Relate ‘Em  &lt;a name=&quot;1.0&quot;&gt;&lt;/a&gt;&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#old-content-bad-takes-an-aside-on-eulers-addition-formulae--&quot; id=&quot;markdown-toc-old-content-bad-takes-an-aside-on-eulers-addition-formulae--&quot;&gt;(OLD CONTENT; BAD TAKES) An Aside On Euler’s Addition Formulae  &lt;a name=&quot;1.0a&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#an-update-much-later-in-time-&quot; id=&quot;markdown-toc-an-update-much-later-in-time-&quot;&gt;An Update Much Later In Time &lt;a name=&quot;2.0&quot;&gt;&lt;/a&gt;&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#inspiration-from-arcsin-&quot; id=&quot;markdown-toc-inspiration-from-arcsin-&quot;&gt;Inspiration From Arcsin &lt;a name=&quot;2.0a&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#it-totally-breaks-with-lemniscates-&quot; id=&quot;markdown-toc-it-totally-breaks-with-lemniscates-&quot;&gt;It Totally Breaks With Lemniscates &lt;a name=&quot;2.0b&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#general-addition-theorems-&quot; id=&quot;markdown-toc-general-addition-theorems-&quot;&gt;General Addition Theorems &lt;a name=&quot;2.0c&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#back-at-it-again-with-the-manifolds-&quot; id=&quot;markdown-toc-back-at-it-again-with-the-manifolds-&quot;&gt;Back At It Again With The Manifolds &lt;a name=&quot;3.0&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;introduction-&quot;&gt;Introduction &lt;a name=&quot;0.0&quot;&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;In my last post on modular forms, most of our time was spent talking about the investigation of elliptic functions during the early 1800s. In this post, we’ll take another approach to the investigation of elliptic functions. This new perspective focuses on building towards the investigation of angle division. We’ll see how it goes! First, I present a summary of the historical scene before we dig it.&lt;/p&gt;

&lt;p&gt;In the wake of Newton’s calculus and mechanics, many physical investigations led to differential equations and integrals. Only a small subset of these had been discovered to have &lt;a href=&quot;https://en.wikipedia.org/wiki/Algebraic_function&quot;&gt;algebraic solutions&lt;/a&gt;. Others, such as the integral&lt;/p&gt;
&lt;div&gt;
$$\int_0^x \frac{1}{t}dt$$
&lt;/div&gt;
&lt;p&gt;could not be solved. This integral was deemed its own function, and it was named the natural logarithm, $\ln x$. One of the first major breakthroughs came after the discovery of partial fraction expansion by Bernoulli. Bernoulli realized that all integrals of &lt;a href=&quot;https://en.wikipedia.org/wiki/Rational_function&quot;&gt;rational functions&lt;/a&gt; had algebraic solutions, so long as you were allowed to use $\ln$. Solving integrals became more difficult (and more interesting) when the integrand contained square roots. For example, the integral&lt;/p&gt;
&lt;div&gt;
$$\int_0^x \frac{1}{\sqrt{1-t^2}}dt$$
&lt;/div&gt;
&lt;p&gt;could not be solved algebraically, even in terms of $\ln$. It arises naturally as the arc length of the circle. It was instead given its own name, $\arcsin x$. Once it was given this name, other integrals involving the square root of degree 2 polynomials could be solved algebraically in terms of $\arcsin$. It may interest you to know that mathematicians would soon discover that $\arcsin$ can, in fact, be expressed in terms of $\ln$, but only when complex numbers are introduced.&lt;/p&gt;

&lt;p&gt;It’s important to keep in mind the practical implications of these investigations. Because $\arcsin$ and $\ln$ could be calculated accurately using infinite series, tables of values could be calculated and distributed. Then, with the aid of these tables, and by using indefinite integration, a massive range of integrals could be calculated through simple algebra.&lt;/p&gt;

&lt;p&gt;Thus far, we have explored the simplest cases of integration handled by mathematicians in the early 1800s. In this post, we will explore the next step in mathematical history. Mathematicians quickly ran into difficulties with integrals involving square roots of polynomials larger than degree two. These were natural objects of interest, being marginally more complex than the integrals previously studied, while still appearing in natural physical problems, such as the arc length of the &lt;a href=&quot;https://en.wikipedia.org/wiki/Lemniscate_of_Bernoulli&quot;&gt;lemniscate of Bernoulli&lt;/a&gt;:&lt;/p&gt;
&lt;div&gt;
$$\int_0^x \frac{1}{\sqrt{1-t^4}}dt$$
&lt;/div&gt;
&lt;p&gt;Thus begins the study of elliptic integrals.&lt;/p&gt;

&lt;h2 id=&quot;elliptic-integrals-if-you-cant-integrate-em-relate-em--&quot;&gt;Elliptic Integrals: If You Can’t Integrate ‘Em, Relate ‘Em  &lt;a name=&quot;1.0&quot;&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;The most general definition of &lt;a href=&quot;https://en.wikipedia.org/wiki/Elliptic_integral&quot;&gt;elliptic integral&lt;/a&gt; is a function of the form&lt;/p&gt;
&lt;div&gt;
$$f(x)=\int_c^x R(t,\sqrt{P(t)})dt$$
&lt;/div&gt;
&lt;p&gt;where “$R$ is a rational function, $P$ is a polynomial of degree 3 or 4 with no repeated roots, and $c$ is constant.” We have seen that these were some of the most notorious unsolved integrals at the time. They appeared in many physical problems, and they differed only very slightly from solved integrals, such as when $P$ is instead degree 2. I will spoil the fun and warn you now: we never integrate elliptic integrals. Instead, we will follow mathematicians as they discover the nuances of the subject. Along the way, they discover many convenient properties of elliptic integrals which make them much less daunting computationally.&lt;/p&gt;

&lt;p&gt;The lemniscate was at the heart of one discovery made by Fagnano. Because the lemniscate is a geometric figure, and because its arc length was the elliptic integral being investigated, Fagnano naturally compared it to the circle and its arc length. One interesting property of the circle is that one can algebraically “double the arc length.” What this means is that given an point, $x$, and its corresponding arc length, it was known that integrating to $2x\sqrt{1-x^2}$ gave double the arc length. In other words,&lt;/p&gt;
&lt;div&gt;
$$2\int^x_0 \frac{dt}{\sqrt{1-t^2}} = \int^{2x\sqrt{1-x^2}}_0\frac{dt}{\sqrt{1-t^2}}$$
&lt;/div&gt;
&lt;p&gt;This is not just aesthetically pleasing. Remember that this integral does not have an algebraic solution, so calculating its value can be a chore (especially before calculators were invented). Because of this, relationships such as “doubling the arc length” could help avoid recalculating integrals. Instead, you could relate it to an integral which has already been calculated.&lt;/p&gt;

&lt;p&gt;Fagnano attempted to discover similar relationships for the arc length of the lemniscate. Impressively, he succeeded in doubling the arc length on the lemniscate. The formula was&lt;/p&gt;
&lt;div&gt;
$$2\int^x_0 \frac{dt}{\sqrt{1-t^4}}=\int^{2x\sqrt{1-x^4}/(1+x^4)}_0 \frac{dt}{\sqrt{1-t^4}}$$
&lt;/div&gt;

&lt;p&gt;Euler generalized this concept greatly. First, he introduced “arc length addition” on the lemniscate:&lt;/p&gt;
&lt;div&gt;
$$\int^x_0 \frac{dt}{\sqrt{1-t^4}} + \int^y_0 \frac{dt}{\sqrt{1-t^4}}= \int^{(x\sqrt{1-y^4} + y\sqrt{1-x^4})/(1+x^2y^2)}_0 \frac{dt}{\sqrt{1-t^4}}$$
&lt;/div&gt;
&lt;p&gt;Then, he found that there were similar &lt;em&gt;addition formulae&lt;/em&gt; for a huge class of elliptic integrals, even when they weren’t obviously related to arc length. Later, it would be discovered that all elliptic integrals have similar addition properties. It was one of the most tangible aspects of the otherwise-elusive elliptic integrals.&lt;/p&gt;

&lt;h3 id=&quot;old-content-bad-takes-an-aside-on-eulers-addition-formulae--&quot;&gt;(OLD CONTENT; BAD TAKES) An Aside On Euler’s Addition Formulae  &lt;a name=&quot;1.0a&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;I was slightly uncertain about some language used when describing Euler’s angle addition, so I wanted to clarify it here. Let’s go back to the case of the lemniscate’s arc length.&lt;/p&gt;
&lt;div&gt;
$$\int_0^x \frac{dt}{\sqrt{1-t^4}} + \int_0^y \frac{dt}{\sqrt{1-t^4}} = \int^{g(x,y)}_0\frac{dt}{\sqrt{1-t^4}}$$
&lt;/div&gt;
&lt;p&gt;Euler had a very traditional way of approaching this problem, and it feels somewhat “backwards” from our current angle. He formulated arc length addition as a differential equation&lt;/p&gt;
&lt;div&gt;
$$\frac{1}{\sqrt{1-x^4}}dx=-\frac{1}{\sqrt{1-y^4}}dy$$
&lt;/div&gt;
&lt;p&gt;What did Euler mean here? Well, let’s define a function $f(x,y)$ as&lt;/p&gt;
&lt;div&gt;
$$f(x,y) = \int_0^x \frac{dt}{\sqrt{1-t^4}} + \int_0^y \frac{dt}{\sqrt{1-t^4}}$$
&lt;/div&gt;
&lt;p&gt;Then we can calculate the differential of this function,&lt;/p&gt;
&lt;div&gt;
$$df = \frac{\partial f}{\partial x}dx + \frac{\partial f}{\partial y}dy = \frac{1}{\sqrt{1-x^4}}dx + \frac{1}{\sqrt{1-y^4}}dy$$
&lt;/div&gt;
&lt;p&gt;So Euler’s differential equation is really an equation of the exact differential form $df$,&lt;/p&gt;
&lt;div&gt;
$$df = 0$$
&lt;/div&gt;
&lt;p&gt;Okay, so what does this mean? Well, $df=0$ means that we’re looking for a region where $f(x,y)$ is constant. In other words, we’re looking for solutions to $f(x,y)=C$ or&lt;/p&gt;
&lt;div&gt;
$$ \int_0^x \frac{dt}{\sqrt{1-t^4}} + \int_0^y \frac{dt}{\sqrt{1-t^4}}=C$$
&lt;/div&gt;
&lt;p&gt;Euler more specifically chose&lt;/p&gt;
&lt;div&gt;
$$C = \int_0^{c} \frac{dt}{\sqrt{1-t^4}}$$
&lt;/div&gt;
&lt;p&gt;for some arbitrary $c$. So how do we find the values of $(x,y)$ such that $f(x,y)=c$? I have no idea. One source says “Euler guessed correctly and then verified that the solution of the differential equation is&lt;/p&gt;
&lt;div&gt;
$$x^2+y^2+c^2x^2y^2=c^2 + 2xy(1+c^4)^{1/2}&quot;$$
&lt;/div&gt;
&lt;p&gt;It’s a very interesting question as to how one would attack this differential equation, but it’s perhaps more interesting that Euler formulated this problem without ever having heard of a differential form.&lt;/p&gt;

&lt;p&gt;In closing, I’d just like to reflect that this feels very counter-intuitive from our original standpoint. Our original problem was stated like this: we pick an arbitrary $(x,y)$ and calculate the integrals&lt;/p&gt;
&lt;div&gt;
$$\int_0^x \frac{dt}{\sqrt{1-t^4}} + \int_0^y \frac{dt}{\sqrt{1-t^4}}$$
&lt;/div&gt;
&lt;p&gt;Then we wanted to find a value $c$ such that&lt;/p&gt;
&lt;div&gt;
$$\int_0^x \frac{dt}{\sqrt{1-t^4}} + \int_0^y \frac{dt}{\sqrt{1-t^4}} = \int_0^c \frac{dt}{\sqrt{1-t^4}}$$
&lt;/div&gt;
&lt;p&gt;In a sense, Euler’s investigation began from the other side. He’s interested in level sets, meaning you first pick a $C$ such that $f(x,y)=C$ as above. He just picked his $C$ in a very clever way so that the problem was really about addition formulae.&lt;/p&gt;

&lt;h2 id=&quot;an-update-much-later-in-time-&quot;&gt;An Update Much Later In Time &lt;a name=&quot;2.0&quot;&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;It has been a while since I wrote this. I have since taken and completed a course on differential topology. My professor was kind enough to point me towards resources on this topic which give a much more lucid account of what is going on. I want to summarize that here.&lt;/p&gt;

&lt;p&gt;The source is Siegel’s &lt;em&gt;Topics in Complex Function Theory Volume 1&lt;/em&gt;.&lt;/p&gt;

&lt;h3 id=&quot;inspiration-from-arcsin-&quot;&gt;Inspiration From Arcsin &lt;a name=&quot;2.0a&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;So Fagnano was interested in solving or simplifying&lt;/p&gt;
&lt;div&gt;
$$\int_0^x \frac{1}{\sqrt{1-t^4}}dt$$
&lt;/div&gt;
&lt;p&gt;As you recall, this integral describes the arc length of the lemniscate. Fagnano new that there was a clever way to simplify the arc length of a circle by “rationalizing” the integral. We will review this method on the circle, because it is the key to Euler’s differential equation for the lemniscate. For the circle, we have&lt;/p&gt;
&lt;div&gt;
$$\int_0^x \frac{1}{\sqrt{1-t^2}}dt$$
&lt;/div&gt;
&lt;p&gt;If we make the substitution&lt;/p&gt;
&lt;div&gt;
$$t=\frac{2r}{1+r^2}$$
&lt;/div&gt;
&lt;p&gt;for $(0\leq r \leq 1)$ then we find that&lt;/p&gt;
&lt;div&gt;
$$\sqrt{1-t^2}=\frac{1-r^2}{1+r^2},\quad \frac{dt}{dr}=2\frac{1-r^2}{(1+r^2)^2},\quad \frac{dt}{\sqrt{1-t^2}}=\frac{2dr}{1+r}$$
&lt;/div&gt;
&lt;p&gt;Which means we can solve&lt;/p&gt;
&lt;div&gt;
$$\int_0^y \frac{2}{1+r}dr$$
&lt;/div&gt;
&lt;p&gt;to get information about the unsolvable arc length integral! So what we’ve done here is essentially a change of variables on our integral. In this case, the differential equation&lt;/p&gt;
&lt;div&gt;
$$\frac{dt}{\sqrt{1-t^2}}=\frac{2dr}{1+r}$$
&lt;/div&gt;
&lt;p&gt;reflects the fact that when you change variables, the integral after substitution will give you identical results to the original integral.&lt;/p&gt;

&lt;h3 id=&quot;it-totally-breaks-with-lemniscates-&quot;&gt;It Totally Breaks With Lemniscates &lt;a name=&quot;2.0b&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Things get weirder with the lemniscate. Fagnano attempted a similar substitution,&lt;/p&gt;
&lt;div&gt;
$$t^2=\frac{2r^2}{1+r^4}$$
&lt;/div&gt;
&lt;p&gt;but it turns out this does not rationalize the integral. However, Fagnano noticed the resulting differential equation had a strange appearance:&lt;/p&gt;
&lt;div&gt;
$$\frac{dt}{\sqrt{1-t^4}}=\sqrt{2}\frac{dr}{\sqrt{1+r^4}}$$
&lt;/div&gt;
&lt;p&gt;And he had the insight to apply a similar substitution once more,&lt;/p&gt;
&lt;div&gt;
$$r^2=\frac{2u^2}{1-u^4}$$
&lt;/div&gt;
&lt;p&gt;Which gives you, eventually,&lt;/p&gt;
&lt;div&gt;
$$\frac{dt}{\sqrt{1-t^4}}=2\frac{du}{\sqrt{1-u^4}}$$
&lt;/div&gt;
&lt;p&gt;Which you can integrate to derive the integral doubling relationship.&lt;/p&gt;

&lt;p&gt;So what are we getting at here? Fundamentally, doubling the arc length is achieved by clever use of the change of variables technique. It might be worth pointing out that, while integrals are front-and-center to this process, actually calculating integrals has been totally irrelevant. We’ve been using the battlefield of integrals to facilitate some clever substitutions, and the behavior of the integrals simply verfies whether our substitutions do what we want.&lt;/p&gt;

&lt;p&gt;What we’ve discovered form this investigation is that, if $t$ is a point on the ellipse, then $u(r(t))$ is the point which has half the arc length of $r$. That’s the key discovery we’ve made.&lt;/p&gt;

&lt;h3 id=&quot;general-addition-theorems-&quot;&gt;General Addition Theorems &lt;a name=&quot;2.0c&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Finally, I just wanted to wrap up by loosely discussing the general addition for the lemniscate. Essentially, one makes a substitution along the lines of&lt;/p&gt;
&lt;div&gt;
$$t=\frac{u\sqrt{1-v^4}+v\sqrt{1-u^4}}{1+u^2v^2}$$
&lt;/div&gt;
&lt;p&gt;I’ll simply say that this is again inspired by the circle, and see Siegel for more details. Note in particular that when $u=0$, then $v=t$. Then one can take the derivative with respect  to $u$ and find that&lt;/p&gt;
&lt;div&gt;
$$\frac{du}{\sqrt{1-u^4}}+\frac{dv}{\sqrt{1-v^4}}=0$$
&lt;/div&gt;
&lt;p&gt;which, knowing that $u=0\implies v=t$, implies&lt;/p&gt;
&lt;div&gt;
$$\int_0^u\frac{du}{\sqrt{1-u^4}}+\int_t^v\frac{dv}{\sqrt{1-v^4}}=0$$
&lt;/div&gt;
&lt;p&gt;Then&lt;/p&gt;
&lt;div&gt;
$$\int_0^u\frac{du}{\sqrt{1-u^4}}+\int_0^v\frac{dv}{\sqrt{1-v^4}}-\int_0^t\frac{dv}{\sqrt{1-v^4}}=0$$
&lt;/div&gt;
&lt;p&gt;Finally implies&lt;/p&gt;
&lt;div&gt;
$$\int_0^u\frac{du}{\sqrt{1-u^4}}+\int_0^v\frac{dv}{\sqrt{1-v^4}}=\int_0^t\frac{dv}{\sqrt{1-v^4}}$$
&lt;/div&gt;
&lt;p&gt;So, this isn’t the cleanest conclusion in the world, but I think what helped me here was seeing that the real magic is happening in the substitutions. The differential equation critically relies on the fact that $t=f(u,v)$ and that $u=0\implies v=t$.&lt;/p&gt;

&lt;h2 id=&quot;back-at-it-again-with-the-manifolds-&quot;&gt;Back At It Again With The Manifolds &lt;a name=&quot;3.0&quot;&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;Now that I’m done plagiarizing Siegel, I wanted to reflect a little bit before I peace outta here. In particular, I feel like this rundown lost sight of my original goal: obfuscating the problem with manifolds. What are we doing from the manifold perspective?&lt;/p&gt;

&lt;p&gt;Looking at this with fresh eyes, here is my take: we have a differential form defined by&lt;/p&gt;
&lt;div&gt;
$$\omega=\frac{1}{\sqrt{1-t^4}}dt=\omega(t)dt$$
&lt;/div&gt;
&lt;p&gt;We use slightly ugly notation ($\omega \neq \omega(t)$) to distinguish the whole differential form from its constituent basis form and function part.&lt;/p&gt;

&lt;p&gt;Now, we’re interested in finding mappings to other manifolds that we can pull back $\omega$ to a sum of identical differential forms? Let’s visualize the pullback. The first lemniscate substition is a mapping&lt;/p&gt;
&lt;div&gt;
$$F(r)=\sqrt{\frac{2r^2}{1+r^4}}=t$$
&lt;/div&gt;
&lt;p&gt;So to calculate the pullback, we are computing&lt;/p&gt;
&lt;div&gt;
$$F^*\omega=\omega(F(r))*dF$$
&lt;/div&gt;
&lt;p&gt;Breaking this apart, and using some constraints on the parameter (greater than/equal to 0, less than 1)&lt;/p&gt;
&lt;div&gt;
$$\omega(F(r))=\frac{t^4+1}{t^4-1}$$
&lt;/div&gt;
&lt;p&gt;And similarly we can calculate&lt;/p&gt;
&lt;div&gt;
$$dF=\frac{dF}{dt}dt=\frac{\sqrt{2}(1-t^4)}{(t^4+1)^{3/2}}$$
&lt;/div&gt;
&lt;p&gt;Putting these together, we find that, as expected,&lt;/p&gt;
&lt;div&gt;
$$F^*\omega=\sqrt{2}\frac{1}{\sqrt{t^4+1}}$$
&lt;/div&gt;
&lt;p&gt;Now, while this is a nice exercise in applying the language of manifolds to typical calculus, it doesn’t really solve the fundamental questions I have about this situation. We have that angle addition formulae are mappings between manifolds that pull back differential forms to sums of identical differential forms. Does this phenomenon fit into a bigger picture?&lt;/p&gt;

&lt;p&gt;I like the visualization of hopping along manifolds using substitutions, and in each manifold, you find that you’ve also solved another integral of interest. Is this the best way to view the situation? I don’t know, but it’s pretty cool.&lt;/p&gt;

&lt;p&gt;Alright, gotta go do homework. Peace out.&lt;/p&gt;

&lt;p&gt;[]:https://www.math.purdue.edu/~arapura/preprints/diffforms.pdf&lt;/p&gt;</content><author><name>Beau Horenberger</name></author><summary type="html"></summary></entry><entry><title type="html">Lagrangians, Diff Geo, and the Isochronous Curve of Leibniz</title><link href="http://localhost:4000/2020/09/04/isochronouscurve.html" rel="alternate" type="text/html" title="Lagrangians, Diff Geo, and the Isochronous Curve of Leibniz" /><published>2020-09-04T00:00:00-04:00</published><updated>2020-09-04T00:00:00-04:00</updated><id>http://localhost:4000/2020/09/04/isochronouscurve</id><content type="html" xml:base="http://localhost:4000/2020/09/04/isochronouscurve.html">&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#introduction-&quot; id=&quot;markdown-toc-introduction-&quot;&gt;Introduction &lt;a name=&quot;0.0&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#the-newtonian-approach-&quot; id=&quot;markdown-toc-the-newtonian-approach-&quot;&gt;The Newtonian Approach &lt;a name=&quot;1.0&quot;&gt;&lt;/a&gt;&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#how-to-be-wrong-forget-about-differential-geometry-&quot; id=&quot;markdown-toc-how-to-be-wrong-forget-about-differential-geometry-&quot;&gt;How to Be Wrong: Forget About Differential Geometry &lt;a name=&quot;1.1&quot;&gt;&lt;/a&gt;&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#laying-incorrect-foundations-&quot; id=&quot;markdown-toc-laying-incorrect-foundations-&quot;&gt;Laying Incorrect Foundations &lt;a name=&quot;1.1a&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#discovering-a-missing-force-&quot; id=&quot;markdown-toc-discovering-a-missing-force-&quot;&gt;Discovering a Missing Force &lt;a name=&quot;1.1b&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#a-correct-newtonian-solution-&quot; id=&quot;markdown-toc-a-correct-newtonian-solution-&quot;&gt;A Correct Newtonian Solution &lt;a name=&quot;1.2&quot;&gt;&lt;/a&gt;&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#the-normal-force-of-gravity-&quot; id=&quot;markdown-toc-the-normal-force-of-gravity-&quot;&gt;The Normal Force of Gravity &lt;a name=&quot;1.2a&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#the-final-force-repulsion-of-the-curve-&quot; id=&quot;markdown-toc-the-final-force-repulsion-of-the-curve-&quot;&gt;The Final Force: Repulsion of the Curve &lt;a name=&quot;1.2b&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#wrapping-up-newtonian-solution-&quot; id=&quot;markdown-toc-wrapping-up-newtonian-solution-&quot;&gt;Wrapping up Newtonian Solution &lt;a name=&quot;1.3&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#the-lagrangian-method-&quot; id=&quot;markdown-toc-the-lagrangian-method-&quot;&gt;The Lagrangian Method &lt;a name=&quot;2.0&quot;&gt;&lt;/a&gt;&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#method-and-solution-&quot; id=&quot;markdown-toc-method-and-solution-&quot;&gt;Method and Solution &lt;a name=&quot;2.1&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#unanswered-questions-on-lagrangian-method-&quot; id=&quot;markdown-toc-unanswered-questions-on-lagrangian-method-&quot;&gt;Unanswered Questions on Lagrangian Method &lt;a name=&quot;2.2&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#conclusion-i-am-an-amateur-&quot; id=&quot;markdown-toc-conclusion-i-am-an-amateur-&quot;&gt;Conclusion: I am an Amateur &lt;a name=&quot;3.0&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;introduction-&quot;&gt;Introduction &lt;a name=&quot;0.0&quot;&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;I’ve been working on building intuitions for advanced classical mechanics. I find that there is an unfortunate trade-off at the development of the Lagrangian. On one hand, setting up and solving problems becomes (hypothetically) easier and more streamlined. On the other, the intuition can become obscured.&lt;/p&gt;

&lt;p&gt;I decided to work on some of the earliest problems where the old and new systems collided. Many of these were gravity problems along the lines of, “find the curve between two points along which a descending particle has X property.” For example, the brachistochrone is the curve of fastest descent. It’s the red curve depicted here:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/6/63/Brachistochrone.gif&quot; alt=&quot;Brachistochrone&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The tautochrone (or isochrone) is the curve such that beginning at any point will take the same time to reach the bottom:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/b/bd/Tautochrone_curve.gif&quot; alt=&quot;Tautochrone&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We’ll be looking at another problem, called the “&lt;a href=&quot;https://mathcurve.com/courbes2d.gb/isochron/isochrone%20leibniz.shtml&quot;&gt;isochronous curve of Leibniz&lt;/a&gt;.” Note that this is &lt;em&gt;not&lt;/em&gt; the isochrone we just mentioned. The isochronous curve of Leibniz is the curve such that the vertical acceleration at any point is constant. Here is a depiction from &lt;a href=&quot;https://mathcurve.com/courbes2d.gb/isochron/isochrone%20leibniz.shtml&quot;&gt;this source&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://mathcurve.com/courbes2d.gb/isochron/parbolesemicubiqueanim.gif&quot; alt=&quot;Isochronous curve of Leibniz&quot; /&gt;&lt;/p&gt;

&lt;p&gt;So how will we determine this curve? Well, there are two major approaches. The first uses Newtonian mechanics, and the second uses the Lagrangian.&lt;/p&gt;

&lt;h2 id=&quot;the-newtonian-approach-&quot;&gt;The Newtonian Approach &lt;a name=&quot;1.0&quot;&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;The Newtonian approach is interesting and insightful, but it’s also special in another way. Particularly, it sucks. It’s terrible. It’s a lot of work. However, the Newtonian approach introduces us to deep mathematics. Differential geometry is, loosely speaking, the study of the inherent properties of smooth curves and surfaces. Classical mechanics problems like this one bring this theoretical field to life.&lt;/p&gt;

&lt;h3 id=&quot;how-to-be-wrong-forget-about-differential-geometry-&quot;&gt;How to Be Wrong: Forget About Differential Geometry &lt;a name=&quot;1.1&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;h4 id=&quot;laying-incorrect-foundations-&quot;&gt;Laying Incorrect Foundations &lt;a name=&quot;1.1a&quot;&gt;&lt;/a&gt;&lt;/h4&gt;

&lt;p&gt;I’ll start by describing my first attempt. Although it’s not correct, it’s only slightly wrong, and it’s a good intuitive foundation.&lt;/p&gt;

&lt;p&gt;Firstly, I observed the curve can be described as a parameterized function, $\vec{s}(t)=(x(t),y(t))$. In particular, since our particle travels along the curve, we parameterize the curve with the position function of our particle.&lt;/p&gt;

&lt;p&gt;The assumption of the problem is that $y(t)=v_y t$, where $v_y$ is a constant. Now to impose more structure on our curve, we’re going to consider the forces which act on our particle.&lt;/p&gt;

&lt;p&gt;In my first attempt, I thought this: “gravity is one force, $\vec{F_g}(t)=(0,g)$, and the only other force is the normal force of the curve resisting gravity at the location of the particle.” Typically once all the forces are identified, the equations of motion can be derived using Newton’s laws.&lt;/p&gt;

&lt;p&gt;Doesn’t this sound reasonable? Unfortunately, we’re actually missing a force. If you considered a stationary particle sitting at a point on the curve, we would be correct. However, we’re not telling the whole story for a moving particle.&lt;/p&gt;

&lt;h4 id=&quot;discovering-a-missing-force-&quot;&gt;Discovering a Missing Force &lt;a name=&quot;1.1b&quot;&gt;&lt;/a&gt;&lt;/h4&gt;

&lt;p&gt;This thought experiment demonstrates that there is another force at play. Suppose we had the curve $s(t)=(t, t^2)$, and a particle on the curve at $t=0$, the bottom of the well. Now let’s spice it up. Suppose that the particle has just come racing down the left side of the curve, and it has velocity $v(t)=(1,0)$. We will also assume that there is &lt;em&gt;no gravity.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/isochronousexperiment.png&quot; alt=&quot;Portrayal of our thought experiment&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Since there’s no gravity, there’s no $\vec{F_g}$ and no corresponding $\vec{F_N}$. But wait… does that mean there are no forces acting on the particle? As you know, $\vec{F}=m\vec{a}$, so that would mean $\vec{a}(t)=(0,0)$. Then the particle would shoot right through the curve!&lt;/p&gt;

&lt;p&gt;It seems we have missed a force somewhere in our model. In fact, the curve inherently imparts a force on the particle. How can we describe this force? Well, the force depends on the particle’s position along the curve. Additionally, the force is bigger at “steep” sections of curve.&lt;/p&gt;

&lt;p&gt;We also noted this force would inuitively be zero when the particle is stationary, and to add to this, the force will be as big as necessary to redirect faster or slower particles. Thus, the force depends also on velocity.&lt;/p&gt;

&lt;p&gt;Now we’ll flesh out this new force more completely and make a correct solution.&lt;/p&gt;

&lt;h3 id=&quot;a-correct-newtonian-solution-&quot;&gt;A Correct Newtonian Solution &lt;a name=&quot;1.2&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Our previous methodology only needs to be tweaked slightly. The path of our particle is $\vec{r}(t)=(x(t),v_y t)$. There is a gravitational force $\vec{F_g}(t)=(0,g)$ and a corresponding normal force $F_N$. However, we’re now also adding a third force corresponding to the resistance of the curve to the particle.&lt;/p&gt;

&lt;p&gt;Let’s get $\vec{F_N}$ out of the way before moving on to this mysterious third force.&lt;/p&gt;

&lt;p&gt;From now on, we’ll assume $m=1$ so that I can haphazardly remove it from equations whenever I want.&lt;/p&gt;

&lt;h4 id=&quot;the-normal-force-of-gravity-&quot;&gt;The Normal Force of Gravity &lt;a name=&quot;1.2a&quot;&gt;&lt;/a&gt;&lt;/h4&gt;

&lt;p&gt;To calculate the normal force, we’ll have to find the normal vector of the curve at each point. Then, we’ll scale this by $mg\cos{\theta}$, where $\theta$ is the angle between the x-axis and the tangent of the curve.&lt;/p&gt;

&lt;p&gt;Our particle has some velocity function, $\vec{v}(t)=(\dot{x}(t), v_y)$. Since the particle travels along the curve, this velocity is necessarily tangent to the curve at every point. As a result, we can use it to calculate a unit normal vector.&lt;/p&gt;

&lt;p&gt;Firstly, calculate the unit tangent vector:&lt;/p&gt;

\[\frac{\vec{r}'(t)}{\vert \vec{r}'(t) \vert} = \frac{1}{\sqrt{\dot{x}(t)^2 + v_y^2}}(\dot{x}(t), v_y)\]

&lt;p&gt;Next, we rotate this counterclockwise 90 degrees to get the unit normal vector. All we have to do is map $(x,y)\rightarrow (-y,x)$ to get:&lt;/p&gt;

\[\frac{1}{\sqrt{\dot{x}(t)^2 + v_y^2}}(\dot{x}(t), v_y)\]

&lt;p&gt;So we now have a unit normal vector. All that remains is to scale it by $mg\cos{\theta}$. How do we calculate $\cos{\theta}$? Well, recall that $\vec{A}\cdot\vec{B}=\vert A \vert \vert B \vert \cos{\theta}$. So we simply dot the unit tangent vector with the unit x-axis vector, $(1,0)$:&lt;/p&gt;

\[mg\cos{\theta} = \frac{\vec{r}'(t)}{\vert \vec{r}'(t) \vert}\cdot (1,0) = \frac{-mg\dot{x}(t)}{\sqrt{\dot{x}(t)^2+v_y^2}}\]

&lt;p&gt;And thus, finally, we can see that the normal force due to gravity is given by:&lt;/p&gt;

\[F_N=(\frac{g\dot{x}(t)v_y}{\dot{x}(t)^2+v_y^2},\frac{-g\dot{x}(t)^2}{\dot{x}(t)^2+v_y^2})\]

&lt;h4 id=&quot;the-final-force-repulsion-of-the-curve-&quot;&gt;The Final Force: Repulsion of the Curve &lt;a name=&quot;1.2b&quot;&gt;&lt;/a&gt;&lt;/h4&gt;

&lt;p&gt;I’m not exactly sure that there’s a satisfying name for this final force. However, we know that it must be related to the velocity of the particle and the curvature of the curve.&lt;/p&gt;

&lt;p&gt;The simplest way to approach this problem is by generalizing the methods used on a circle. Consider a point which is bound to a circular path. If the radius of the circle is $r$, and the particle has a tangential speed $v$, then the centripetal force has magnitude $\frac{mv^2}{r}$ and points towards the center of the circle.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Centripetal_force_diagram.svg/2560px-Centripetal_force_diagram.svg.png&quot; alt=&quot;Force and velocity of circular motion&quot; /&gt;&lt;/p&gt;

&lt;p&gt;For our curve, we can approximate the curvature of a local region around the particle with curvature of a circle of some radius. This circle is called the “osculating circle.” Using the osculating circle, we can deduce the force imposed by the curvature using our simple centripetal force calculations.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Osculating_circle.svg/2560px-Osculating_circle.svg.png&quot; alt=&quot;Example of osculating circle&quot; /&gt;&lt;/p&gt;

&lt;p&gt;But how do we calculate the radius of the circle corresonding to a local region? The direct answer is that the radius is given by&lt;/p&gt;

\[\rho = \vert \frac{(\dot{x}(t)^2 + \dot{y}(t)^2)^{3/2}}{\dot{x}(t)\ddot{y}(t)-\dot{y}(t)\ddot{x}(t)} \vert\]

&lt;p&gt;But why is this true? Why does it work? Well, firstly keep in mind that in physics, systems are determined by $F=ma$, meaning there’s not usually a need to go beyond two derivatives. Thus, we want a circle that agrees with our curve in its zeroth, first, and second derivatives.&lt;/p&gt;

&lt;p&gt;We’ll avoid too many details, but the derivation takes the general parameterized circle and tries to set all the first and second derivatives at a point equal to the derivatives of our curve at a point. Algebraically solving the equivalences reduces to an equation for the radius of curvature. You can find more on this topic &lt;a href=&quot;https://en.wikipedia.org/wiki/Centripetal_force#General_planar_motion&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;We’ll solve the previous equation for our physical problem to get:&lt;/p&gt;

\[\vert \frac{(\dot{x}(t)^2 + v_y^2)^{3/2}}{-v_y \ddot{x}(t)} \vert\]

&lt;p&gt;Thus, our force from curvature, $F_c=\frac{mv^2}{\rho}$, is&lt;/p&gt;

\[\vert \frac{-v_y \ddot{x}(t)(\dot{x}(t)^2 + v_y^2)}{(\dot{x}(t)^2 + v_y^2)^{3/2}} \vert\]

&lt;p&gt;which reduces to&lt;/p&gt;

\[\vert \frac{-v_y \ddot{x}(t)}{(\dot{x}(t)^2 + v_y^2)^{1/2}} \vert\]

&lt;p&gt;And we’ve finally got all the forces to solve this system!&lt;/p&gt;

&lt;h3 id=&quot;wrapping-up-newtonian-solution-&quot;&gt;Wrapping up Newtonian Solution &lt;a name=&quot;1.3&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;So, I’m not going to go over the algebra involved, but when you sum $F_g$,$F_N$, and $F_c$, you can eventually reduce down to a differential equation for $x(t)$:&lt;/p&gt;

\[\dot{x}(t)=\frac{gv_y}{\ddot{x}(t)}\]

&lt;p&gt;Solving this, you get&lt;/p&gt;

\[x(t) = \frac{2}{3}\sqrt{gv_yt^2+c_1}\]

&lt;p&gt;Wasn’t that fun? This process was interesting to me, because I had no idea Newtonian mechanics involved such shenanigans as this. It took me quite a while to explain the missing forces involved. &lt;a href=&quot;https://physics.stackexchange.com/questions/83476/normal-force-of-ball-sliding-on-concave-surface&quot;&gt;This post&lt;/a&gt; in particular helped tip me off.&lt;/p&gt;

&lt;p&gt;It turns out this solution scratches the surfaces of differential geometry, and the third force is just one instance of a concept called “Frenet formulas.” While the study of these topics is interesting and valuable, there’s no denying that constructing this solution was somewhat unpleasant.&lt;/p&gt;

&lt;p&gt;Seeing Newtonian methods in cases like this can really demonstrate just how convenient the Lagrangian alternative is. No more of this obnoxious force hunting. We’ll summarize this method next.&lt;/p&gt;

&lt;h2 id=&quot;the-lagrangian-method-&quot;&gt;The Lagrangian Method &lt;a name=&quot;2.0&quot;&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;I’ll admit I took much longer to work through this than I’d like to admit. However, my &lt;a href=&quot;https://zbeever.github.io/post/2020-08-15_leibniz-isochronous-curve/&quot;&gt;colleagues more experienced with Lagrangians solved this almost instantly&lt;/a&gt;. I’ll keep method somewhat brief, mostly because I’m not totally confident in my understanding.&lt;/p&gt;

&lt;h3 id=&quot;method-and-solution-&quot;&gt;Method and Solution &lt;a name=&quot;2.1&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Firstly, our system is described by $\vec{s}(t)=(x(t),y(t))$, as before. The Lagrangian of a physical system describes a property which must be minimized or maximized by the path taken. If the property described by the Lagrangian is unique to a single path, we can use the calculus of variations to deduce the path from the Lagrangian.&lt;/p&gt;

&lt;p&gt;The Lagrangian in classical mechanics is typically $L=T-U$, where $T$ is kinetic energy of the system and $U$ is potential energy of the system. It’s derived using the constraint of conservation of energy. In our case, $T=\frac{1}{2}(\dot{x}(t)^2+\dot{y}(t)^2)$ and $U=gy(t)$ (remember we assumed mass is 1). Thus, the typical Lagrangian for a particle under uniform gravity is&lt;/p&gt;

\[L_{general}=\frac{1}{2}(\dot{x}(t)^2+\dot{y}(t)^2) - gy(t)\]

&lt;p&gt;Now, this Lagrangian is too general. It actually applies any conservative system with uniform gravity. We need to introduce more constraints on the variables than just conservation of energy. We will mix in our particular assumption that $\dot{y}(t)=v_y$. So firstly, conservation of energy tells us that&lt;/p&gt;

\[T+U=E\]

&lt;p&gt;Where E is a constant. Plugging in our $T$ and $U$, and letting $E$ be $T(0)+U(0)$, we get&lt;/p&gt;

\[\frac{1}{2}(\dot{x}(t)^2+\dot{y}(t)^2) - gy(t) = \frac{1}{2}(\dot{x}(0)^2+\dot{y}(0)^2) - gy(0)\]

&lt;p&gt;We introduce our second constraint by substituting $\dot{y}(t)=\dot{y}(0)=v_y$, giving&lt;/p&gt;

\[\frac{1}{2}(\dot{x}(t)^2+v_y^2) - gy(t) = \frac{1}{2}(\dot{x}(0)^2+v_y^2) - gy(0)\]

&lt;p&gt;Because I’m feeling particularly lazy, let’s assume that $x(0)=y(0)=0$. This is of no serious consequence; we can always shift the origin to make this true. Then we get&lt;/p&gt;

\[\frac{1}{2}(\dot{x}(t)^2+v_y^2) - gy(t) = \frac{1}{2}(\dot{x}(0)^2+v_y^2) \implies \frac{1}{2}\dot{x}(t)^2 - gy(t) - \frac{1}{2}\dot{x}(0)^2=0\]

&lt;p&gt;Now, there is one more constraint we will be imposing on our problem. We do not have to do this, but we will assume $\dot{x}(0)=0$. This is equivalent to setting $c_1=0$ in our Newtonian solution. Then we get&lt;/p&gt;

\[\frac{1}{2}\dot{x}(t)^2 = gy(t)\]

&lt;p&gt;This is the additional constraint we will add to the vanilla Lagrangian. After making this substitution, our actual Lagrangian is now&lt;/p&gt;

\[L=\frac{1}{2}(\dot{x}(0)^2+\dot{y}(t)^2)\]

&lt;p&gt;Let’s tackle the Euler-Lagrange equations with respect to $y$.&lt;/p&gt;

\[\frac{\partial L}{\partial y} = 0 \quad \frac{\partial L}{\partial \dot{y}} = \dot{y}(t)\]

&lt;p&gt;Thus, our Euler-Lagrange equation is&lt;/p&gt;

\[\frac{d}{dt}\dot{y}(t)=0\]

&lt;p&gt;We can easily deduce from this that $\dot{y}(t)=c$, which we know to be $\dot{y}(t)=v_y$, and we can integrate again to get $y(t)=v_yt$. Now, we can actually solve the system by plugging this into our constraint:&lt;/p&gt;

\[\frac{1}{2}\dot{x}(t)^2 = gy(t) \implies \frac{1}{2}\dot{x}(t)^2 = gv_yt \implies \dot{x}(t)=\sqrt{2gv_yt} \implies x(t)=\frac{2}{3}\sqrt{gv_yt^3}\]

&lt;p&gt;And we’re done!&lt;/p&gt;

&lt;h3 id=&quot;unanswered-questions-on-lagrangian-method-&quot;&gt;Unanswered Questions on Lagrangian Method &lt;a name=&quot;2.2&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;So, there are some problems I encountered with the Lagrangian method. First and foremost, a keen reader may have noticed that we actually didn’t need to use the Euler-Lagrange equation at all. Once we imposed conservation of energy as well as the assumption that $\dot{y}(t)=v_y$, we could have immediately substituted into $\frac{1}{2}\dot{x}(t)^2 = gy(t)$ and solved.&lt;/p&gt;

&lt;p&gt;Why were we able to circumvent Lagrangian methods? I haven’t yet answered exactly what causes this, but I suspect it must have to do with the elementary nature of the solution.&lt;/p&gt;

&lt;p&gt;My second problem has been resolved after quite a bit of hassle. I had &lt;a href=&quot;https://physics.stackexchange.com/questions/577458/how-to-derive-euler-lagrange-equation-for-isochronous-curve-of-leibniz-in-terms&quot;&gt;previously formulated the problem&lt;/a&gt; in terms of $t, x(t), \dot{x}(t)$ and got an incorrect result.&lt;/p&gt;

&lt;p&gt;I then went on to reformulate the Lagrangian in terms of x(t), y(t), and t. In this case, I got the correct answer solving for y(t) and substituting back into conservation of energy for x(t). However, solving x(t) still gave an incorrect result.&lt;/p&gt;

&lt;p&gt;The reason these formulations failed was because of my use of $t$ as a parameter. The Lagrangian, and particularly the Euler-Lagrange equations, depend on the principle of least action. The principle of least action is summarized as:&lt;/p&gt;

\[\delta \int_{t_{1}}^{t_{2}} L(\mathbf{q}, \dot{\mathbf{q}}, t) d t=0\]

&lt;p&gt;It is within this equation that we can identify the problem in my original formulations. Do you see it yet?&lt;/p&gt;

&lt;p&gt;The problem was that formulations such as $t, x(t), \dot{x}(t)$ depend on $t$, but the &lt;em&gt;region of integration with respect to t is not fixed&lt;/em&gt;. Indeed, we assumed that we would begin at some $(x_1,y_1)$ and finish at some $(x_2, y_2)$, but the time taken between these points is determined by the solution of the Lagrangian, which gives some “chicken and egg” vibes if we were integrating over $t$.&lt;/p&gt;

&lt;p&gt;The fact that our start and finish are spatial coordinates should be a strong indicator that the Lagrangian will be integrating over a spatial parameter.&lt;/p&gt;

&lt;p&gt;Additionally, solving in situations where the integration region is not fixed can apparently be addressed by more general principles, such as &lt;a href=&quot;https://en.wikipedia.org/wiki/Maupertuis%27s_principle&quot;&gt;Maupertuis’s principle.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Part of the reason I took so long to solve this was because one of my erroneous methods led me to an Euler-Lagrange equation that reduced to&lt;/p&gt;

\[\frac{d}{dt}\dot{y}(t)=0\]

&lt;p&gt;Which led me to conlude $&lt;/p&gt;

&lt;h2 id=&quot;conclusion-i-am-an-amateur-&quot;&gt;Conclusion: I am an Amateur &lt;a name=&quot;3.0&quot;&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;I have a lot to learn. I feel like I made great progress on the Newtonian method. I’d like to investigate further on the nature of curvature and get a more rigorous perspective on how the force inherent to a curve is modeled. I’ve heard that one place this can be investigated is &lt;a href=&quot;https://en.wikipedia.org/wiki/Frenet%E2%80%93Serret_formulas&quot;&gt;Frenet-Serre formulas&lt;/a&gt;. I’d also really like to get closure on the Lagrangian method. Why did all my other formulations fail, and why does the Lagrange-Euler equation with respect to $y$ work? I hope to have these answers for you some day.&lt;/p&gt;

&lt;p&gt;Anyways, thanks for reading! Peace out!&lt;/p&gt;</content><author><name>Beau Horenberger</name></author><summary type="html"></summary></entry><entry><title type="html">History of Modular Forms 1: The First Era, 1800s</title><link href="http://localhost:4000/2020/08/08/modularforms.html" rel="alternate" type="text/html" title="History of Modular Forms 1: The First Era, 1800s" /><published>2020-08-08T00:00:00-04:00</published><updated>2020-08-08T00:00:00-04:00</updated><id>http://localhost:4000/2020/08/08/modularforms</id><content type="html" xml:base="http://localhost:4000/2020/08/08/modularforms.html">&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#introduction-&quot; id=&quot;markdown-toc-introduction-&quot;&gt;Introduction &lt;a name=&quot;0.0&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#historical-context-who-what-when-where-why-&quot; id=&quot;markdown-toc-historical-context-who-what-when-where-why-&quot;&gt;Historical Context: Who, What, When, Where, Why? &lt;a name=&quot;1.0&quot;&gt;&lt;/a&gt;&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#the-soft-context-&quot; id=&quot;markdown-toc-the-soft-context-&quot;&gt;The Soft Context &lt;a name=&quot;1.1&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#the-mathematical-context-&quot; id=&quot;markdown-toc-the-mathematical-context-&quot;&gt;The Mathematical Context &lt;a name=&quot;1.2&quot;&gt;&lt;/a&gt;&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#analysis-and-transcendental-functions-&quot; id=&quot;markdown-toc-analysis-and-transcendental-functions-&quot;&gt;Analysis and Transcendental Functions &lt;a name=&quot;1.2a&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#complex-numbers-&quot; id=&quot;markdown-toc-complex-numbers-&quot;&gt;Complex Numbers &lt;a name=&quot;1.2b&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#kinds-of-elliptic-integrals-gotta-catch-em-all-&quot; id=&quot;markdown-toc-kinds-of-elliptic-integrals-gotta-catch-em-all-&quot;&gt;Kinds of Elliptic Integrals: Gotta Catch ‘em All &lt;a name=&quot;2.0&quot;&gt;&lt;/a&gt;&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#second-kind-astronomy-and-ellipses-&quot; id=&quot;markdown-toc-second-kind-astronomy-and-ellipses-&quot;&gt;Second Kind: Astronomy and Ellipses &lt;a name=&quot;2.1&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#motivating-the-studies-of-arc-lengthelliptic-integrals-&quot; id=&quot;markdown-toc-motivating-the-studies-of-arc-lengthelliptic-integrals-&quot;&gt;Motivating the Studies of Arc Length/Elliptic Integrals &lt;a name=&quot;2.1a&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#first-encounter-with-another-kind-of-elliptic-integral-&quot; id=&quot;markdown-toc-first-encounter-with-another-kind-of-elliptic-integral-&quot;&gt;First Encounter With Another Kind of Elliptic Integral &lt;a name=&quot;2.2&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#the-classification-of-elliptic-integrals-&quot; id=&quot;markdown-toc-the-classification-of-elliptic-integrals-&quot;&gt;The Classification of Elliptic Integrals &lt;a name=&quot;2.3&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#elliptic-functions-the-other-side-of-the-coin-&quot; id=&quot;markdown-toc-elliptic-functions-the-other-side-of-the-coin-&quot;&gt;Elliptic Functions: The Other Side of the Coin &lt;a name=&quot;3.0&quot;&gt;&lt;/a&gt;&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#gauss-and-the-lemniscate-sine-&quot; id=&quot;markdown-toc-gauss-and-the-lemniscate-sine-&quot;&gt;Gauss and the Lemniscate Sine &lt;a name=&quot;3.1&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#double-double-toil-and-trouble-angle-identities-and-complex-numbers-&quot; id=&quot;markdown-toc-double-double-toil-and-trouble-angle-identities-and-complex-numbers-&quot;&gt;Double, Double, Toil and Trouble: Angle Identities and Complex Numbers &lt;a name=&quot;3.2&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#jacobis-identities-expansions-and-theta-functions-&quot; id=&quot;markdown-toc-jacobis-identities-expansions-and-theta-functions-&quot;&gt;Jacobi’s Identities, Expansions, and Theta Functions &lt;a name=&quot;4.0&quot;&gt;&lt;/a&gt;&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#warmup-jacobis-notation-&quot; id=&quot;markdown-toc-warmup-jacobis-notation-&quot;&gt;Warmup: Jacobi’s Notation &lt;a name=&quot;4.1&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#jacobis-transformation-between-elliptic-functions-&quot; id=&quot;markdown-toc-jacobis-transformation-between-elliptic-functions-&quot;&gt;Jacobi’s Transformation Between Elliptic Functions &lt;a name=&quot;4.2&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#the-multiple-angle-identity-under-this-tranformation-&quot; id=&quot;markdown-toc-the-multiple-angle-identity-under-this-tranformation-&quot;&gt;The Multiple Angle Identity Under This Tranformation &lt;a name=&quot;4.3&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#using-the-multiple-angle-identity-to-get-an-expansion-&quot; id=&quot;markdown-toc-using-the-multiple-angle-identity-to-get-an-expansion-&quot;&gt;Using the Multiple Angle Identity To Get an Expansion &lt;a name=&quot;4.4&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#rephrasing-the-expansion-and-theta-functions-&quot; id=&quot;markdown-toc-rephrasing-the-expansion-and-theta-functions-&quot;&gt;Rephrasing the Expansion and Theta Functions &lt;a name=&quot;4.5&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#the-shape-of-math-to-come-&quot; id=&quot;markdown-toc-the-shape-of-math-to-come-&quot;&gt;The Shape of Math to Come &lt;a name=&quot;5.0&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#closing-and-final-remarks-&quot; id=&quot;markdown-toc-closing-and-final-remarks-&quot;&gt;Closing and Final Remarks &lt;a name=&quot;close&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#special-thanks-&quot; id=&quot;markdown-toc-special-thanks-&quot;&gt;Special Thanks &lt;a name=&quot;thanks&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#further-reading-&quot; id=&quot;markdown-toc-further-reading-&quot;&gt;Further Reading &lt;a name=&quot;reading&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;introduction-&quot;&gt;Introduction &lt;a name=&quot;0.0&quot;&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;The goal of this series of posts is to tell a story about the discovery of modular forms. While I’m relying heavily on facts to tell this story, it is not “the true story.” My goal was to clearly motivate the mathematics in a historical narrative. Surely many of my characterizations are inaccurate. However, being wrong has never stopped me before, and it won’t stop me now. I intend to highlight some of the tangible issues that led an era of mathematicians to get disproportionately interested in theta functions and modular forms. Please don’t view this as an authoritative history, but rather as one of many possible narratives. This is also meant to be a soft introduction to some of the mathematics used in the study of modular forms.&lt;/p&gt;

&lt;p&gt;In this entry of the series, we’re exploring the 1800s, where astronomical investigations and innovations in analysis as well as complex numbers caused the discovery and investigation of elliptic functions. This set the stage for future investigation regarding general properties among sets of transcendental functions.&lt;/p&gt;

&lt;p&gt;In the next post, we will see that Felix Klein’s attempts to express relations among these elliptic functions would lead to the discovery of even more interesting functions, such as the j-function.&lt;/p&gt;

&lt;p&gt;Following that, the next post will attempt to touch on the work of Erich Hecke, who expanded Klein’s discovery into the more robust theory of modular forms.&lt;/p&gt;

&lt;p&gt;Technically, you could follow most of this with Calculus I-III experience, but it will help a lot to be familiar with real analysis as well as the basics of complex numbers (and maybe a teeny bit of complex analysis).&lt;/p&gt;

&lt;p&gt;Please do not expect this post to be accurate or useful, but hope that it will at least be fun.&lt;/p&gt;

&lt;h2 id=&quot;historical-context-who-what-when-where-why-&quot;&gt;Historical Context: Who, What, When, Where, Why? &lt;a name=&quot;1.0&quot;&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;h3 id=&quot;the-soft-context-&quot;&gt;The Soft Context &lt;a name=&quot;1.1&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;We’ll start by excluding the mathematical history and focus on physics and cultural context.&lt;/p&gt;

&lt;p&gt;The rabbit-hole of modular forms began with elliptic functions at the start of the 1800s, $\pm 30$ years. It was the twilight years of the Enlightenment Era, about a century after Newton’s Principia and 20 years after Euler’s death. The telescope had been used by Galileo 200 years ago, but innovations by Newtons and others during the 1700s greatly improved the quality of observations.&lt;/p&gt;

&lt;p&gt;Kepler’s laws had been published around 1600, again nearly 200 years ago, and they gave an excellent approximation of the behaviors of heavenly bodies. However, it was Newton’s mechanics, produced near 1700, that had fit Kepler’s laws into a larger physics framework.&lt;/p&gt;

&lt;p&gt;The implications of Newton’s theories had been an extremely popular topic over the last 100 years, and the fact that they so neatly explained the movement of heavenly bodies captivated not just the scientific community, but also many political figures. Colleges and dukes alike were willing to pay mathematicians and astronomers (careers which frequently overlapped) to collect astronomical data and determine the orbits of bodies. You would have a very happy duke if you discovered an asteroid, named it after the duke, and predicted when it would next be seen in the sky.&lt;/p&gt;

&lt;p&gt;This is all to say that every academic was tempted to dip into the field of astronomy. Many of them did. On the astronomical playing field of the era one could find Euler, Legendre, Gauss, Poisson, Laplace, Bessel, and Mobius. Additionally, many mathematicians, such as Jacobi and Abel, were interested in the theoretical issues behind astronomical and other physical problems. These two figures will be relevant to us later.&lt;/p&gt;

&lt;p&gt;While elliptic integrals and elliptic functions were appearing in many mechanics problems (such as the investigations of elastica and gravitational fields), it seems easiest to focus on one area of physics, which is why we’re talking about astronomy and orbits. But before we dig in deeper, let’s talk about some mathematical context.&lt;/p&gt;

&lt;h3 id=&quot;the-mathematical-context-&quot;&gt;The Mathematical Context &lt;a name=&quot;1.2&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;h4 id=&quot;analysis-and-transcendental-functions-&quot;&gt;Analysis and Transcendental Functions &lt;a name=&quot;1.2a&quot;&gt;&lt;/a&gt;&lt;/h4&gt;

&lt;p&gt;A number of great mathematical innovations had occurred during the 1600s-1700s. One of the most notable was the development of the theory of calculus/analysis, including infinite series.&lt;/p&gt;

&lt;p&gt;We will focus on a particular innnovation related to our upcoming astronomical investigations. Mathematicians had long been familiar with the transcendental functions like $\sin{x}$, $\tan{x}$, and $e^x$. However, our understanding was limited. Particularly, we could not represent them as elementary algebraic expressions.&lt;/p&gt;

&lt;p&gt;This gap was bridged largely by innovations with infinite series and analysis. There were two major steps taken around the 1660s. Firstly, for all three of these examples, it was found that their inverses could be expressed as integrals of algebraic expressions:&lt;/p&gt;

&lt;div&gt;
$$\log(x+1)=\int_{0}^{x}\frac{dt}{1+t}, \quad \text{sin}^{-1}x=\int_{0}^{x}\frac{dt}{\sqrt{1-t^2}}, \quad \text{tan}^{-1}x=\int_{0}^{x}\frac{dt}{1+t^2}$$
&lt;/div&gt;

&lt;p&gt;Each of these integrals can be expanded into power series. The second step, then, was to take the inverse of the power series using Newton’s method of series inversion. This yielded an explicit power series for $\sin{x}$, $\cos{x}$, and $e^x$, which gave a much more tangible perspective on these transcendental functions. See 9.5 and 10.2 in &lt;em&gt;Mathematics and its History&lt;/em&gt; (sources listed below) for more details.&lt;/p&gt;

&lt;p&gt;So in summary, our first contextual point was that analysis was being used to get explicit power series of common transcendental functions by working on their inverse.&lt;/p&gt;

&lt;p&gt;It’s also worth keeping in mind that mathematicians generally didn’t know whether every integral could be solved in terms of elementary algebra, $\sin{x}$, $\cos{x}$, and $e^x$. There was still room to believe that every integral was explicitly solvable, which led mathematicians to be quite interested in integrals that would eventually be proven unsolvable by Liouville around 1830. This caused a development in “function theoretic” methods (not functional analysis), meaning the practice of making mathematical statements about functions that don’t have an explicit expression.&lt;/p&gt;

&lt;h4 id=&quot;complex-numbers-&quot;&gt;Complex Numbers &lt;a name=&quot;1.2b&quot;&gt;&lt;/a&gt;&lt;/h4&gt;

&lt;p&gt;Complex numbers have an extremely long history of being despised and ignored by mathematicians. They originated from one of the oldest hobbies of mathematics: solving polynomial equations. Since the era of the Babylonians around 1500BC, nerds were solving for $x$ in quadratic equations like $x^2+3x+1=0$. I can’t tell you why this was so popular, except that this was a natural way to extend intutive geometric problems like the area of a square given the length of its sides.&lt;/p&gt;

&lt;p&gt;Nevertheless, solving quadratic equations is an ancient practice, and consequently so is our neglect of $\sqrt{-1}$. The traditional mindset was that these solutions to quadratics were nonsense because they didn’t have a geometrical meaning, so no one did arithmetic with $\sqrt{-1}$.&lt;/p&gt;

&lt;p&gt;It wasn’t until the end of the 1500s that Bombelli faced up to a serious problem. Cardano’s formula for the roots of cubics necessarily required doing algebra with $\sqrt{-1}$, even for roots that were real and had geometric meaning. Despite the practical value of his methods, complex numbers continued to be neglected as a field of study.&lt;/p&gt;

&lt;p&gt;At the start of the 1700s, complex numbers began to pop up when solving problems such as angle division, making their utility harder to ignore. Finally, towards the end of the 1700s, d’Alembert and Gauss both produced significant results on the geometric intuition of complex numbers as well as the Fundamental Theorem of Algebra. This theorem states loosely that a polynomial of degree $n$ has $n$ roots in the complex plane, i.e. all polynomials could be factored.&lt;/p&gt;

&lt;p&gt;Since solving cube roots sometimes necessitated algebra with complex numbers, and since missing roots appeared very neatly via the Fundamental Theorem of Algebra, people began to believe that working in the complex numbers gave a clearer picture of most functions. Because of this, it was common to study functions by making them complex-valued.&lt;/p&gt;

&lt;p&gt;There is another development with complex numbers during the mid-1700s that is good to keep in mind during our discussion. In particular, it was discovered that complex numbers could relate many of the transcendental functions. Recall from before that&lt;/p&gt;

&lt;div&gt;
$$\log(x+1)=\int_{0}^{x}\frac{dt}{1+t}, \quad \text{tan}^{-1} x=\int_{0}^{x}\frac{dt}{1+t^2}$$
&lt;/div&gt;

&lt;p&gt;It was Bernoulli who observed in 1702 that if one was willing to work with $\sqrt{-1}$, then&lt;/p&gt;

&lt;div&gt;
$$\frac{d z}{1+z^{2}}=\frac{d z}{2(1+z \sqrt{-1})}+\frac{d z}{2(1-z \sqrt{-1})}$$
&lt;/div&gt;

&lt;p&gt;What is being said here? By integrating, one can see that&lt;/p&gt;

&lt;div&gt;
$$\text{tan}^{-1}z=\frac{1}{2 i} \log \frac{i-z}{i+z}$$
&lt;/div&gt;

&lt;p&gt;This is to say that the inverse trigonometric functions are deeply related to logarithms, thus uniting many transcendental functions in a way which had never been done before.&lt;/p&gt;

&lt;p&gt;This culminated in Euler’s formula in 1748:&lt;/p&gt;

&lt;div&gt;
$$e^{i x}=\cos{x}+ i \sin{x},$$
&lt;/div&gt;

&lt;p&gt;The value of these discoveries was two-fold. Part of their value was that they made computation with the common transcendental functions much easier. The other part of their value was that it brought all the popular transcendental functions closer together on a theoretical level, allowing us to analyze them collectively.&lt;/p&gt;

&lt;p&gt;In summary, the key point here is that complex numbers were occasionally required to answer questions, and mathematicians were becoming inspired to study most functions of interest in the complex plane rather than just the real numbers. Complex numbers also revealed new ways to interrelate transcendental functions.&lt;/p&gt;

&lt;h2 id=&quot;kinds-of-elliptic-integrals-gotta-catch-em-all-&quot;&gt;Kinds of Elliptic Integrals: Gotta Catch ‘em All &lt;a name=&quot;2.0&quot;&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;h3 id=&quot;second-kind-astronomy-and-ellipses-&quot;&gt;Second Kind: Astronomy and Ellipses &lt;a name=&quot;2.1&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;We next discuss Gauss’s astronomical investigations, which led him to investigate one kind of elliptic function about 30 years before Jacobi and Abel published works on a more general theory of elliptic functions. We’re starting with the second kind of elliptic integral because their discovery through astronomy is very intuitive.&lt;/p&gt;

&lt;p&gt;Although the physics was 100 years old, the theory of astronomy was booming at the end of the 1700s due to the analytical innovations of Euler and others. New data was being collected en masse from sightings of astronomical objects such as planets and asteroids. Those who could calculate the paths of these objects and predict their return were guaranteed repute and a decent paycheck. Thus much of the efforts were focused on mathematical techniques to turn sets of observations into a function for the object’s position over time.&lt;/p&gt;

&lt;p&gt;Deriving this function depended on the fact that the theory of gravity proposed orbiting objects should follow elliptical paths. We’ll pass over the physics of this and focus on the nature of ellipses.&lt;/p&gt;

&lt;p&gt;An &lt;em&gt;ellipse&lt;/em&gt; is defined on a plane by selecting two points, $F_1$ and $F_2$, as well as some constant $h$. Then the ellipse is the set of all points such that for each point $x$, the sum of the distance from $x$ to $F_1$ and $x$ to $F_2$ is equal to $h$.&lt;/p&gt;

&lt;p&gt;The picture below is an example from Wikipedia of such an ellipse with many common vocabulary terms illustrated.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;wikipedia.com&quot;&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/9/96/Ellipse-def0.svg&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As a fun fact, the constant $h$ is equal to twice the distance from the center of the ellipse to the vertex. This is also a demonstration that many defined properties of the ellipse can be equated, thus there are many equivalent perspectives from which you can talk about an ellipse.&lt;/p&gt;

&lt;p&gt;In order to make your life less fulfilling, standard practice is to characterize an ellipse not with the constant $h$ as we have been doing. Instead, we use the constant called &lt;em&gt;eccentricity&lt;/em&gt;, $k$, which is defined as the ratio of the focus to the center vs the vertex to the center. If our vertex is $V$ and our center is $C$, then $k=\vert F_1 C \vert / \vert VC \vert$. This is simply because this constant is more convenient in future calculations.&lt;/p&gt;

&lt;p&gt;One can create an equation that defines the points of an ellipse:&lt;/p&gt;

&lt;div&gt;
$$\frac{x^{2}}{a^{2}}+\frac{y^{2}}{b^{2}}=1$$
&lt;/div&gt;

&lt;p&gt;Notice that this is unsurprisingly similar to the equation for a circle.&lt;/p&gt;

&lt;p&gt;In this case, our eccentricity can be shown to be&lt;/p&gt;

&lt;div&gt;
$$k=\sqrt{1-\left(\frac{b}{a}\right)^{2}}$$
&lt;/div&gt;

&lt;p&gt;One can also convert this to a polar parameterization, $(r(\theta), \theta)$ for $0 \leq \theta &amp;lt; 2\pi$. This is achieved by substitution. We will particularly be interested in solving $r(\theta)$ in terms of $\theta$.&lt;/p&gt;

&lt;p&gt;To make this conversion, note that $x = r(\theta)\cos{\theta}$ and $y = r(\theta)\sin{\theta}$. Substituting,&lt;/p&gt;

&lt;div&gt;
$$\left(\frac{r(\theta)\cos{\theta}}{a}\right)^2 + \left(\frac{r(\theta)\sin{\theta}}{b}\right)^2 = 1 \quad \implies \quad r(\theta) = \frac{ab}{\sqrt{(b\cos{\theta})^2 + (a\sin{\theta})^2}}$$
&lt;/div&gt;

&lt;p&gt;So we have the mathematical language to talk about ellipses. My goal in this next two sections is to move towards the mathematics of elliptic functions while also answering the question, “Why would an astronomer do this?”&lt;/p&gt;

&lt;h3 id=&quot;motivating-the-studies-of-arc-lengthelliptic-integrals-&quot;&gt;Motivating the Studies of Arc Length/Elliptic Integrals &lt;a name=&quot;2.1a&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;For a function $f:[a,b]\rightarrow \mathbb{R}$, the length of the curve defined by $f$ is&lt;/p&gt;

&lt;div&gt;
$$L(f)=\int_{a}^{b}\left|f^{\prime}(t)\right| d t$$
&lt;/div&gt;

&lt;p&gt;It’s a short and disgusting algebraic leap to apply this to an elliptic curve. We will use polar coordinates. The length traversed along the ellipse of eccentricity $k$ by sweeping out an angle $\phi$ is&lt;/p&gt;

&lt;div&gt;
$$E(\phi, k)=\int_{0}^{\phi} \sqrt{1-k^{2} \sin ^{2} \theta} \mathrm{d} \theta$$
&lt;/div&gt;

&lt;p&gt;This is called the &lt;em&gt;elliptic integral of the second kind&lt;/em&gt;. Well, technically it’s a scalar multiple of the elliptic integral of the second kind, but I don’t really care. It’s worth noting here that we made the arc length a function of both $\phi$ and the parameter $k$. I introduce this notation because it is standard, but we’ll treat elliptic integrals as single-variable functions, $E(\phi)$ from now on.&lt;/p&gt;

&lt;p&gt;Anyways, here is the real question: why are we talking about arc length of an ellipse at all? Who cares?&lt;/p&gt;

&lt;p&gt;That is an excellent question. Why did the astronomers of the early 1800s such as Gauss get so obsessed with arc length of the ellipse?&lt;/p&gt;

&lt;p&gt;Here is one rationalization. When Gauss was working with ellipses, he probably thought about generalizing the mathematical methods used on circles, the simplest kind of ellipse.&lt;/p&gt;

&lt;p&gt;One of the virtues of circles is that they are described so neatly by standard trig functions. One key example: parameterizing a circle with the trig functions is extremely convenient: $(\cos{t}, \sin{t})$. It’s even more convenient when you consider that $\cos{t} = \frac{d}{dt}\sin{t}$, so the parameterization can be neatly derived from $\sin$ alone.&lt;/p&gt;

&lt;p&gt;How might we create an analogous concept of $\sin$ and $\cos$ for an ellipse instead of the circle? As we’ve discussed before, the clearest picture of the trig functions comes from inverting the series expansion of their inverses. For example, with $\sin{x}$,&lt;/p&gt;

&lt;div&gt;
$$\text{sin}^{-1}x=\int_{0}^{x}\frac{dt}{\sqrt{1-t^2}}$$
&lt;/div&gt;

&lt;p&gt;This inverse has a series expansion, and the series expansion can be inverted fairly easily to give us a series expansion for $\sin{x}$.&lt;/p&gt;

&lt;p&gt;But wait! Here is an interesting observation: $\text{sin}^{-1}x$ &lt;em&gt;is the arc length of the circle&lt;/em&gt;. In fact, that’s why it’s commonly called “arcsin.” So $\sin$ and $\cos$ can be derived from the arc length integral!&lt;/p&gt;

&lt;p&gt;So maybe, just maybe, Gauss thought about treating the elliptic integral of the second kind (i.e. the arc length of an ellipse) as if it were a generalized $\text{sin}^{-1}$ built from an ellipse. This obviously sounds like it could yield valuable tools for working with ellipses.&lt;/p&gt;

&lt;p&gt;As a consequence, it seems very obvious that we would now be interested in the inverse of elliptic integrals of the second kind. This is because the inverse of the elliptic integral would actually be analogous to $\sin{x}$, while the integral itself is analogous to $\text{sin}^{-1} x$.&lt;/p&gt;

&lt;p&gt;Additionally, we can see why Gauss (and Jacobi and Abel after him) would be interested in fitting complex numbers into the picture. They reduced standard trig quite neatly, so perhaps they would do the same here!&lt;/p&gt;

&lt;p&gt;It’s clear that elliptic integrals of the second kind and their inverses would be of practical interest among both mathematicians and physicists. But this isn’t the whole story. Indeed, there are also a first and third kind of elliptic integral. These, too, appear in physics problems. We’ll look at an example of the first kind next.&lt;/p&gt;

&lt;h3 id=&quot;first-encounter-with-another-kind-of-elliptic-integral-&quot;&gt;First Encounter With Another Kind of Elliptic Integral &lt;a name=&quot;2.2&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Before we’d go on, I’d like to present one more major definition. An &lt;em&gt;elliptic function&lt;/em&gt; is the inverse of an elliptic integral. I don’t who chose such a vague name for this concept. Just keep in mind our goal of generalizing trigonometry to other curves. The elliptic functions and elliptic integrals are analogies to $\sin{x}$ and $\text{sin}^{-1} x$, respectively. Anyways, back to the story.&lt;/p&gt;

&lt;p&gt;While ellipses were relevant to astronomers, physicists and mathematicians were running into different curves in their own studies. Many of these curves had arc length integrals which resembled the arc lengths of circles and ellipses.&lt;/p&gt;

&lt;p&gt;Gauss, among others, realized the common theme and took advantage of it. In fact, his first successful investigations of elliptic functions used a simple non-ellipse curve which we will explore now.&lt;/p&gt;

&lt;p&gt;Before we go on, I warn you that our poor choice of vocabulary is going to haunt us from here on out. The first and third kinds of elliptic integral are derived from curves that are not ellipses. For this reason, the nomenclature “elliptic integral” is disappointingly misleading.&lt;/p&gt;

&lt;p&gt;But enough general talk. Let’s get an example. I present to you the equation for the &lt;em&gt;lemniscate of Bernoulli&lt;/em&gt;:&lt;/p&gt;

&lt;div&gt;
$$\left(x^{2}+y^{2}\right)^{2}=a^2(x^{2}-y^{2})$$
&lt;/div&gt;

&lt;p&gt;It can also be represented with polar coordinates:&lt;/p&gt;

&lt;div&gt;
$$r^{2}=\cos 2 \theta$$
&lt;/div&gt;

&lt;p&gt;This monstrous creation was derived by &lt;a href=&quot;https://books.google.com/books/about/Mathematical_Thought_from_Ancient_to_Mod.html?id=aO-v3gvY-I8C&quot;&gt;Bernoulli while studying elastica (ch 19, sec 4)&lt;/a&gt;. We can also define the lemniscate in a geometric way. Given two foci, $F_1$ and $F_2$, and a distance $2a$ between them, then the lemniscate of Bernoulli is the set of all points P such that $\vert PF_1 \vert * \vert PF_2 \vert = a^2$.&lt;/p&gt;

&lt;p&gt;But enough talk. Let’s look at some pictures (courtesy of Wikipedia):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;wikipedia.com&quot;&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/5/57/Lemniskate_bernoulli2.svg/660px-Lemniskate_bernoulli2.svg.png&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This handsome bastard is the lemniscate, and we’re once again interested in the formula for its arc length.&lt;/p&gt;

&lt;p&gt;We can parameterize this curve like before and use this parameterization to derive the arc length. If you’re interested in this process, see &lt;a href=&quot;https://mathworld.wolfram.com/Lemniscate.html&quot;&gt;this link&lt;/a&gt; or the exercises of section 12.3 in &lt;em&gt;Mathematics and its History&lt;/em&gt; in the sources below.&lt;/p&gt;

&lt;p&gt;The punchline is that the arc length of the lemniscate would be either&lt;/p&gt;

&lt;div&gt;
$$\int_{0}^{x} \frac{d t}{\sqrt{1-t^{4}}}$$
&lt;/div&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;div&gt;
$$\sqrt{2} a \int_{0}^{\tau}[3-\cos (2 t)]^{-1 / 2} d t$$
&lt;/div&gt;

&lt;p&gt;depending on your parameterization. Either way, it so happens that his gives us an &lt;em&gt;elliptic integral of the first kind&lt;/em&gt; (well, a scalar multiple of it). As a gentle reminder, “elliptic” is a misnomer, since we’re now talking about some other kind of curve.&lt;/p&gt;

&lt;p&gt;You may be wondering why Gauss would take interest in this curve. Although similar, it’s not obviously a simpler than elliptic integrals of the second kind. Well, one motivation might be because these particular integrals had already been studied by others, including Euler and Fagnano. As an example, Fagnano generalized the fact that&lt;/p&gt;

&lt;div&gt;
$$2\text{sin}^{-1}(x) = \text{sin}^{-1}(2x\sqrt{1-x^2})$$
&lt;/div&gt;

&lt;p&gt;to the analogous $\text{sin}^{-1}$ defined on the lemniscate of Bernoulli. We’ll denote the “lemniscatic inverse sine” as $\text{sl}^{-1}(x)$, and it’s defined using the arc length integral:&lt;/p&gt;

&lt;div&gt;
$$\text{sl}^{-1}(x)=\int_{0}^{x} \frac{d t}{\sqrt{1-t^{4}}}$$
&lt;/div&gt;

&lt;p&gt;Then Fagnano derived the fact that&lt;/p&gt;

&lt;div&gt;
$$2\text{sl}^{-1}(x) = \text{sl}^{-1}(2 x \sqrt{1-x^{4}} /(1+x^{4}))$$
&lt;/div&gt;

&lt;p&gt;This clear analogue to $\text{sin}^{-1}$ suggested that there may be utility in exploring these generalized trig functions.&lt;/p&gt;

&lt;p&gt;So we can see one reason Gauss might have been tempted to investigate this integral. The integral obviously had practical properties similar to standard trigonometry, and it was similar to integrals which appeared in his own practical work.&lt;/p&gt;

&lt;p&gt;Rather than explore an example of the third kind of elliptic integral, we’ll next discuss Legendre’s effort to describe the entire set of integrals which appear similar to the definition of $\text{sin}^{-1}$. We won’t spend much more time discussing elliptic integrals. Instead, we will discuss their inverses, elliptic functions. Between 1800 and 1830, mathematicians slowly came to realize that elliptic functions had even more spectacular properties than elliptic integrals.&lt;/p&gt;

&lt;h3 id=&quot;the-classification-of-elliptic-integrals-&quot;&gt;The Classification of Elliptic Integrals &lt;a name=&quot;2.3&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;We have described two kinds of elliptic integral, but we haven’t clearly explained why they are distinct and how we’re categorizing them. This problem was addressed by Legendre, &lt;a href=&quot;https://books.google.com/books/about/M%C3%A9moire_sur_les_transcendantes_elliptiq.html?id=I4laAAAAcAAJ&quot;&gt;who described the integrals of interest generally and used this to show any case could be reduced to one of three kinds&lt;/a&gt;. You can also get info on this in section 3.2 of &lt;a href=&quot;https://www.springer.com/gp/book/9783319237145&quot;&gt;this book&lt;/a&gt;, which I’m practically quoting here.&lt;/p&gt;

&lt;p&gt;Legendre defined elliptic integrals as any integral,&lt;/p&gt;

&lt;div&gt;
$$\int \frac{P(x) d x}{R(x)}$$
&lt;/div&gt;

&lt;p&gt;where $P$ is a rational function of $x$ and $R$ is the square root of a degree 3 or 4 polynomial of $x$. Everything we’ve discussed so far is a particular case of this integral.&lt;/p&gt;

&lt;p&gt;Legendre showed that any integral of this form can be simplified to the form&lt;/p&gt;

&lt;div&gt;
$$\int \frac{Q(t) d t}{\sqrt{\left(1-t^{2}\right)\left(1-c^{2} t^{2}\right)}}$$
&lt;/div&gt;

&lt;p&gt;where $Q$ is another rational function. You can substitute $t=\sin{\phi}$ to get&lt;/p&gt;

&lt;div&gt;
$$\int \frac{Q(\sin{\phi}) d \phi}{\sqrt{\left(1-c^{2} \sin ^{2} \phi\right)}}$$
&lt;/div&gt;

&lt;p&gt;Here’s the interesting punchline: any elliptic integral can be represented as a linear combination of three specific elliptic integrals and elementary functions. We’ve seen two of the three kinds of elliptic integral, and you can view all three kinds &lt;a href=&quot;https://en.wikipedia.org/wiki/Elliptic_integral&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;On the one hand, you may be thinking “oh, wow, that is somewhat surprising that all these integrals are simply linear combinations of three specific integrals.” On the other hand, you may be thinking “we’ve gotten pretty far out into the weeds. Weren’t we talking about astronomy?”&lt;/p&gt;

&lt;p&gt;Yes, we are departing from astronomy to a more abstract problem. However, we are not that far away, and our actions will have consequences in astronomy and other fields. Let’s address the practical implications of Legendre’s discovery. Firstly, keep in mind that this was an era before calculators, and most important calculations relied on transcendental functions such as $\sin$, $log$, or elliptic integrals.&lt;/p&gt;

&lt;p&gt;These transcendental functions have no convenient algebraic form, so values must be approximated using infinite series. This is incredibly inconvenient, so tables of pre-calculated values were made, and &lt;a href=&quot;https://en.wikipedia.org/wiki/Trigonometric_functions#Sum_and_difference_formulas&quot;&gt;identities&lt;/a&gt; were leveraged to reuse approximations.&lt;/p&gt;

&lt;p&gt;Legendre’s classification showed that identities for the three kinds of elliptic integrals can be reused to help us calculate any elliptic integral problems. You don’t need to derive identities for every elliptic integral. Just reduce it to the three fundamental kinds and use their identities.&lt;/p&gt;

&lt;p&gt;Indeed, quoting &lt;a href=&quot;https://www.springer.com/gp/book/9783319237145&quot;&gt;our source&lt;/a&gt;: “For a new function to be accepted into mathematics it has to be shown to be useful, and if it is to be applied then its values have to be known numerically. Legendre devoted Book III (1816) to the production of several sets of tables…, and then put the new functions to work solving geometrical and mechanical problems.”&lt;/p&gt;

&lt;p&gt;So Legendre’s abstract discovery of classifications did indeed relate to progress in practical matters. Diverse physical problems were reduced into the three kinds of elliptic integral, allowing us to reuse calculations and focus on more general theory.&lt;/p&gt;

&lt;p&gt;A clarification before we go on. Legendre showed we can reduce any elliptic integral to the three kinds of elliptic integral and re-use their identities for calculating values. However, the three kinds of elliptic integral still have constants that could be different depending on the context. This is why identities are useful, but we can’t reuse of tables of values.&lt;/p&gt;

&lt;p&gt;We will see later that Jacobi extended Legendre’s work by finding relations between elliptic integrals of the same kind but which have differing constants.&lt;/p&gt;

&lt;p&gt;As an aside, I myself have stumbled upon elliptic integrals while modeling with electrodynamics. I can verify that they do exist, even in modern physics problems.&lt;/p&gt;

&lt;p&gt;The discovery of these classifications is not obvious, and you can find a more technical overview of Legendre’s methods &lt;a href=&quot;https://projecteuclid.org/download/pdf_1/euclid.chmm/1428686948&quot;&gt;at the start of this paper&lt;/a&gt; as well as in &lt;a href=&quot;https://books.google.com/books/about/M%C3%A9moire_sur_les_transcendantes_elliptiq.html?id=I4laAAAAcAAJ&quot;&gt;Legendre’s original paper in French&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;You might be wondering, “How did Legendre come up with this general definition for elliptic integrals?” I, too, am wondering this. I can only provide loose motivations. Many mathematicians were focused on finding explicit solutions of integrals (obviously a practical pursuit). Rational equations and square roots of rational equations occurred in many popular physics problems, and the ones which had not been solved explicitly had a reputation.&lt;/p&gt;

&lt;p&gt;There’s also a key influence. It had been discovered by Fagnano that sometimes the difference between unsolvable integrals was solvable. This led Euler to investigate the general question of when apparently-unsolvable integrals had tractable differences. Euler formulated this differential equation to represent the problem:&lt;/p&gt;

&lt;div&gt;
$$\frac{d y}{\sqrt{A^{\prime}+B^{\prime} y+C^{\prime} y^{2}+D^{\prime} y^{3}+E^{\prime} y^{4}}}=\frac{d x}{\sqrt{A+B x+C x^{2}+D x^{3}+E x^{4}}}$$
&lt;/div&gt;

&lt;p&gt;Euler’s solutions implied many unsolvable integrals were related algebraically. He also developed many of the substitution methods Legendre would further elaborate in his theory. I also imagine that Legendre spent a lot of time transforming integrals, as did his peers. Constraining the degree in the square root to 3 or 4 was probably due partly to the fact that any lower degree was considered “trivial” and any higher degree couldn’t be generally factored or handled with ease. For specifics, see &lt;a href=&quot;https://www.buffaloschools.org/site/handlers/filedownload.ashx?moduleinstanceid=2636&amp;amp;dataid=17548&amp;amp;FileName=Mathematics%20and%20Its%20History%20Third%20Edition%20by%20John%20Stillwell.pdf&quot;&gt;12.5 (and problem 12.5.1 in that section) of this source&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Anyways, what I’m really saying is “blame it on the geist.” I’d like a more fulfilling answer eventually, but for now, let’s keep moving.&lt;/p&gt;

&lt;p&gt;We’ve now explored the discovery, motivation, and classification of elliptic integrals, and it’s time to start another chronological step forward and talk about their inverses, elliptic functions.&lt;/p&gt;

&lt;h2 id=&quot;elliptic-functions-the-other-side-of-the-coin-&quot;&gt;Elliptic Functions: The Other Side of the Coin &lt;a name=&quot;3.0&quot;&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;While Fagnano, Euler, and others were discovering interesting, trig-like properties of elliptic integrals during the 1700s, it wasn’t until the start of the 1800s that Gauss began investigating the inverse of elliptic integrals, elliptic functions. For the record, I am now going to stop reminding you that elliptic functions are the inverse of elliptic integrals.&lt;/p&gt;

&lt;p&gt;Although Gauss made many substantial conclusions about elliptic functions, he didn’t publish his work until around the 1820s. He was spurred to action when Jacobi and Abel sniped many of his conclusions in their own publications.&lt;/p&gt;

&lt;p&gt;Our first goal will be to step through Gauss’s investigations of the elliptic function derived from the lemniscate. We’ll look at his methods and motivations before moving on to Abel and Jacobi, the last key players in this era.&lt;/p&gt;

&lt;h3 id=&quot;gauss-and-the-lemniscate-sine-&quot;&gt;Gauss and the Lemniscate Sine &lt;a name=&quot;3.1&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;We’ve already discussed that Gauss was interested in elliptic integrals as generalizations of the trig functions to curves beyond the circle. We also discussed that his investigations eventually focused on the lemniscate of Bernoulli, possibly because Euler and Fagnano had recently shown the integral had additive properties similar to $\text{sin}^{-1}$.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;https://en.wikipedia.org/wiki/Trigonometric_functions#Sum_and_difference_formulas&quot;&gt;trigonometric functions have many additive identities&lt;/a&gt;, and our example with Euler and Fagnano is only one identity for one elliptic integral. The identity was similar to the double-angle formula for $\text{sin}^{-1}$.&lt;/p&gt;

&lt;p&gt;Gauss’s investigations were focused on creating more of these identities. One reason was certainly to verify that the generalization resembled the standard trig functions. However, a more compelling motivation was that, in the era before computation, trigonometry tables were used when calculating with the trigonometric functions, and these were &lt;a href=&quot;https://en.wikipedia.org/wiki/Trigonometric_tables#Half-angle_and_angle-addition_formulas&quot;&gt;generated using angle addition identities&lt;/a&gt;. Thus these proofs would go a long way in making the new functions practical.&lt;/p&gt;

&lt;p&gt;To build these identities, he began with the lemniscatic integral and defined the elliptic function $sl(x)$ as its inverse,&lt;/p&gt;

&lt;div&gt;
$$sl(x)=z \quad \text{such that} \quad x=\int_{0}^{z} \frac{d t}{\sqrt{\left(1-t^{4}\right)}}$$
&lt;/div&gt;

&lt;p&gt;Thus $sl(x)$ is analogous to $\sin{x}$, and we call it the &lt;em&gt;lemniscate sine&lt;/em&gt;. Gauss actually created a tangible representation of $sl(x)$ using infinite series. According to &lt;a href=&quot;https://www.springer.com/gp/book/9783319237145&quot;&gt;9.2 in this source&lt;/a&gt;, “ He treated the integrand as a function of $t$, expanded it as a power series and integrated it term by term, thus obtaining $x$ as a power series in$z$. He then inverted this series to obtain $z$ as a power series in $x$,thus inverting the lemniscatic integral.”&lt;/p&gt;

&lt;p&gt;Firstly, let’s address periodicity. If $\omega$ is &lt;a href=&quot;https://home.ie.cuhk.edu.hk/~wkshum/wordpress/?p=1193&quot;&gt;the lemniscatic constant&lt;/a&gt; (basically the analogy of $\pi$ to our new curve), then $sl(x)$ is periodic with period $2\omega$. You can then define the analogue to $\cos{x}$ as $sl(\omega/2 - x)$.&lt;/p&gt;

&lt;p&gt;So we’ve got our shiny new periodic transcendental functions derived from the lemniscate. What kind of identities can we derive? One striking identity Gauss found was:&lt;/p&gt;

&lt;div&gt;
$$s l^{2}+c l^{2}+c l^{2} s l^{2}=1 $$
&lt;/div&gt;

&lt;p&gt;Which seems vaguely reminiscent of the Pythagorean identity. However, the most interesting features of $sl(x)$ were discovered when trying to create angle division formulas. We’ll discuss this in the next section to motivate the appearance of complex numbers&lt;/p&gt;

&lt;h3 id=&quot;double-double-toil-and-trouble-angle-identities-and-complex-numbers-&quot;&gt;Double, Double, Toil and Trouble: Angle Identities and Complex Numbers &lt;a name=&quot;3.2&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Most people are familiar with the &lt;a href=&quot;https://en.wikipedia.org/wiki/List_of_trigonometric_identities#Multiple-angle_formulae&quot;&gt;multiple-angle formulae&lt;/a&gt; for $\sin$ and $\cos$. They’re computationally convenient, such as if you needed $\cos{2\theta}$ and already knew $\cos{\theta}$. However, you can also use these identities to work backwards. Suppose you already knew $\cos{\phi}$ and wanted $\cos{\frac{1}{2}\phi}$. Then you could let $\theta=\frac{1}{2}\phi$ and plug this into the double angle identity $\cos{2\theta}=2\cos{\theta}^2-1$. &lt;a href=&quot;https://brownmath.com/twt/double.htm&quot;&gt;You end up solving a quadratic equation with two real roots&lt;/a&gt;. Which root you use depends on which quadrant you’re in. We call this the &lt;em&gt;half angle formula&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;The process is similar when you want $\frac{1}{3}\phi$, although it gets more complicated. For $\sin$, we use the identity&lt;/p&gt;

&lt;div&gt;
$$\sin (3 \theta)=3 \sin \theta-4 \sin ^{3} \theta$$
&lt;/div&gt;

&lt;p&gt;and plug in $\theta = \frac{1}{3}\phi$ to get&lt;/p&gt;

&lt;div&gt;
$$\sin (\phi)=3 \sin {\frac{1}{3}\phi}-4 \sin ^{3} \frac{1}{3}\phi$$
&lt;/div&gt;

&lt;p&gt;If we make the substitutions $x=\sin{\phi}$ (our known variable) and $y=\sin {\frac{1}{3}\phi}$, then a little rearranging brings us to the equation&lt;/p&gt;

&lt;div&gt;
$$y^{3}-\frac{3}{4} y+\frac{x}{4}=0$$
&lt;/div&gt;

&lt;p&gt;This is called the depressed cubic, and we can solve it using &lt;a href=&quot;https://en.wikipedia.org/wiki/Cubic_equation#Cardano's_formula&quot;&gt;Cardano’s formula&lt;/a&gt;. It will have three real-valued roots, one of which is the desired value depending on context.&lt;/p&gt;

&lt;p&gt;So, now that we’ve seen angle division for $\sin$, what does it look like for $sl$?&lt;/p&gt;

&lt;p&gt;Well, it turns out that Gauss derived the triple angle identity:&lt;/p&gt;

&lt;div&gt;
$$s l(3 x)=\frac{sl(x)\left(3-6 sl^{4}(x)-sl^{8}(x)\right)}{1+6 sl^{4}(x)-3 sl^{8}(x)}$$
&lt;/div&gt;

&lt;p&gt;This is a big problem for us. If we were to construct a formula for $sl(\frac{1}{3}x)$, it would end up being an equation of degree 9. This is odd, since $\sin$ was only degree 3! In fact, for the half angle formula, $\sin$ is of degree 2, and $sl$ ends up being degree 4.&lt;/p&gt;

&lt;p&gt;The general trend here is that if each of the angle division formulae have degree $n$ for $\sin$, then they’re going to have degree $n^2$ for $sl$. This is a very strange development.&lt;/p&gt;

&lt;p&gt;It turns out that for $sl$, only $n$ of the roots are real-valued (just like $\sin$), while the other $n^{2}-n$ are complex.&lt;/p&gt;

&lt;p&gt;Now, Gauss was performing these investigations at a time when the fundamental theorem of algebra had just been discovered. To Gauss, these complex roots must have set off alarms in his head. They suggested that we’re not getting the full picture of $sl(x)$ by treating it as a real-valued function. A week after Gauss noted the $n^2$ roots in his journal, he had developed an extension of $sl(x)$ to the complex numbers.&lt;/p&gt;

&lt;p&gt;So how do we go about this extension? Well, Gauss started with the elliptic integral and simply plugged in $i$ to see what would happen. Simple complex algebra showed that&lt;/p&gt;

&lt;div&gt;
$$\frac{d(i t)}{\sqrt{1-(i t)^{4}}}=i \frac{d t}{\sqrt{1-t^{4}}}$$
&lt;/div&gt;

&lt;p&gt;So our integral behaves identically for imaginary values. From this, we can conclude that&lt;/p&gt;

&lt;div&gt;
$$\int^{i\phi}_{0} \frac{d(t)}{\sqrt{1-t^{4}}}=i \int^{\phi}_{0} \frac{d t}{\sqrt{1-t^{4}}}$$
&lt;/div&gt;

&lt;p&gt;and thus&lt;/p&gt;

&lt;div&gt;
$$sl(ix) = isl(x)$$
&lt;/div&gt;

&lt;p&gt;It’s my understanding that Jacobi is acknowledged as the first to use this fact as well as the addition properties of $sl(x)$ in order to extend it to the entire complex plane. We won’t go further into this here. &lt;a href=&quot;https://books.google.com/books/about/Mathematical_Thought_from_Ancient_to_Mod.html?id=aO-v3gvY-I8C&quot;&gt;See chapter 27, section 6&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;But wait! We said earlier that $sl$ is periodic with period $2\omega$, i.e. $sl(x)=sl(x+2\omega)$. We &lt;a href=&quot;https://home.ie.cuhk.edu.hk/~wkshum/wordpress/?p=1193&quot;&gt;derived this period using the lemniscatic integral&lt;/a&gt;. Since we have just shown our integral behaves identically for imaginary values, we can now conclude that $i2\omega$ is a period along the imaginary values as well, i.e.&lt;/p&gt;

&lt;div&gt;
$$sl(x+(m+i n) 2 \omega)=sl (x)$$
&lt;/div&gt;

&lt;p&gt;That means the elliptic function has two distinct periods! These functions were the first ever discovered with this property.&lt;/p&gt;

&lt;p&gt;Regarding the $n^2$ roots of the 1/3 angle formula, &lt;a href=&quot;https://www.springer.com/gp/book/9783319237145&quot;&gt;this source&lt;/a&gt; says in section 7.4 “Once the elliptic function is treated as a function of a complex variable, which displays its double periodicity, the values of $u$ that satisfy the equation for $sl(u / 3)$ will all clearly be of the form $u_{0}+(m \omega+\tilde{m} \tilde{\omega}) / 3$, and so there are 9 of them. This makes it clear why the number of solutions is unexpectedly large.”&lt;/p&gt;

&lt;p&gt;As detailed in &lt;a href=&quot;https://www.springer.com/gp/book/9783319237145&quot;&gt;9.2 of this book&lt;/a&gt;, Gauss used infinite series representation as well as the generalized trig identities to work out values of $sl(x)$ more generally. It was already known that $sl(\omega) = 0$ (which follows while deriving $\omega$), and this periodically-repeating zero was very useful to calculating other values of $sl(x)$.&lt;/p&gt;

&lt;p&gt;During these calculations, Gauss found many numerical connections to $\pi$, among other things, which convinced him that $sl(x)$ and elliptic functions in general were very fundamental mathematical objects.&lt;/p&gt;

&lt;p&gt;So we have finally met our first elliptic function and learned some of its genuinely unique properties. We’ll close with a very soft summary of Jacobi and Abel’s work on the topic.&lt;/p&gt;

&lt;h2 id=&quot;jacobis-identities-expansions-and-theta-functions-&quot;&gt;Jacobi’s Identities, Expansions, and Theta Functions &lt;a name=&quot;4.0&quot;&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;We will discuss the soft historical overview of Jacobi’s work before reviewing any math. This is useful because Jacobi’s work, while practically motivated, is dense and rambling. They key innovations are often quite unexpected and tangential consequences of earlier investigations.&lt;/p&gt;

&lt;p&gt;As we previously saw, there were two hot topics in the study of elliptic functions. One was generalizing trigonometric identities to elliptic functions. The other was relating elliptic functions to each other (such as Legendre’s classifications).&lt;/p&gt;

&lt;p&gt;Jacobi’s work was initially focused on the latter. Recall that Legendre had related all elliptic integrals to three fundamental integrals. However, each of these three integrals still contained constants that could take different values depending on the context. We call these constants &lt;em&gt;moduli&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Jacobi was searching for identites to relate two elliptic integrals of the same kind but which had different moduli. We will call these identities &lt;em&gt;transformations&lt;/em&gt;. This was a refinement of Legendre’s work, and its allure was partly in allowing us to reuse calculated values for one integral by transforming them algebraically to another integral of the same kind.&lt;/p&gt;

&lt;p&gt;Early in his investigations, Jacobi discovered some transformations of this sort existed. Further, the transformation used only substitution of an elementary equation. Thus, many elliptic integrals with differing moduli were now explicitly related.&lt;/p&gt;

&lt;p&gt;The transformations were built using a ratio of two polynomials, $U/V$, with either degree 3 or degree 5. Jacobi wondered if he could find similar transformations for other degrees.&lt;/p&gt;

&lt;p&gt;In the Fundamenta Nova, Jacobi revealed that such transformations exist for any arbitrary degree. This meant any elliptic integral could be transformed to have infinitely many other moduli.&lt;/p&gt;

&lt;p&gt;Jacobi’s investigation depended on the perspective from elliptic functions. He created many identities between elliptic functions. Most importantly, he later realized one of these identities could be used to create an infinite series expansion for elliptic functions in terms of $\sin$.&lt;/p&gt;

&lt;p&gt;This expansion was very practical for both theoretical and computational purposes. He also noticed that this infinite series could be broken down algebraically into simple components, which he called &lt;em&gt;theta functions&lt;/em&gt;. All of the elliptic functions were different algebraic combinations of theta functions.&lt;/p&gt;

&lt;p&gt;The realization that elliptic functions were only combinations of simpler theta functions was profound. Studying theta functions was far more convenient and gave direct insight about elliptic functions.&lt;/p&gt;

&lt;p&gt;Jacobi’s transformations were impressive algebraic feats. Some of them are extremely complex, and his writing style was notoriously opaque. He liked showing results more than their derivations.&lt;/p&gt;

&lt;p&gt;Thankfully, we are blessed that we do not need to read most of his work.&lt;/p&gt;

&lt;p&gt;But talk is cheap. Let’s see the mathematics that led Jacobi down this rabbit-hole.&lt;/p&gt;

&lt;h3 id=&quot;warmup-jacobis-notation-&quot;&gt;Warmup: Jacobi’s Notation &lt;a name=&quot;4.1&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;We’ll start by defining the elliptic functions as Jacobi referred to them. These will be similar to before, except Jacobi is more clear about substitutions. He defined an elliptic function using an elliptic integral of the first kind:&lt;/p&gt;

&lt;div&gt;
$$\text{If } \int_{0}^{\varphi} \frac{d \varphi}{\sqrt{1-k^{2} \sin ^{2} \varphi}}=u\text{, then define } \varphi=\operatorname{am} u$$
&lt;/div&gt;

&lt;p&gt;We call the constant $k$ the &lt;em&gt;modulus&lt;/em&gt; and $\varphi$ is called the &lt;em&gt;amplitude&lt;/em&gt;. Recall that we got to this form of elliptic function &lt;a href=&quot;https://en.wikipedia.org/wiki/Elliptic_integral#Incomplete_elliptic_integral_of_the_first_kind&quot;&gt;by making the substitution&lt;/a&gt; $t=\sin{\varphi}$, so he defined the un-substituted elliptic function as well:&lt;/p&gt;

&lt;div&gt;
$$\text{If } u=\int_{0}^{x} \frac{d x}{\sqrt{\left(1-x^{2}\right)\left(1-k^{2} x^{2}\right)}}\text{, then } x=\sin \operatorname{am} u$$
&lt;/div&gt;

&lt;p&gt;Apart from $\operatorname{am}$, he defined a $\operatorname{coam}$ and both of their derivatives, but we shouldn’t need those for our purposes.&lt;/p&gt;

&lt;p&gt;He defined some variables we will be using, such as the &lt;em&gt;quarter-period&lt;/em&gt;, $K$:&lt;/p&gt;

&lt;div&gt;
$$\int_{0}^{1} \frac{d x}{\sqrt{\left(1-x^{2}\right)\left(1-k^{2} x^{2}\right)}}=\int_{0}^{\frac{\pi}{2}} \frac{d \varphi}{\sqrt{1-k^{2} \sin ^{2} \varphi}}=K$$
&lt;/div&gt;

&lt;p&gt;Which is obviously related to the $\omega$ we’ve used previously.&lt;/p&gt;

&lt;p&gt;Finally, he defined the &lt;em&gt;complements&lt;/em&gt; of $k$ and $K$, which are used when relating $\operatorname{am}$ and $\operatorname{coam}$, among other things. The complements were defined as:&lt;/p&gt;

&lt;div&gt;
$$k^{\prime} \text{ such that } k k+k^{\prime} k^{\prime}=1$$
&lt;/div&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;div&gt;
$$K^{\prime}=\int_{0}^{\frac{\pi}{2}} \frac{d \varphi}{\sqrt{1-k^{\prime} k^{\prime} \sin ^{2} \varphi}}$$
&lt;/div&gt;

&lt;p&gt;Although you may not understand exactly how all of these pieces fit together, you should try to believe intuitively that these parameters are useful for investigating elliptic functions. In &lt;a href=&quot;https://download.uni-mainz.de/mathematik/Algebraische%20Geometrie/Euler-Kreis%20Mainz/Jacobi_Fundamenta%20Nova.pdf&quot;&gt;Jacobi’s paper&lt;/a&gt;, he defined these on page 34 and then immediately used them to derive a large collection of identities.&lt;/p&gt;

&lt;h3 id=&quot;jacobis-transformation-between-elliptic-functions-&quot;&gt;Jacobi’s Transformation Between Elliptic Functions &lt;a name=&quot;4.2&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;We’re going to loosely review the foundational concepts before moving to a very special identity on page 68 of Jacobi’s &lt;em&gt;Fundamenta Nova&lt;/em&gt;. Once we understand this identity, we’ll see how it was used to create an infinite series expansion.&lt;/p&gt;

&lt;p&gt;This summary skims many concepts in Jacobi’s work. See &lt;a href=&quot;https://link.springer.com/article/10.1007/s00407-013-0131-3&quot;&gt;this paper&lt;/a&gt; for more details, or read Fundamenta Nova yourself.&lt;/p&gt;

&lt;p&gt;On page 21, Jacobi introduced the premise of transforming between elliptic integrals with different moduli. The transformation was a substitution using a ratio of polynomials, $U/V$, with a degree $n$. He claimed the general case: that such a transformation existed for any degree $n$. He then explored some of the particular cases of values of $n$.&lt;/p&gt;

&lt;p&gt;What’s most important here is to see the general effect of these transformations. In particular, the elliptic integral with modulus $k$ could be transformed to another with modulus $\lambda$ such that&lt;/p&gt;

&lt;div&gt;
$$\frac{d y}{\sqrt{\left(1-y^{2}\right)\left(1-\lambda^{2} y^{2}\right)}}=\frac{d x}{M \sqrt{\left(1-x^{2}\right)\left(1-k^{2} x^{2}\right)}}$$
&lt;/div&gt;

&lt;p&gt;Where $M$ is a scalar. A transformation of this kind could be derived for every positive integer $n$.  Rather than exploring the proof and construction of these transformations, we’re most interested in the practical question: how do we get values of $\lambda$ and $M$ for a given degree $n$?&lt;/p&gt;

&lt;p&gt;Around page 34, Jacobi defined our elliptic function, $\operatorname{am}$, using an elliptic integral of the first kind with some modulus, $k$. This is the “starting point,” i.e. elliptic integral we will be transforming.&lt;/p&gt;

&lt;p&gt;On page 40, Jacobi showed that one can describe the properties of a transformation with degree $n$ using the elliptic functions of our starting point, modulus $k$. Most importantly, he shows the elliptic functions can be used to determine the resulting modulus, $\lambda$, and the scalar multiple, $M$.&lt;/p&gt;

&lt;p&gt;We’re going to snag those particular results here and then move on. To make this substitution, Jacobi picked $n$, an arbitrary odd integer, as well as $m$ and $m^{\prime}$, arbitrary positive or negative integers which both divide $n$ and have no common factors. Then he defined&lt;/p&gt;

&lt;div&gt;
$$\omega=\frac{m K+m^{\prime} i K^{\prime}}{n}$$
&lt;/div&gt;

&lt;p&gt;He used this to calculate $M$ in terms of the elliptic functions of modulus $k$:&lt;/p&gt;

&lt;div&gt;
$$M=(-1)^{\frac{n-1}{2}}\left\{\frac{\sin \operatorname{coam} 4 \omega \sin \operatorname{coam} 4 \omega \cdots \sin \operatorname{coam} 2(n-1) \omega}{\sin \operatorname{am} 4 \omega \sin \operatorname{am} 4 \omega \cdots \sin \operatorname{am} 2(n-1) \omega}\right\}^2$$
&lt;/div&gt;

&lt;p&gt;He also related the modulus $\lambda$ to the modulus $k$:&lt;/p&gt;

&lt;div&gt;
$$\lambda=k^{n}[\sin \operatorname{coam} 4 \omega \sin \operatorname{coam} 4 \omega \cdots \sin \operatorname{coam} 2(n-1) \omega]^{4}$$
&lt;/div&gt;

&lt;p&gt;The grand conclusion of this section was&lt;/p&gt;

&lt;div&gt;
$$\text{If } x=\sin{\operatorname{am}u} \text{, then } y=\frac{U}{V}=\sin{\operatorname{am}(\frac{u}{M},\lambda)}$$
&lt;/div&gt;

&lt;p&gt;Where $\sin{\operatorname{am}(\frac{u}{M},\lambda)}$ is the elliptic function generated by the modulus $\lambda$. This was a remarkably straightforward equivalence between elliptic functions with different moduli!&lt;/p&gt;

&lt;p&gt;This relationship would be used to generate other identities, some of which had surprising consequences.&lt;/p&gt;

&lt;h3 id=&quot;the-multiple-angle-identity-under-this-tranformation-&quot;&gt;The Multiple Angle Identity Under This Tranformation &lt;a name=&quot;4.3&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;By page 68, Jacobi had just finished clarifying how the complements, $k^{\prime}$ and $K^{\prime}$ behave under transformations. He found that if $\Lambda$ is the quarter-period corresponding to $\lambda$, then the transformation from the previous section implies&lt;/p&gt;

\[\Lambda = \frac{K}{nM}\]

&lt;p&gt;Keep in mind that $\Lambda$ has a complement $\Lambda^{\prime}$ just like $K$ has complement $K^{\prime}$.&lt;/p&gt;

&lt;p&gt;Having established many of the “basic” properties of transformations, Jacobi began to provide many identities regarding transformations between $k$ and $\lambda$. The one we are most interested in is remeniscent of the standard angle multiplication identities, such as the double angle and triple angle identities seen previously.&lt;/p&gt;

&lt;p&gt;NOTICE: We are going to change our notation &lt;em&gt;for the next equation only&lt;/em&gt;. This is to keep consistent with Jacobi’s notation. For the next equation, $\sin{\operatorname{am}u}$ is by default using modulus $\lambda$, and $\sin{\operatorname{am}(u,k)}$ means we are using modulus $k$. The identity is:&lt;/p&gt;

&lt;div&gt;
$$\sin \operatorname{am}(n u, k)=\frac{n M y\left(1-\frac{y^{2}}{\sin ^{2} \operatorname{am} \frac{2 i \Lambda^{\prime}}{n}}\right)\left(1-\frac{y^{2}}{\sin ^{2} \operatorname{am} \frac{4 i \Lambda^{\prime}}{n}}\right) \cdots\left(1-\frac{y^{2}}{\sin ^{2} \operatorname{am} \frac{(n-1) i \Lambda^{\prime}}{n}}\right)}{\left(1-\frac{y^{2}}{\sin ^{2} \operatorname{am} \frac{i \Lambda^{\prime}}{n}}\right)\left(1-\frac{y^{2}}{\sin ^{2} \operatorname{am} \frac{3 i \Lambda^{\prime}}{n}}\right) \cdots\left(1-\frac{y^{2}}{\sin ^{2} \operatorname{am} \frac{(n-2) i \Lambda^{\prime}}{n}}\right)}$$
&lt;/div&gt;

&lt;p&gt;Although this seems very intricate, please keep in mind the intuitive process thus far. First, Jacobi found that for some elliptic integral with modulus $k$, one can build substitutions for each natural number $n$ that equate the elliptic integral to another elliptic integral of a different modulus, $\lambda$.&lt;/p&gt;

&lt;p&gt;Then, Jacobi analyzed how elliptic functions behave under these transformations. Among other things, he discovered $\sin \operatorname{am}(n u, k)$ can be expressed in terms of the transformed function $\sin \operatorname{am}{x, \lambda)$.&lt;/p&gt;

&lt;p&gt;Next, we’ll see how Jacobi later realized this identity could be used to create an expansion of an elliptic function.&lt;/p&gt;

&lt;h3 id=&quot;using-the-multiple-angle-identity-to-get-an-expansion-&quot;&gt;Using the Multiple Angle Identity To Get an Expansion &lt;a name=&quot;4.4&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;On page 97, Jacobi struck gold. He declared the expansion of $\sin{\operatorname{am}u}$, in terms of $\sin$. The methodology is actually fairly simple and uses the identity described at the end of the previous section.&lt;/p&gt;

&lt;p&gt;As we discussed, Jacobi knew that you could always build a transformation to some other modulus by picking a positive integer value of $n$ and calculating&lt;/p&gt;

&lt;div&gt;
$$\lambda=k^{n}\left\{\sin \operatorname{coam} \frac{2 K}{n} \sin \operatorname{coam} \frac{4 K}{n} \cdots \sin \operatorname{coam} \frac{(n-1) K}{n}\right\}^{4}$$
&lt;/div&gt;

&lt;p&gt;This is a slight rephrasing of previous conclusions. He noticed that, as you pick larger values of $n$, the new modulus $\lambda$ gets closer to $0$. In fact, the limit as $n\rightarrow \infty$ is $\lambda=0$. In this case, we would have $\Gamma=\pi/2$, $\operatorname{am}(u,\lambda)=u$, and consequently $\sin\operatorname{am}(u,\lambda)=\sin{u}$.&lt;/p&gt;

&lt;p&gt;He also derived that when $n\rightarrow \infty$ we get $nM=\frac{2K}{\pi^{\prime}}$ and $\frac{\Lambda^{\prime}}{n}=\frac{\pi K^{\prime}}{2K}$, although we will avoid these details.&lt;/p&gt;

&lt;p&gt;Here is the crux. We are going to consider our multiple angle identity from the previous section as we let $n\rightarrow \infty$. However, the value we plug in to the multiple angle identity is $\frac{u}{n}$, so the left side of the identity technically looks like $\sin\operatorname{am}(n\frac{u}{n})$. If we consider the entire identity as $n\rightarrow \infty$, we can use the equivalences above to determine its new form,&lt;/p&gt;

&lt;div&gt;
$$\sin \operatorname{am} u=\frac{2 K y}{\pi} \cdot \frac{\left(1-\frac{y^{2}}{\sin ^{2} \frac{i \pi K^{\prime}}{K}}\right)\left(1-\frac{y^{2}}{\sin ^{2} \frac{2 i \pi K^{\prime}}{K}}\right)\left(1-\frac{y^{2}}{\sin ^{2} \frac{3 i \pi K^{\prime}}{K}}\right) \cdots}{\left(1-\frac{y^{2}}{\sin ^{2} \frac{i \pi K^{\prime}}{2 K}}\right)\left(1-\frac{y^{2}}{\sin ^{2} \frac{3 i \pi K^{\prime}}{2 K}}\right)\left(1-\frac{y^{2}}{\sin ^{2} \frac{5 \sin K^{\prime}}{2 K}}\right) \cdots}$$
&lt;/div&gt;

&lt;p&gt;Or, in more modern notation,&lt;/p&gt;

&lt;div&gt;
$$\sin \mathrm{am} u=\frac{2 K y}{\pi} \frac{\prod_{n=1}^{\infty}\left(1-\frac{y^{2}}{\sin ^{2} \frac{n i K^{\prime}}{2 K}}\right)}{\prod_{n=1}^{\infty}\left(1-\frac{y^{2}}{\sin ^{2} \frac{(2 n-1) i K^{\prime}}{K}}\right)}$$
&lt;/div&gt;

&lt;p&gt;So we’ve finally derived Jacobi’s infinite product expansion for an elliptic function in terms of $\sin$!&lt;/p&gt;

&lt;p&gt;Take a minute to breathe. Jacobi was absolutely crazy. The theory of transformations he built was very intimidating. As it happens, the theory itself is not mentioned often today. The most lasting result was his expansion of the elliptic function.&lt;/p&gt;

&lt;p&gt;The expansion made elliptic functions more tractable, and it was important for Jacobi’s proofs later on. In general, it opened the door for more modern analysis of elliptic functions.&lt;/p&gt;

&lt;p&gt;Because of this, you can now start to forget everything you have just learned. As long as you understand that we can represent elliptic functions with this infinite product, you are ready for modern theory.&lt;/p&gt;

&lt;h3 id=&quot;rephrasing-the-expansion-and-theta-functions-&quot;&gt;Rephrasing the Expansion and Theta Functions &lt;a name=&quot;4.5&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Jacobi was also interested in cleaning up this infinite series. One quick way to rephrase the expansion is by the use of complex values. Jacobi defined the &lt;em&gt;nome&lt;/em&gt;,&lt;/p&gt;

&lt;div&gt;
$$q=e^{\frac{-\pi k'}{K}}$$
&lt;/div&gt;

&lt;p&gt;and made the substitutions $x=\frac{\pi u}{2K}$. After some shenanigans, on page 100 he derived the expansion:&lt;/p&gt;

&lt;div&gt;
$$\sin \operatorname{am} \frac{2 K x}{\pi}=\frac{2 \pi}{k K} \sin x\left(\frac{\sqrt{q}(1+q)}{1-2 q \cos 2 x+q^{2}}+\frac{\sqrt{q^{3}}\left(1+q^{3}\right)}{1-2 q^{3} \cos 2 x+q^{6}}+\frac{\sqrt{q^{5}}\left(1+q^{5}\right)}{1-2 q^{5} \cos 2 x+q^{10}}+\cdots\right)$$
&lt;/div&gt;

&lt;p&gt;Which has a more appealing algebraic format. However, through the rest of the entire Fundamenta Nova, Jacobi wrestled with the format of this expansion quite a bit.&lt;/p&gt;

&lt;p&gt;It was not until the final sections that he defined functions which simplify this expansion. On page 196 is the section titled “Elliptic Functions Are Rational Functions. On The Functions $H$, $\Theta$ Which Take The Place Of The Numerator And The Denominator.”&lt;/p&gt;

&lt;p&gt;Jacobi had previously simplified the expansion of $\sin \operatorname{am}$ by defining two functions,&lt;/p&gt;

&lt;div&gt;
$$\frac{\Theta\left(\frac{2 K x}{\pi}\right)}{\Theta(0)}=\frac{\left(1-2 q \cos 2 x+q^{2}\right)\left(1-2 q^{3} \cos 2 x+q^{6}\right)\left(1-2 q^{5} \cos 2 x+q^{10}\right) \cdots}{\left[(1-q)\left(1-q^{3}\right)\left(1-q^{5}\right)\left(1-q^{7}\right) \cdots\right]^{2}}$$
&lt;/div&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;div&gt;
$$\frac{H\left(\frac{2 K x}{\pi}\right)}{\Theta(0)}=\frac{2 \sqrt[4]{q} \sin x\left(1-2 q^{2} \cos 2 x+q^{4}\right)\left(1-2 q^{4} \cos 2 x+q^{8}\right)\left(1-2 q^{6} \cos 2 x+q^{12}\right) \cdots}{\left[(1-q)\left(1-q^{3}\right)\left(1-q^{5}\right)\left(1-q^{7}\right) \cdots\right]^{2}}$$
&lt;/div&gt;

&lt;p&gt;These two functions let us cleanly state&lt;/p&gt;

&lt;div&gt;
$$\sin \operatorname{am} \frac{2 K x}{\pi}=\frac{1}{\sqrt{k}}\frac{H\left(\frac{2 K x}{\pi}\right)}{\Theta\left(\frac{2 K x}{\pi}\right)}$$
&lt;/div&gt;

&lt;p&gt;And similar identities followed for the other elliptic functions.&lt;/p&gt;

&lt;p&gt;Jacobi then explored some interesting identities with $\Theta$ and $H$. Eventually he also considered alternative series expansions. The final forms given are&lt;/p&gt;

&lt;div&gt;
$$\Theta\left(\frac{2 K x}{\pi}\right)=1-2 q \cos 2 x+2 q^{4} \cos 4 x-2 q^{9} \cos 6 x+2 q^{16} \cos 8 x-\cdots$$
&lt;/div&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;div&gt;
$$H\left(\frac{2 K x}{\pi}\right)=2 \sqrt[4]{q} \sin x-2 \sqrt[4]{q^{9}} \sin 3 x+2 \sqrt[4]{q^{25}} \sin 5 x-2 \sqrt[4]{q^{49}} \sin 7 x+\codots$$
&lt;/div&gt;

&lt;p&gt;These were the prototypical theta functions, although they have been replaced by more modern variations.&lt;/p&gt;

&lt;h2 id=&quot;the-shape-of-math-to-come-&quot;&gt;The Shape of Math to Come &lt;a name=&quot;5.0&quot;&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;It feels as though we’re running around like a chicken with it’s head cut off. Sure, there was a natural sequence of investigations, but where are we? Where are we going?&lt;/p&gt;

&lt;p&gt;I don’t know.&lt;/p&gt;

&lt;p&gt;However, I’d be doing you a disservice if I didn’t make something up. So let’s talk about the future and summarize some of the key goals.&lt;/p&gt;

&lt;p&gt;A long time ago, we mentioned that elliptic functions were analogous to trigonometric functions, except they were designed using different curves than a circle. We noted one of the key uses of trigonometric functions is how neatly they parameterize the circle.&lt;/p&gt;

&lt;p&gt;Now that elliptic functions had generally come to be defined as “doubly-periodic functions,” it had to be asked: does &lt;em&gt;every&lt;/em&gt; doubly-periodic function parameterize some curve? If so, what curves do they parameterize?&lt;/p&gt;

&lt;p&gt;These investigations of elliptic functions were one major development in a larger mathematical movement. Mathematicians were becoming interested in organizing the many functions or curves they had discovered. By doing so, they could develop more universal tools for analyzing these mathematical objects. However, they were constantly discovering intricacies that categorization difficult.&lt;/p&gt;

&lt;p&gt;Simple algebraic functions, like $f(x)=x^2$, were comfortably understood. However, beginning with cubic equations, the properties of various functions didn’t seem neatly categorized. In more exotic cases, this was more problematic. The complex natural logarithm had an unintuitive multivalued nature. $ln(\pi/2)$ could equal $e^{ni\frac{\pi}{2}} for any $n\in\mathbb{N}$. How could this be acknowledged and reconciled beyond ignoring it?&lt;/p&gt;

&lt;p&gt;Satisfactory progress would begin largely with the development of abstract algebra and the theory of manifolds. Riemann would develop methods that let us compare, contrast, and categorize functions and curves with much more precision. Groups from abstract algebra  would be an efficient tool for “indexing” different classifications of functions and curves.&lt;/p&gt;

&lt;p&gt;Additionally, theories of abstract algebra would enable us to study curves by looking at their behavior as we restricted them to more interesting spaces than $\mathbb{R}$ or $\mathbb{C}$. Even simple changes, such as analyzing the rational points of a curve (the points in $\mathbb{Q}$) would bring great theoretical insight on comparing and contrasting curves.&lt;/p&gt;

&lt;p&gt;The study of rational points on the curves described by elliptic functions will eventually lead us to the &lt;em&gt;j-invariant&lt;/em&gt; function. The j-invariant organized and related equivalence classes of these curves. It revealed that the relationships between curves could be more elaborate than simply “equivalent” or “different.” This opened the door for modular forms, functions which provided even more organizational insight.&lt;/p&gt;

&lt;h2 id=&quot;closing-and-final-remarks-&quot;&gt;Closing and Final Remarks &lt;a name=&quot;close&quot;&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;I’d like to explain why I stopped at this point chronologically. I feel that the next innovations in modular forms were due to more rigorously developed theories of complex analysis, group theory, and manifold theory, among others. These field weren’t particularly grounded for 20-30 years after the era in question. Thus, we’ll want to build new historical context about the broader mathematical scene in this new time before looking at their results on theta functions and modular forms.&lt;/p&gt;

&lt;p&gt;Just to be clear, this work is hugely misrepresentative about who, what, when, where, and why. I heavily focused on Gauss and implied a sequence of events that’s not particularly accurate. However, the influences I described and the results we reached are all real. They’re just a small and biased portrait of a much more colorful time. I didn’t even mention Abel, which is a shame, since he did as much work as anyone else.&lt;/p&gt;

&lt;p&gt;I hope to refine this further in the future. A work of art is never completed, only abandoned. I’ll stop in every now and then and correct things.&lt;/p&gt;

&lt;p&gt;One of the things on my to-do list is verifying the 2nd period of the lemniscatic sine in section 3.2. I don’t think I was supposed to derive a second period which is equal to the first period, although that may be true in the case of the lemiscate sine. Oh well.&lt;/p&gt;

&lt;p&gt;If you’ve actually read all the way to this point, or even better, if you skimmed most of it and jumped to the conclusion, thanks for checking this out. I wrote this selfishly with the intent of helping myself learn. However, I’ve had a lot of time to think, and I now selfishly hope that it will help you learn, too. That would be a huge ego boost.&lt;/p&gt;

&lt;p&gt;Anyways, until next time!&lt;/p&gt;

&lt;h2 id=&quot;special-thanks-&quot;&gt;Special Thanks &lt;a name=&quot;thanks&quot;&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;Special thanks to Kirk Bonney for correcting many mathematical and grammatical mistakes.&lt;/p&gt;

&lt;p&gt;Also thanks to Zachary Beever for spotting some errors (like confusing Euler and Euclid, oops).&lt;/p&gt;

&lt;h2 id=&quot;further-reading-&quot;&gt;Further Reading &lt;a name=&quot;reading&quot;&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;If you’d like to know more about this topic, there are some sources I’d recommend. Many of these sources were heavily referenced in the writing of this post. I found it very interesting that all of the books are available on www.libgen.is for free, with the exception of the ones which are already available for free in the links provided, and the papers can all be found on sci-hub.tw. Downloading those texts from those sites would be civil copyright infringement in the US. However, it could be criminal copyright infringement under these circumstances, &lt;a href=&quot;https://en.wikipedia.org/wiki/Criminal_copyright_law_in_the_United_States&quot;&gt;according to Wikipedia&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;“An individual may be liable if the infringement was committed: (B) by the reproduction or distribution, including by electronic means, during any 180-day period, of 1 or more copies or phonorecords of 1 or more copyrighted works, which have a total retail value of more than $1,000; or (C) by the distribution of a work being prepared for commercial distribution, by making it available on a computer network accessible to members of the public, if such person knew or should have known that the work was intended for commercial distribution.”&lt;/p&gt;

&lt;p&gt;I mention this as a somber reflection on the state of academic media. Every aspiring academic should feel the ethical burden of knowing everything is available for free. Your purchases are now cursed to be deliberate consent to the state of the media industry as well as explicit support of the authors.&lt;/p&gt;

&lt;p&gt;All that being said: if you like an author, buy their books.&lt;/p&gt;

&lt;p&gt;On the history of this mathematical era (great mathematical references):&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.amazon.com/Carl-Friedrich-Gauss-Titan-Science/dp/1258486636&quot;&gt;Carl Friedrich Gauss: Titan of Science&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.buffaloschools.org/site/handlers/filedownload.ashx?moduleinstanceid=2636&amp;amp;dataid=17548&amp;amp;FileName=Mathematics%20and%20Its%20History%20Third%20Edition%20by%20John%20Stillwell.pdf&quot;&gt;Mathematics and its History&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.springer.com/gp/book/9783319237145&quot;&gt;The Real And The Complex: A History of Analysis in the 19th Century&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://books.google.com/books/about/Mathematical_Thought_from_Ancient_to_Mod.html?id=aO-v3gvY-I8C&quot;&gt;Mathematical Thought From Ancient to Modern Times&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;On elliptic topics and modular forms:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://link.springer.com/book/10.1007/978-0-387-27226-9&quot;&gt;A First Course on Modular Forms&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://link.springer.com/book/10.1007/978-3-540-74119-0&quot;&gt;1-2-3s of Modular Forms&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.maa.org/sites/default/files/images/upload_library/1/abeltranslation.pdf&quot;&gt;Studys on Elliptic Functions by Abel&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://download.uni-mainz.de/mathematik/Algebraische%20Geometrie/Euler-Kreis%20Mainz/Jacobi_Fundamenta%20Nova.pdf&quot;&gt;Jacobi’s writings, New Foundations On The Theory of Elliptic Functions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.agtz.mathematik.uni-mainz.de/algebraische-geometrie/van-straten/euler-kreis-mainz/&quot;&gt;Euler’s work in general&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://books.google.com/books/about/M%C3%A9moire_sur_les_transcendantes_elliptiq.html?id=I4laAAAAcAAJ&quot;&gt;Memoir sur les Transcendantes Elliptiques, by Legendre (on classifying the three kinds of elliptic integral)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;All the random other sources I took inspiration from:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.amazon.com/Carl-Friedrich-Gauss-Werke-German/dp/027465279X&quot;&gt;Carl Frederich Gauss Werke&lt;/a&gt; (I could only find it in German and only needed a page)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://home.ie.cuhk.edu.hk/~wkshum/wordpress/?p=1193&quot;&gt;Kenneth Shum’s Scrapbook&lt;/a&gt;. Needed this to figure out what $\omega$ was in Gauss’s lemniscate work&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://webspace.science.uu.nl/~wepst101/elliptic/Bos_lemniscate.pdf&quot;&gt;On the lemniscate of Bernoulli&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www2.eecs.berkeley.edu/Pubs/TechRpts/2008/EECS-2008-103.pdf&quot;&gt;On the history of the elastica&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://link.springer.com/article/10.1007/s00407-013-0131-3&quot;&gt;On Jacobi’s methodology in his New Foundations&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Beau Horenberger</name></author><summary type="html"></summary></entry></feed>