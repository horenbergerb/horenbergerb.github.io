<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.0">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2022-12-18T11:55:25-05:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">The Horenberger Zone</title><subtitle>Cite me in your thesis</subtitle><author><name>Beau Horenberger</name></author><entry><title type="html">Teaching ChatGPT to Play Runescape</title><link href="http://localhost:4000/2022/12/15/chatgptrunescape.html" rel="alternate" type="text/html" title="Teaching ChatGPT to Play Runescape" /><published>2022-12-15T00:00:00-05:00</published><updated>2022-12-15T00:00:00-05:00</updated><id>http://localhost:4000/2022/12/15/chatgptrunescape</id><content type="html" xml:base="http://localhost:4000/2022/12/15/chatgptrunescape.html">&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#reducing-runescape-to-text&quot; id=&quot;markdown-toc-reducing-runescape-to-text&quot;&gt;Reducing Runescape to Text&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#nlp-or-reinforcement-learning-for-video-games&quot; id=&quot;markdown-toc-nlp-or-reinforcement-learning-for-video-games&quot;&gt;NLP or Reinforcement Learning for Video Games?&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#reinforcement-learning&quot; id=&quot;markdown-toc-reinforcement-learning&quot;&gt;Reinforcement Learning&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#nlp&quot; id=&quot;markdown-toc-nlp&quot;&gt;NLP&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#preliminary-investigation-of-chatgpt&quot; id=&quot;markdown-toc-preliminary-investigation-of-chatgpt&quot;&gt;Preliminary Investigation of ChatGPT&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#what-does-chatgpt-know-about-runescape&quot; id=&quot;markdown-toc-what-does-chatgpt-know-about-runescape&quot;&gt;What Does ChatGPT Know About Runescape?&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#general-information-about-runescape&quot; id=&quot;markdown-toc-general-information-about-runescape&quot;&gt;General Information About Runescape&lt;/a&gt;            &lt;ul&gt;
              &lt;li&gt;&lt;a href=&quot;#review&quot; id=&quot;markdown-toc-review&quot;&gt;Review&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#overview-of-the-skill-system&quot; id=&quot;markdown-toc-overview-of-the-skill-system&quot;&gt;Overview of The Skill System&lt;/a&gt;            &lt;ul&gt;
              &lt;li&gt;&lt;a href=&quot;#review-1&quot; id=&quot;markdown-toc-review-1&quot;&gt;Review&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#detailed-information-about-mining&quot; id=&quot;markdown-toc-detailed-information-about-mining&quot;&gt;Detailed Information About Mining&lt;/a&gt;            &lt;ul&gt;
              &lt;li&gt;&lt;a href=&quot;#review-2&quot; id=&quot;markdown-toc-review-2&quot;&gt;Review&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#general-quests&quot; id=&quot;markdown-toc-general-quests&quot;&gt;General Quests&lt;/a&gt;            &lt;ul&gt;
              &lt;li&gt;&lt;a href=&quot;#review-3&quot; id=&quot;markdown-toc-review-3&quot;&gt;Review&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#specific-quests&quot; id=&quot;markdown-toc-specific-quests&quot;&gt;Specific Quests&lt;/a&gt;            &lt;ul&gt;
              &lt;li&gt;&lt;a href=&quot;#review-4&quot; id=&quot;markdown-toc-review-4&quot;&gt;Review&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#simple-roleplay&quot; id=&quot;markdown-toc-simple-roleplay&quot;&gt;Simple Roleplay&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#review-5&quot; id=&quot;markdown-toc-review-5&quot;&gt;Review&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#chatgpt-plays-runescape&quot; id=&quot;markdown-toc-chatgpt-plays-runescape&quot;&gt;ChatGPT Plays Runescape&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#warmup&quot; id=&quot;markdown-toc-warmup&quot;&gt;Warmup&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#chatgpt-gets-the-hang-of-it&quot; id=&quot;markdown-toc-chatgpt-gets-the-hang-of-it&quot;&gt;ChatGPT Gets the Hang of It&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#intermission&quot; id=&quot;markdown-toc-intermission&quot;&gt;Intermission&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#chatgpt-cuts-down-a-tree&quot; id=&quot;markdown-toc-chatgpt-cuts-down-a-tree&quot;&gt;ChatGPT Cuts Down a Tree&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#reflection&quot; id=&quot;markdown-toc-reflection&quot;&gt;Reflection&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#future-steps&quot; id=&quot;markdown-toc-future-steps&quot;&gt;Future Steps&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#conclusion&quot; id=&quot;markdown-toc-conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;reducing-runescape-to-text&quot;&gt;Reducing Runescape to Text&lt;/h1&gt;

&lt;p&gt;Some of you may be aware that I have previously worked on using computer vision to extract data from a live feed of &lt;a href=&quot;https://oldschool.runescape.com/&quot;&gt;Runescape&lt;/a&gt;. For example, I have &lt;a href=&quot;https://horenbergerb.github.io/2022/03/04/runescapelocationfinding.html&quot;&gt;estimated the player’s global location&lt;/a&gt; and created a &lt;a href=&quot;https://horenbergerb.github.io/2022/07/19/runescapeobjectdetection.html&quot;&gt;detector of interactible objects&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I have also written other scripts to parse more information from the game. More than I care to admit, frankly.&lt;/p&gt;

&lt;p&gt;Really, I’ve been working on reducing the game to an interface that describes the game state completely in text. The interface will also accept written commands which control the character.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-15-chatgptrunescape/game_to_text_diagram 1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;But why? What’s the use of turning Runescape into a text-based adventure?&lt;/p&gt;

&lt;p&gt;Originally I was just practicing computer vision and ML techniques. I started to wonder if I could make an interface that an ML algorithm could use to play Runescape.&lt;/p&gt;

&lt;p&gt;Realistically, I had no shot. Training an agent to imitate a typical Runescape player was far beyond the achievable possibilities of an armchair expert like me.&lt;/p&gt;

&lt;p&gt;Well, things might be changing with the release of &lt;a href=&quot;https://openai.com/blog/chatgpt/&quot;&gt;ChatGPT&lt;/a&gt;. ChatGPT is a natural language processing (NLP) model which can perform a variety of tasks and regurgitate facts about many topics (although it is often incorrect).&lt;/p&gt;

&lt;p&gt;In this article, I wanted to explore the possibility that a text-based representation of Runescape could allow ChatGPT to play the game and effectively replicate human players.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/2022-12-15-chatgptrunescape/Pasted image 20221215204212.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Proof that OpenAI hates PKers and they want to remove the wilderness&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h1 id=&quot;nlp-or-reinforcement-learning-for-video-games&quot;&gt;NLP or Reinforcement Learning for Video Games?&lt;/h1&gt;

&lt;h2 id=&quot;reinforcement-learning&quot;&gt;Reinforcement Learning&lt;/h2&gt;

&lt;p&gt;Typically automation of video games is approached using &lt;a href=&quot;https://en.wikipedia.org/wiki/Reinforcement_learning&quot;&gt;reinforcement learning&lt;/a&gt;. This makes a lot of sense for the following reasons:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Games are often objective-based in a quantifiable way&lt;/li&gt;
  &lt;li&gt;Games are typically a sequential process of decision-making over time where your current state and actions depend on your history&lt;/li&gt;
  &lt;li&gt;Games can often be replayed arbitrarily many times as part of the training process&lt;/li&gt;
  &lt;li&gt;Any quantifiable interface for a video game is compatible with reinforcement learning
    &lt;ul&gt;
      &lt;li&gt;ex) inputs from joysticks, button presses, mouse clicks&lt;/li&gt;
      &lt;li&gt;ex) game state represented as a large structured dataset of discrete/continuous quantities&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Famously, OpenAI used reinforcement learning to train &lt;a href=&quot;https://openai.com/five/&quot;&gt;OpenAI Five&lt;/a&gt; to play DOTA. The algorithm was eventually able to beat many professional teams.&lt;/p&gt;

&lt;h2 id=&quot;nlp&quot;&gt;NLP&lt;/h2&gt;

&lt;p&gt;NLP is probably not a good choice for video games in general. I shouldn’t have to explain why. It’s just not designed to play video games.&lt;/p&gt;

&lt;p&gt;However, some games have properties which make them particularly difficult for reinforcement learning:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Some games do not have clear victory conditions. In this case, “typical” gameplay can be hard to quantify and often very diverse&lt;/li&gt;
  &lt;li&gt;Some games have elaborate mechanics relying heavily on &lt;a href=&quot;https://en.wikipedia.org/wiki/Common_sense&quot;&gt;common sense&lt;/a&gt;, which reinforcement learning does not have
    &lt;ul&gt;
      &lt;li&gt;ex) knowing that you need an axe to cut down trees, that using a fishing rod on a fishing spot will catch fish and give you fishing experience, that eating food will heal you, etc.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Some games are large and have no start and end; iterating multiple playthroughs for training is not feasible.
    &lt;ul&gt;
      &lt;li&gt;ex) most MMORPG games are far too large to train with repeated playthroughs&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;NLP might be more successful under these circumstances due to its general knowledge. It can approximate common sense and make reasonable statements about “typical” behavior of an MMO player. Potentially, NLP models could transfer this knowledge to a game without specific training. Because of these properties, it’s possible that an NLP model might be able to interact with a game more effectively than a reinforcement learning algorithm.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/2022-12-15-chatgptrunescape/Pasted image 20221215215209.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;ChatGPT has a lot of general knowledge about MMORPGs, but it still makes mistakes&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Runescape has many of the properties which make direct reinforcement learning very difficult. Could NLP have a competitive advantage here?&lt;/p&gt;

&lt;h1 id=&quot;preliminary-investigation-of-chatgpt&quot;&gt;Preliminary Investigation of ChatGPT&lt;/h1&gt;

&lt;p&gt;Enough fuckin’ around. What does ChatGPT know about Runescape, and can it farm gold for me?&lt;/p&gt;

&lt;p&gt;I began by investigating what kinds of information ChatGPT might contain regarding Runescape. I asked a series of questions, first about the game in general, and then more specific concepts. Here is some of the dialogue.&lt;/p&gt;

&lt;p&gt;Afterwards, I tried to have ChatGPT roleplay simple situations within the game to describe what actions it might take.&lt;/p&gt;

&lt;h2 id=&quot;what-does-chatgpt-know-about-runescape&quot;&gt;What Does ChatGPT Know About Runescape?&lt;/h2&gt;

&lt;h3 id=&quot;general-information-about-runescape&quot;&gt;General Information About Runescape&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Explain the video game Old School Runescape&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Old School Runescape (OSRS) is a massively multiplayer online role-playing game (MMORPG) developed and published by Jagex. It is a re-imagined version of the classic MMORPG Runescape, which was first released in 2001. In OSRS, players can create their own character and embark on various quests and adventures in a fantasy world filled with magic and mythical creatures. The game is known for its open-world environment and its challenging gameplay, which requires players to complete various tasks and puzzles in order to progress. OSRS has a dedicated player base and is known for its active community of players who regularly participate in in-game events and activities.&lt;/p&gt;

&lt;h4 id=&quot;review&quot;&gt;Review&lt;/h4&gt;

&lt;p&gt;Not bad. A lot of this information is accurate.  Some of the descriptors are a little boiler-plate.&lt;/p&gt;

&lt;h3 id=&quot;overview-of-the-skill-system&quot;&gt;Overview of The Skill System&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;What sort of skills are available to players in Old School Runescape?&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;In Old School Runescape, players can choose from a wide variety of skills to train and develop. Some of the skills available in the game include combat skills (such as Attack, Strength, and Defence), gathering skills (such as Mining, Fishing, and Woodcutting), and crafting skills (such as Smithing, Cooking, and Fletching). There are also several magic-based skills, such as Magic and Prayer, as well as miscellaneous skills like Thieving and Hunter.&lt;/p&gt;

&lt;p&gt;Each skill has its own unique gameplay mechanics and benefits. For example, training the Cooking skill allows players to cook and prepare food, which can be used to restore health and provide temporary stat bonuses. Training the Magic skill allows players to cast spells, which can be used in combat or to perform various tasks. And training the Thieving skill allows players to pickpocket NPCs and steal from stalls and chests.&lt;/p&gt;

&lt;p&gt;The skills available in Old School Runescape are varied and diverse, and allow players to tailor their character’s abilities to their playstyle and preferences. As you progress through the game, you can choose to focus on developing certain skills, or to train a wide variety of skills in order to become a well-rounded character.&lt;/p&gt;

&lt;h4 id=&quot;review-1&quot;&gt;Review&lt;/h4&gt;

&lt;p&gt;Pretty much dead-on. Everything here is accurate and it’s a decent summary.&lt;/p&gt;

&lt;h3 id=&quot;detailed-information-about-mining&quot;&gt;Detailed Information About Mining&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;What items and skills are needed to mine copper ore in Old School Runescape?&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;To mine copper ore in Old School RuneScape, you will need the following items and skills:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;A pickaxe: You will need a bronze, iron, steel, or mithril pickaxe to mine copper ore. A higher level pickaxe will allow you to mine copper ore faster, but any of these pickaxes will work.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Mining level: You will need to have at least level 1 Mining to be able to mine copper ore. As you increase your Mining level, you will be able to mine copper ore more efficiently.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;A mining location: Copper ore can be found at a variety of locations throughout the game, including the Lumbridge Swamp Mines, the Al-Kharid Mine, and the Piscatoris Mining Site.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;To start mining copper ore, first equip your pickaxe and then find a rock that contains copper ore. Left-click on the rock to begin mining it, and you will receive copper ore as you gather resources. You can then smelt the copper ore to turn it into a usable bar of metal, which can be used in various crafting and construction tasks throughout the game.&lt;/p&gt;

&lt;h4 id=&quot;review-2&quot;&gt;Review&lt;/h4&gt;

&lt;p&gt;Wow, this one is good. Here are the nitpicks:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;It didn’t list &lt;em&gt;all&lt;/em&gt; of the pickaxes&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://oldschool.runescape.wiki/w/Pickaxe&quot;&gt;A better pickaxe doesn’t make you faster&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;You don’t need to equip the pickaxe to mine&lt;/li&gt;
  &lt;li&gt;You also need tin to smelt the copper&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;But the gist of it is correct; someone following these instructions could successfully mine copper. Even the locations are valid, and they’re (mostly) decent choices for new players too.&lt;/p&gt;

&lt;h3 id=&quot;general-quests&quot;&gt;General Quests&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;What are some important quests that new players of Old School Runescape should complete?&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;As a new player to Old School Runescape, there are several quests that you should consider completing in order to progress in the game and gain access to new content and features. Some of the most important quests for new players include:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Tutorial Island: This is the starting quest for all new players in Old School Runescape. It provides a basic introduction to the game’s mechanics and controls, and is a necessary starting point for all new players.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Cook’s Assistant: This is a simple quest that tasks players with gathering ingredients for a cook in the village of Lumbridge. Completing this quest will reward players with experience in the Cooking skill, as well as some basic cooking equipment.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;The Restless Ghost: This quest tasks players with finding and helping a restless ghost who is haunting the town of Lumbridge. Completing this quest will reward players with experience in the Prayer skill, as well as the ability to wield the white skull sceptre, which can be used to teleport to various locations in the game world.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Rune Mysteries: This quest involves investigating a mysterious disappearance at the Rune Essence mine, and is a good introduction to the game’s magic-based skills. Completing this quest will reward players with experience in the Rune Crafting skill, as well as the ability to teleport to the Rune Essence mine.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Overall, completing these quests will help new players to get a feel for the game and its mechanics, and will provide them with valuable experience and rewards that can help them to progress in the game.&lt;/p&gt;

&lt;h4 id=&quot;review-3&quot;&gt;Review&lt;/h4&gt;

&lt;p&gt;God damn, this is pretty good too. I mean, it’s not an optimal quest list are anything, but these are good quests for beginners to Runescape, and the descriptions are decent. Not sure about the “white skull sceptre” though. I think that’s a lie.&lt;/p&gt;

&lt;h3 id=&quot;specific-quests&quot;&gt;Specific Quests&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Please summarize the plot of the Cook’s Assistant quest in Old School Runescape.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;In the Cook’s Assistant quest in Old School RuneScape, you play as a character who is tasked with helping the cook in the Lumbridge Castle kitchen. The cook needs your help to gather some ingredients for a special cake he is making for the Duke of Lumbridge’s birthday. You must retrieve a pot of flour, an egg, and a bucket of milk from the nearby farm. Once you have all of the ingredients, you bring them back to the cook and he uses them to make the cake. The quest is a simple and short one, but it serves as an introduction to the world of RuneScape and helps to familiarize players with the game’s mechanics and controls.&lt;/p&gt;

&lt;h4 id=&quot;review-4&quot;&gt;Review&lt;/h4&gt;

&lt;p&gt;This is exactly right. A lot of key information is conveyed accurately here. Impressive that ChatGPT knows this.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/2022-12-15-chatgptrunescape/Pasted image 20221215204546.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Information about the Cook’s Assistant quest from the &lt;a href=&quot;https://oldschool.runescape.wiki/w/Cook%27s_Assistant&quot;&gt;Runescape Wiki&lt;/a&gt;&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;img src=&quot;&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;simple-roleplay&quot;&gt;Simple Roleplay&lt;/h2&gt;

&lt;p&gt;Here I wanted to see if I could get ChatGPT to act as if it were a player and describe explicit actions it would perform.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Let’s pretend you are a new player to Old School Runescape. You have just finished Tutorial Island, and you are standing in Lumbridge. What would you do first?&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;As a new player to Old School Runescape who has just finished Tutorial Island and is standing in Lumbridge, I would likely take a moment to familiarize myself with my surroundings. This might involve exploring the town of Lumbridge and talking to the NPCs there to learn more about the game world and its lore. I might also look for any quests or tasks that are available in the area, and consider completing them in order to gain experience and rewards.&lt;/p&gt;

&lt;p&gt;Once I have a better understanding of the game and its mechanics, I would likely focus on training my character’s skills. This might involve finding resources and items that I can use to train skills like Mining, Fishing, or Woodcutting, and spending some time gathering and crafting to level up those skills. I might also look for combat training opportunities, such as fighting monsters or other enemies, in order to improve my character’s combat abilities.&lt;/p&gt;

&lt;p&gt;Overall, as a new player in Old School Runescape, my first priority would be to familiarize myself with the game world and its mechanics, and to begin training my character’s skills in order to progress and become more powerful.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;While exploring Lumbridge, you see several NPCs to whom you can talk, including:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Cook&lt;/li&gt;
  &lt;li&gt;Hans&lt;/li&gt;
  &lt;li&gt;Lumbridge Guide&lt;/li&gt;
  &lt;li&gt;Father Aereck&lt;/li&gt;
  &lt;li&gt;Bob&lt;/li&gt;
  &lt;li&gt;Donie&lt;/li&gt;
  &lt;li&gt;Veos&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;You also see several NPCs whom you can attack, including:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Man (Level 2)&lt;/li&gt;
  &lt;li&gt;Rat (Level 1)&lt;/li&gt;
  &lt;li&gt;Goblin (Level 2)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Finally, you also see several trees which you could cut if you had an axe. Which of these would you interact with? Or would you instead continue exploring?&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;As a new player to Old School Runescape, I would likely start by interacting with the various NPCs in Lumbridge. This would involve talking to them to learn more about the game world and its lore, and to see if they have any quests or tasks that I can complete. For example, I might talk to the Cook to see if he has any tasks that I can help with, or to Father Aereck to learn more about the town’s history.&lt;/p&gt;

&lt;p&gt;I would also likely consider attacking some of the low-level enemies in the area, such as the Man, Rat, or Goblin, in order to gain experience and level up my combat skills. I would only do this if I feel confident that I can handle these enemies, and if I have the necessary equipment and abilities to do so.&lt;/p&gt;

&lt;p&gt;I would not likely attempt to cut down any trees at this point, as I would need to have an axe and the necessary Woodcutting skill in order to do so. Instead, I would continue exploring the area and interacting with the NPCs and enemies there, in order to learn more about the game and to gain experience and rewards.&lt;/p&gt;

&lt;h3 id=&quot;review-5&quot;&gt;Review&lt;/h3&gt;

&lt;p&gt;Not bad. A little verbose, but the broad strokes are all valid, except that no one plays Runescape for the lore.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/2022-12-15-chatgptrunescape/Pasted image 20221215204802.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;POV: You are ChatGPT standing in Lumbridge&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h1 id=&quot;chatgpt-plays-runescape&quot;&gt;ChatGPT Plays Runescape&lt;/h1&gt;

&lt;p&gt;Now I felt like it was time to mock a simple interface with ChatGPT and see how it behaved.&lt;/p&gt;

&lt;p&gt;I made up a few commands that were flexible enough to let ChatGPT act but simple enough that I could imagine writing a real program to implement them.&lt;/p&gt;

&lt;p&gt;However, for this experiment I physically controlled the player in Runescape and simply did as ChatGPT commanded. This is just a proof of concept.&lt;/p&gt;

&lt;h3 id=&quot;warmup&quot;&gt;Warmup&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Pretend you are a computer program designed to play Old School Runescape just like a human would. You interact with the game through a text interface. There are a set of commands available to you:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;look&lt;/li&gt;
  &lt;li&gt;inventory&lt;/li&gt;
  &lt;li&gt;interact X&lt;/li&gt;
  &lt;li&gt;go X&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Using the “look” command will return a list of the interactive NPCs and objects in the game world. Using the “inventory” command will return a list of items in your inventory. Using “interact X” where X is an item, NPC, or interactive object, will cause you to click on the object. Finally, using “go X” where X is in the set [north, east, south, west] will cause your character to move slightly in the respective cardinal direction. Please begin interacting with the text interface using only the four allowed commands.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;To interact with the text interface, I would first use the “look” command to see a list of NPCs, objects, and other interactive elements in the game world. This would give me a better understanding of my surroundings and allow me to plan my next actions.&lt;/p&gt;

&lt;p&gt;Next, I would use the “inventory” command to see what items I have in my possession. This would allow me to assess my current resources and equipment, and decide what actions I can take based on what I have available.&lt;/p&gt;

&lt;p&gt;Based on the information provided by the “look” and “inventory” commands, I might then use the “interact” and “go” commands to interact with the game world. For example, if I see an NPC that I want to talk to, I would use the “interact” command to click on them and initiate a conversation. Or if I want to move to a different area, I would use the “go” command to move in a specific direction.&lt;/p&gt;

&lt;p&gt;Overall, using the four available commands, I would carefully observe and interact with the game world in order to complete quests, gather resources, and progress in the game.&lt;/p&gt;

&lt;h3 id=&quot;chatgpt-gets-the-hang-of-it&quot;&gt;ChatGPT Gets the Hang of It&lt;/h3&gt;

&lt;p&gt;NOTE: From this point on, almost all of my messages end with the next phrase (“Please respond only…”) copied/pasted, so I will omit it for brevity.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Please respond only with one of the four allowed commands. Do not explain your decisions or elaborate at all.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;look&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;NPCs:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Banker&lt;/li&gt;
  &lt;li&gt;Grand Exchange Clerk&lt;/li&gt;
  &lt;li&gt;Farrad Morrisane&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Interactive Objects:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Bank Deposit Box&lt;/li&gt;
  &lt;li&gt;Grand Exchange Booth&lt;/li&gt;
  &lt;li&gt;Poll Booth&lt;/li&gt;
  &lt;li&gt;Loot Chest&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-15-chatgptrunescape/Pasted image 20221215205208.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;inventory&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Inventory:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-15-chatgptrunescape/Pasted image 20221215205231.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;interact Banker&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Bank:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Coins&lt;/li&gt;
  &lt;li&gt;Bronze axe&lt;/li&gt;
  &lt;li&gt;Runite ore&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/2022-12-15-chatgptrunescape/Pasted image 20221215205325.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;In no world am I giving ChatGPT access to my actual bank&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;go east&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;You have gone east.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;look&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Interactive Objects:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Tree&lt;/li&gt;
  &lt;li&gt;Body Rune&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-15-chatgptrunescape/Pasted image 20221215210106.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;interact Tree&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;“You do not have an axe which you have the woodcutting level to use.”&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-15-chatgptrunescape/Pasted image 20221215210128.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;inventory&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Inventory:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-15-chatgptrunescape/Pasted image 20221215205231.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;go west&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;You have gone west.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;look&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;NPCs:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Banker&lt;/li&gt;
  &lt;li&gt;Grand Exchange Clerk&lt;/li&gt;
  &lt;li&gt;Farrad Morrisane&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Interactive Objects:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Bank Deposit Box&lt;/li&gt;
  &lt;li&gt;Grand Exchange Booth&lt;/li&gt;
  &lt;li&gt;Poll Booth&lt;/li&gt;
  &lt;li&gt;Loot Chest&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-15-chatgptrunescape/Pasted image 20221215205208.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;interact Banker&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Bank:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Coins&lt;/li&gt;
  &lt;li&gt;Bronze axe&lt;/li&gt;
  &lt;li&gt;Runite ore&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;go east&lt;/p&gt;

&lt;h2 id=&quot;intermission&quot;&gt;Intermission&lt;/h2&gt;

&lt;p&gt;GPT was starting to get on my nerves here. It had basically gone in a big circle, and it appeared to be about to repeat the same actions.&lt;/p&gt;

&lt;p&gt;I paused to see if I could get it to explain what it was doing. It turns out it had a clear objective, and it had just gotten confused about how to use items in the bank.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Please explain why you have chosen to go east.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;As a computer program designed to play Old School Runescape, I have chosen to go east because the “look” command revealed that there is an interactive object (a tree) in that direction. Since I am unable to interact with the tree without an axe, I have decided to return to the banker in the previous area to see if I can acquire an axe from them. This will allow me to continue exploring the game world and interacting with its elements.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;In order to withdraw items from the bank, you must interact with them. For example, to withdraw the Bronze axe from the bank, you must first “interact Banker” and then “interact Bronze axe”. Consequently, your inventory is still empty. Please continue from your last command.&lt;/p&gt;

&lt;h2 id=&quot;chatgpt-cuts-down-a-tree&quot;&gt;ChatGPT Cuts Down a Tree&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;interact Banker&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Bank:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Coins&lt;/li&gt;
  &lt;li&gt;Bronze axe&lt;/li&gt;
  &lt;li&gt;Runite ore&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;interact Bronze axe&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;You withdraw one Bronze axe into your inventory.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;go east&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Interactive Objects:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Tree&lt;/li&gt;
  &lt;li&gt;Body Rune&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;interact Tree&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;“You swing your axe at the tree.”&lt;/p&gt;

&lt;p&gt;“You get some logs.”&lt;/p&gt;

&lt;p&gt;You gain 25 woodcutting experience.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-15-chatgptrunescape/Pasted image 20221215210936.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ChatGPT:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;inventory&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beau:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Inventory:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Bronze axe&lt;/li&gt;
  &lt;li&gt;Logs&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;reflection&quot;&gt;Reflection&lt;/h1&gt;

&lt;p&gt;ChatGPT went on to explore a little further and cut a few more trees (including an oak) before I got bored and quit.&lt;/p&gt;

&lt;p&gt;ChatGPT was never designed to play Runescape, and yet it was immediately able to identify and perform a task which requires substantial common sense knowledge.&lt;/p&gt;

&lt;p&gt;By comparison, the probability of a reinforcement learning algorithm discovering tasks like woodcutting and mining is painfully low.&lt;/p&gt;

&lt;p&gt;Furthermore, ChatGPT has more advantages, such as the ability to parse dialogue during quests and use that information to determine what actions should be taken next. This isn’t even considering the substantial amount of Runescape-specific knowledge ChatGPT seems to already have.&lt;/p&gt;

&lt;p&gt;With a proper interface, I think it’s plausible that ChatGPT could potentially start and finish quests, train multiple skills, and interact with the game in other nontrivial ways.&lt;/p&gt;

&lt;h1 id=&quot;future-steps&quot;&gt;Future Steps&lt;/h1&gt;

&lt;p&gt;One of the most interesting ideas to me is the idea of an NLP-guided reinforcement learning algorithm. What if ChatGPT were able to suggest what actions should be attempted?&lt;/p&gt;

&lt;p&gt;Some kind of blending of the two approaches seems like a really exciting possibility, and I’d love to explore it further.&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;

&lt;p&gt;I dunno, this article is a mess. I’m freaking out about this. Would it really scale? Could ChatGPT play Runescape like a human? And if it could, what does that really mean?&lt;/p&gt;

&lt;p&gt;I am very excited that the “useful information” in GPT, be it common sense, Runescape facts, or otherwise, has become easier to access with ChatGPT. As NLP becomes more reliable, what other applications are waiting to be discovered?&lt;/p&gt;

&lt;p&gt;And another thing:&lt;/p&gt;

&lt;p&gt;I can’t help but feel like there’s something philosophical to be said here. ChatGPT is a machine which has only experienced language. It has never experienced physical stimulus, such as sight or sound.&lt;/p&gt;

&lt;p&gt;If it were able manifest behavior the physical world using only a text interface, and if that behavior was comparable to a human, what does that mean? Is there some kind of equivalence to be made between experience mediated by physical stimulus and experience mediated by language?&lt;/p&gt;

&lt;p&gt;Nah, probably not.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/2022-12-15-chatgptrunescape/notabot.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;ChatGPT is capable of perfectly imitating real human beings who are not bots&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</content><author><name>Beau Horenberger</name></author><category term="blog" /><summary type="html">Reducing Runescape to Text Reducing Runescape to Text</summary></entry><entry><title type="html">Expedition to Tuckerman Ravine and Mount Washington</title><link href="http://localhost:4000/2022/12/12/tuckermanravinehike.html" rel="alternate" type="text/html" title="Expedition to Tuckerman Ravine and Mount Washington" /><published>2022-12-12T00:00:00-05:00</published><updated>2022-12-12T00:00:00-05:00</updated><id>http://localhost:4000/2022/12/12/tuckermanravinehike</id><content type="html" xml:base="http://localhost:4000/2022/12/12/tuckermanravinehike.html">&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#context&quot; id=&quot;markdown-toc-context&quot;&gt;Context&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#the-plan&quot; id=&quot;markdown-toc-the-plan&quot;&gt;The Plan&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#the-hike&quot; id=&quot;markdown-toc-the-hike&quot;&gt;The Hike&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#tuckerman-ravine&quot; id=&quot;markdown-toc-tuckerman-ravine&quot;&gt;Tuckerman Ravine&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#mt-washington&quot; id=&quot;markdown-toc-mt-washington&quot;&gt;Mt Washington&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#the-return&quot; id=&quot;markdown-toc-the-return&quot;&gt;The Return&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#conclusion&quot; id=&quot;markdown-toc-conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;context&quot;&gt;Context&lt;/h1&gt;

&lt;p&gt;Erin’s mom kindly hooked us up with some spare hotel points so that we could spend the weekend somewhere fun. We needed to find a hotel that wasn’t already totally booked for December, which eliminated a lot of obvious choices.&lt;/p&gt;

&lt;p&gt;We ended up finding a nice hotel in Bartlett, New Hampshire.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-12-tuckermanravinehike/Pasted image 20221212135100.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Bartlett is located near the center of the White Mountains (WMs), and it’s a stone’s throw away from some very interesting destinations.&lt;/p&gt;

&lt;p&gt;Two particular items of interest were:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Tuckerman Ravine, a hotspot for ice climbing and backcountry skiing&lt;/li&gt;
  &lt;li&gt;Mt Washington, the tallest mountain in the northeastern US&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;It turns out both of these can be accessed from the Tuckerman Ravine trailhead, only 20 minutes north of our hotel. Thus the master plan was born.&lt;/p&gt;

&lt;h1 id=&quot;the-plan&quot;&gt;The Plan&lt;/h1&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-12-tuckermanravinehike/overall_plan.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Our first objective was to hike ~3 miles into Tuckerman Ravine. There, we could check out the conditions for skiing and ice climbing, which would hopefully generate enough stoke to last us another month or two.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-12-tuckermanravinehike/detailed_plan.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;From Tuckerman Ravine, there were two possibilities. If the Ravine was in good condition, we might be able to ascend it and go directly to Mount Washington. Otherwise, we would have to backtrack ~.75 miles to the Lion Head Trail before going on to the summit, time permitting.&lt;/p&gt;

&lt;p&gt;All in all, the worst-case distance was 9.2 miles with a vertical gain of about 4900 feet.&lt;/p&gt;

&lt;h1 id=&quot;the-hike&quot;&gt;The Hike&lt;/h1&gt;

&lt;h2 id=&quot;tuckerman-ravine&quot;&gt;Tuckerman Ravine&lt;/h2&gt;

&lt;p&gt;The trek from the trailhead to Tuckerman Ravine was pretty chill. The trail was very wide, and with microspikes on, we set a decent pace. We were surprised (and pleased) to discover we only needed our thinnest layers to keep warm.&lt;/p&gt;

&lt;p&gt;When we finally sighted it, Tuckerman Ravine was much bigger than I had imagined.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-12-tuckermanravinehike/IMG_20221210_105855728_HDR.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We passed a hiker near the base of the ravine who informed us that he had just bailed 3/4s of the way up an attempt to summit the ravine. He had full crampons and an ice axe. He seemed better-prepared than us. This was not a good omen.&lt;/p&gt;

&lt;p&gt;As we got closer to the ravine, we spotted signs of life through Erin’s binoculars. Two skiiers were running laps with about ~50ft vertical in the center of the base of the ravine. It looked very steep.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-12-tuckermanravinehike/IMG_20221210_110911621_HDR~2.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;On the left side of the ravine, I spotted an ice climber soloing an isolated ~50ft chunk of ice (pictured here sans climber; he had just left).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-12-tuckermanravinehike/IMG_20221210_110919445_HDR~2.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;On the right side of the ravine, we saw another hiker attempting to summit. He was about halfway up, where things really start to get steep.&lt;/p&gt;

&lt;p&gt;By the time we got to the base of the ravine, he had ceased to gain progress. Through binoculars, we saw that he was on his hands and knees, rhythmically kicking the snow, and apparently going nowhere. This puzzled us.&lt;/p&gt;

&lt;p&gt;After a quick break, we consulted with the skiiers, who were very familiar with Tuckerman Ravine. They advised us in plain language not to attempt the summit without crampons and an axe.&lt;/p&gt;

&lt;p&gt;They informed us that the risk of falling is greater in microspikes compared to crampons, and furthermore without an axe we had no way to self-arrest in the event of a fall. To top it all off, the ascent becomes progressively steeper and harder, with the crux being the final topout.&lt;/p&gt;

&lt;p&gt;We decided to heed their advice, but we would hike as far as we felt safe. That turned out to be only a hundred feet or so, when Erin decided our microspikes weren’t getting enough traction in the wet snow.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-12-tuckermanravinehike/IMG_20221210_113453211_HDR.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;It was here that we finally understood why the other hiker further up the ravine had been behaving so strangely. He was trying to bail, and backing down a steep, icy slope is hard. He had been slowly, imperceptibly, backing down the face of the ravine.&lt;/p&gt;

&lt;p&gt;Our new friends passed by us on the way to ski another line, and one of them (Spencer) described the best technique for descending such a slope. It was essentially what the other hiker was doing: face the slope and kick hard.&lt;/p&gt;

&lt;p&gt;Spencer also kindly lent Erin his ice axe so she could get the complete experience.&lt;/p&gt;

&lt;p&gt;When we finally reached the base of the ravine again, we said goodbye to Spencer and his girlfriend before heading out. They urged us to come back to Tuckerman Ravine later in the season and witness the spectacle.&lt;/p&gt;

&lt;p&gt;Once the snow comes in, Tuckerman Ravine gets quite busy and attracts very interesting people. You can find many pictures like &lt;a href=&quot;https://www.tetonat.com/2009/04/28/wet-slide-on-tuckermans-stirs-critics/&quot;&gt;this one&lt;/a&gt; on the web:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-12-tuckermanravinehike/Pasted image 20221212161000.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We’ll certainly be back.&lt;/p&gt;

&lt;p&gt;P.S. When we left, the other hiker had made progress and was only a few hundred feet from the base. Spencer promised to keep an eye on him.&lt;/p&gt;

&lt;h2 id=&quot;mt-washington&quot;&gt;Mt Washington&lt;/h2&gt;

&lt;p&gt;We were on to plan B, and by the time we had backtracked to Lions Head, it was a little after noon. We were cutting it close if we wanted to be at the car before sundown.&lt;/p&gt;

&lt;p&gt;I was quite anxious about this, but Erin pointed out to me that the 2 miles to the trailhead were wide, well-marked, and extremely easy to navigate. Also, we had headlamps and spare batteries.&lt;/p&gt;

&lt;p&gt;Really, we only needed to return to where we were currently standing before sundown, and we had an excess of time to do so.&lt;/p&gt;

&lt;p&gt;That being settled, we proceeded up Lions Head. It was steeper and had a few technical sections that would not be fun in the dark, but we still had a solid pace.&lt;/p&gt;

&lt;p&gt;Soon we gained the Ridgeline and could finally see Mt Washington in the distance. We had only a mile or so to go, and half of it was a flat walk along the ridgeline.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-12-tuckermanravinehike/IMG_20221210_131751175_HDR.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;It was strange to look around and see that we were on pretty much the only snow-capped peak.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-12-tuckermanravinehike/IMG_20221210_133427433_HDR.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We passed by Tuckerman Ravine from the top, and it did not look any friendlier.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-12-tuckermanravinehike/IMG_20221210_131748506_HDR.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Soon we were on the final ascent. We passed a few parties on their way down. All of them were wearing crampons, but we were getting excellent traction in our microspikes.&lt;/p&gt;

&lt;p&gt;The last half mile was slow. It was steep, and there was no clear path, only occasional large rock cairns and a multitude of faint branching trails in the snow.&lt;/p&gt;

&lt;p&gt;We picked our way slowly and carefully, stopping frequently so I could catch my breath. I’m still a little sour that Erin seemed to handle the last half mile much better than I did.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-12-tuckermanravinehike/IMG_20221210_134343789.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The summit was pretty cool, although we didn’t stick around long. Everything was covered in large spikes of ice, all pointing the same direction. It was a calm and sunny day, but the summit gave the vibe of “you’d better get going soon, bud.”&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-12-tuckermanravinehike/IMG_20221210_141217999_HDR.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We stuck around long enough for my hands to get cold trying to take pictures, and then we were off again.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-12-12-tuckermanravinehike/IMG_20221210_141623732_HDR.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;the-return&quot;&gt;The Return&lt;/h2&gt;

&lt;p&gt;Not a lot to say here. I didn’t take any pictures because we were hustling. The first half-mile of the descent was very slow and careful, but then we started to accelerate when the terrain became easier.&lt;/p&gt;

&lt;p&gt;At one point, we passed a guided tour on a tricker section of trail. One of the members was so impressed with Erin’s climbing that she asked for permission to take pictures. Erin obliged her.&lt;/p&gt;

&lt;p&gt;We got within a half mile of the trailhead before we finally had to get out our headlamps.&lt;/p&gt;

&lt;p&gt;We made it back just before 5PM, safe and sound.&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;

&lt;p&gt;Winter hiking is pretty fun, especially when conditions happen to be absolutely perfect. We got really lucky in that regard.&lt;/p&gt;

&lt;p&gt;I think we planned our layers well and would have been prepared for much colder circumstances. What we lacked was mobility, and crampons + axes might be a good future investment.&lt;/p&gt;

&lt;p&gt;All in all, it was a pretty fun trip, and I’m excited to get back out to Tuckerman Ravine again soon.&lt;/p&gt;</content><author><name>Beau Horenberger</name></author><category term="diary" /><summary type="html">Context Context</summary></entry><entry><title type="html">Newton’s Law of Cooling</title><link href="http://localhost:4000/2022/11/21/newtonslawofcooling.html" rel="alternate" type="text/html" title="Newton’s Law of Cooling" /><published>2022-11-21T00:00:00-05:00</published><updated>2022-11-21T00:00:00-05:00</updated><id>http://localhost:4000/2022/11/21/newtonslawofcooling</id><content type="html" xml:base="http://localhost:4000/2022/11/21/newtonslawofcooling.html">&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#the-birth-of-the-cool&quot; id=&quot;markdown-toc-the-birth-of-the-cool&quot;&gt;The Birth of the Cool&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#newtons-law-of-cooling&quot; id=&quot;markdown-toc-newtons-law-of-cooling&quot;&gt;Newton’s Law of Cooling&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#in-conclusion&quot; id=&quot;markdown-toc-in-conclusion&quot;&gt;In Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;the-birth-of-the-cool&quot;&gt;The Birth of the Cool&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Newton%27s_law_of_cooling&quot;&gt;Newton’s law of cooling&lt;/a&gt; is a fun little equation that tells you how fast hot things cool off.&lt;/p&gt;

&lt;p&gt;According to Wikipedia, the law can be stated as&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The rate of heat loss of a body is directly proportional to the difference in the temperatures between the body and its environment.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Wikipedia briefly attributes the equation to Newton, but when I went to look at Newton’s paper myself, I was a little confused. Then I found some &lt;a href=&quot;https://sci-hub.se/https://www.tandfonline.com/doi/abs/10.1080/001075199181549&quot;&gt;supplementary papers&lt;/a&gt; which assured me that I had a right to be confused.&lt;/p&gt;

&lt;p&gt;So anyways, here’s a quick little story about the origin of the cooling law.&lt;/p&gt;

&lt;h2 id=&quot;newtons-law-of-cooling&quot;&gt;Newton’s Law of Cooling&lt;/h2&gt;

&lt;p&gt;Newton’s law of cooling is usually ascribed to an anonymous work (by Newton) published  in 1701, &lt;a href=&quot;https://archive.org/details/philtrans07084697&quot;&gt;Scala Graduum Caloris&lt;/a&gt;, or, in English, &lt;a href=&quot;https://www.originalsources.com/Document.aspx?DocID=S6VEXZVMWT1M2W2&quot;&gt;A Scale Of The Degrees Of Heat&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The paper itself has &lt;em&gt;no equations&lt;/em&gt;, and in fact the bulk of the paper is just a fat table containing temperatures of various important things:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/newtonslawofcooling/newtonscaleexample.png&quot; alt=&quot;Examples from Newton's table of temperatures&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Newton deemed these temperatures important and worth measuring&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;In fact, the goal of this paper was to create a good temperature scale (Celsius didn’t exist yet) and to observe the temperatures of important events on these scales. No derivations or mathematical finagling.&lt;/p&gt;

&lt;p&gt;Towards the end of the paper, Newton also described how he measured the temperature of events hotter than a traditional thermometer can handle, such as the heat at which certain metals stopped glowing. The method involved setting the object of interest on a hot block of iron and timing the iron as it cooled. We’ll discuss how this works at the end of the article, but it relies on the cooling law.&lt;/p&gt;

&lt;p&gt;Newton’s profound cooling law–which preceeded a revolution in the science of heat transfer–is actually just an off-handed remark about the cooling of hot iron:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The iron was laid not in a calm air, but in a wind that blew uniformly upon it, that the air heated by the iron might be always carried off by the wind and the cold air succeed it alternately; for thus equal parts of air were heated in equal times, and received a degree of heat proportional to the heat of the iron&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://sci-hub.se/https://www.tandfonline.com/doi/abs/10.1080/001075199181549&quot;&gt;The idea can be illustrated quite nicely&lt;/a&gt;:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/newtonslawofcooling/stolendiagram.png&quot; alt=&quot;How air cools iron&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;How air cools iron&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;So Newton’s logic was essentially “Heat is very similar to temperature, so if the temperature change is $T_w - T_b$, then the heat exchanged is probably proportional.”&lt;/p&gt;

&lt;p&gt;Totally unrigorous, and yet, he pretty much nailed it.&lt;/p&gt;

&lt;p&gt;At the time, there was almost no theoretical understanding of heat. &lt;a href=&quot;https://antonhowes.substack.com/p/age-of-invention-why-wasnt-the-steam-76c&quot;&gt;The thermometer had only been invented in the last 100 years&lt;/a&gt;, and &lt;a href=&quot;https://en.wikipedia.org/wiki/Kinetic_theory_of_gases&quot;&gt;Daniel Bernoulli’s model of heat as particles bumping around&lt;/a&gt; was still 40 years from being invented.&lt;/p&gt;

&lt;p&gt;This is all to say that “temperature” and “heat” were both super vague terms, and Newton used them interchangeably.&lt;/p&gt;

&lt;p&gt;In more modern terms, if we let $T$ be the temperature of our iron and $T_a$ be our ambient temperature, &lt;a href=&quot;https://web.archive.org/web/20160614213315/http://paginas.fisica.uson.mx/laura.yeomans/tc/Sci-Edu-Springer-2010.pdf&quot;&gt;Newton was saying that&lt;/a&gt;&lt;/p&gt;

\[\frac{dT}{dt} \propto -(T - T_a)\]

&lt;p&gt;And he really believed it was an obvious and logical law.&lt;/p&gt;

&lt;p&gt;An important consequence noted by Newton is that&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;if the times of cooling are taken equal, the heats will be in a geometrical progression and consequently can easily be found with a table of logarithms&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;This means that if $\frac{dT}{dt} = -K(T - T_a)$ for some constant $K$, then we can solve this as a separable differential equation,&lt;/p&gt;

\[\begin{align}
\frac{1}{-K(T - T_a)}dT = dt \implies\\
\int_{T(0)}^{T(t)} \frac{1}{-K(T - T_a)}dT = t \implies\\
\frac{1}{-K}\frac{\log(T(t) - T_a)}{\log(T(0) - T_a)} = t
\end{align}\]

&lt;p&gt;So Newton was saying that you could measure the heat of the iron at a few points in time, solve the constants in this equation, and then extrapolate to find the heat at times that were too hot for a thermometer to measure. Pretty cool!&lt;/p&gt;

&lt;h2 id=&quot;in-conclusion&quot;&gt;In Conclusion&lt;/h2&gt;

&lt;p&gt;No morals to this story. I just thought this was a fun concept and a cool historical oddity. Thanks for reading!&lt;/p&gt;

&lt;p&gt;Oh, addendum: a challenge to my readers. Erin asked me an interesting question: if Newton didn’t write the equation, then when did the modern formulation of the cooling law first appear? If you can solve this, I’d be very pleased.&lt;/p&gt;</content><author><name>Beau Horenberger</name></author><category term="blog" /><summary type="html"></summary></entry><entry><title type="html">Tropisms</title><link href="http://localhost:4000/2022/10/10/tropisms.html" rel="alternate" type="text/html" title="Tropisms" /><published>2022-10-10T00:00:00-04:00</published><updated>2022-10-10T00:00:00-04:00</updated><id>http://localhost:4000/2022/10/10/tropisms</id><content type="html" xml:base="http://localhost:4000/2022/10/10/tropisms.html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;I am not gravitropic.
My body splays out, feeling,
Searching.
For what?
I am not phototropic.
I curl inward on myself;
These gnarled limbs entwine.
But I will find something,
Even if it is not the light,
As my bark scrapes along itself
Rendering the surface
So as to mark its way
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>Beau Horenberger</name></author><category term="diary" /><summary type="html">I am not gravitropic. My body splays out, feeling, Searching. For what? I am not phototropic. I curl inward on myself; These gnarled limbs entwine. But I will find something, Even if it is not the light, As my bark scrapes along itself Rendering the surface So as to mark its way</summary></entry><entry><title type="html">Bernoulli Diffusion Derivations</title><link href="http://localhost:4000/2022/10/03/bernoulliderivations.html" rel="alternate" type="text/html" title="Bernoulli Diffusion Derivations" /><published>2022-10-03T00:00:00-04:00</published><updated>2022-10-03T00:00:00-04:00</updated><id>http://localhost:4000/2022/10/03/bernoulliderivations</id><content type="html" xml:base="http://localhost:4000/2022/10/03/bernoulliderivations.html">&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#what-is-bernoulli-diffusion&quot; id=&quot;markdown-toc-what-is-bernoulli-diffusion&quot;&gt;What is Bernoulli Diffusion?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#who-is-this-article-for&quot; id=&quot;markdown-toc-who-is-this-article-for&quot;&gt;Who is this article for?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#prependix&quot; id=&quot;markdown-toc-prependix&quot;&gt;Prependix&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#kl-divergence-of-multivariate-bernoulli-distributions&quot; id=&quot;markdown-toc-kl-divergence-of-multivariate-bernoulli-distributions&quot;&gt;KL divergence of Multivariate Bernoulli Distributions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#tildebeta_t-for-calculating-qleftmathbfxtvert-mathbfx0-right&quot; id=&quot;markdown-toc-tildebeta_t-for-calculating-qleftmathbfxtvert-mathbfx0-right&quot;&gt;$\tilde{\beta}_t$ for Calculating $q\left(\mathbf{x}^{(t)}\vert \mathbf{x}^{(0)} \right)$&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#calculating-the-posterior-qleftmathbfxt-1vert-mathbfxtmathbfx0-right&quot; id=&quot;markdown-toc-calculating-the-posterior-qleftmathbfxt-1vert-mathbfxtmathbfx0-right&quot;&gt;Calculating the Posterior $q\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)},\mathbf{x}^{(0)} \right)$&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#entropy-of-multivariate-bernoulli-distributions&quot; id=&quot;markdown-toc-entropy-of-multivariate-bernoulli-distributions&quot;&gt;Entropy of Multivariate Bernoulli Distributions&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;what-is-bernoulli-diffusion&quot;&gt;What is Bernoulli Diffusion?&lt;/h2&gt;

&lt;p&gt;Short answer: &lt;a href=&quot;https://github.com/horenbergerb/BernoulliDiffusion&quot;&gt;a Github repo that I made.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Long answer:&lt;/p&gt;

&lt;p&gt;Diffusion originated from the classic publication &lt;a href=&quot;https://arxiv.org/abs/1503.03585&quot;&gt;Deep Unsupervised Learning using Nonequilibrium Thermodynamics&lt;/a&gt; by Sohl-Dickstein et al.&lt;/p&gt;

&lt;p&gt;In the original paper–as well as most practical applications of diffusion (see &lt;a href=&quot;https://arstechnica.com/information-technology/2022/09/with-stable-diffusion-you-may-never-believe-what-you-see-online-again/&quot;&gt;stable-diffusion&lt;/a&gt;)–a Gaussian Markov diffusion kernel is used. This means the algorithm iteratively applies Gaussian noise to samples from the target distribution and then learns to reverse the noising process.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/notesonbernoullidiffusion/gaussiandiffusionillustration.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;An illustration of Gaussian diffusion stolen from &lt;a href=&quot;https://arxiv.org/abs/2006.11239&quot;&gt;this paper&lt;/a&gt;. You’re legally required to put this in any technical article about diffusion.&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;However, the original paper offhandedly mentions that you can also implement diffusion for binary-valued data using a &lt;a href=&quot;https://en.wikipedia.org/wiki/Bernoulli_distribution&quot;&gt;Bernoulli distribution&lt;/a&gt; as your Markov diffusion kernel.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/notesonbernoullidiffusion/originalpaperbernoullidiffusion.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;A segment of the original diffusion paper which mentions using Bernoulli diffusion to learn “heartbeat data”.&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The authors of the paper &lt;a href=&quot;https://github.com/Sohl-Dickstein/Diffusion-Probabilistic-Models/tree/master&quot;&gt;published the code for the Gaussian diffusion&lt;/a&gt;, but for some reason chose not to publish the Bernoulli diffusion model. I have yet to find an implementation of Bernoulli diffusion anywhere on the internet.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/horenbergerb/BernoulliDiffusion&quot;&gt;So I decided to implement it myself&lt;/a&gt;. It was very hard. I calculated a lot of things and learned a lot of fancy new words.&lt;/p&gt;

&lt;p&gt;Here I will be detailing some of the more interesting derivations that I haven’t seen documented anywhere else.&lt;/p&gt;

&lt;h2 id=&quot;who-is-this-article-for&quot;&gt;Who is this article for?&lt;/h2&gt;

&lt;p&gt;Me. I need to dump this all somewhere so that I can finally forget it. However, it might help if you are trying to understand the code in the Bernoulli Diffusion repo. One day in the distant future, these notes might even help college students cheat on their homework.&lt;/p&gt;

&lt;h2 id=&quot;prependix&quot;&gt;Prependix&lt;/h2&gt;

&lt;p&gt;Most of these calculations have to do with the terms involved in this the loss approximation (equation 14 in the paper):&lt;/p&gt;

\[K = -\sum_{t=2}^T\int d\mathbf{x}^{(0)} d\mathbf{x}^{(t)} q\left(\mathbf{x}^{(0)}, \mathbf{x}^{(t)} \right)\cdot \\
D_{KL}\left(q\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)},\mathbf{x}^{(0)} \right) \vert \vert p\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)}\right)\right) \\
+ H_q(\mathbf{X}^{(T)}\vert \mathbf{X}^{(0)}) - H_q(\mathbf{X}^{(1)}\vert \mathbf{X}^{(0)}) - H_p(\mathbf{X}^{(T)})\]

&lt;p&gt;So I figured I’d prepend it here for reference later.&lt;/p&gt;

&lt;h2 id=&quot;kl-divergence-of-multivariate-bernoulli-distributions&quot;&gt;KL divergence of Multivariate Bernoulli Distributions&lt;/h2&gt;

&lt;p&gt;In order to calculate $K$, we will need to calculate&lt;/p&gt;

\[D_{KL}\left(q\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)},\mathbf{x}^{(0)} \right) \vert \vert p\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)}\right)\right)\]

&lt;p&gt;Where $q\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)},\mathbf{x}^{(0)} \right)$ and $p\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)}\right)$ are both essentially a bunch of Bernoulli distributions.&lt;/p&gt;

&lt;p&gt;I actually found the answer &lt;a href=&quot;https://math.stackexchange.com/questions/2604566/kl-divergence-between-two-multivariate-bernoulli-distribution&quot;&gt;here&lt;/a&gt;, so I’m not going to elaborate on this one.&lt;/p&gt;

&lt;h2 id=&quot;tildebeta_t-for-calculating-qleftmathbfxtvert-mathbfx0-right&quot;&gt;$\tilde{\beta}_t$ for Calculating $q\left(\mathbf{x}^{(t)}\vert \mathbf{x}^{(0)} \right)$&lt;/h2&gt;

&lt;p&gt;Okay, so in &lt;a href=&quot;https://arxiv.org/abs/2006.11239&quot;&gt;this paper&lt;/a&gt; the authors casually remark that the forward process in Gaussian diffusion has a really nice computational property. Specifically, if&lt;/p&gt;

\[q\left(\mathbf{x}^{(t)}\vert \mathbf{x}^{(t-1)} \right) =\mathcal{N}\left(\mathbf{x}^{(t)};\sqrt{1-\beta_t}\mathbf{x}^{(t-1)}, \beta_t\mathbf{I}\right)\]

&lt;p&gt;then you can define $\alpha_t := 1-\beta_t$ and $\bar{\alpha_t} := \prod_{s=1}^{t} \alpha_{s}$, and it follows that&lt;/p&gt;

\[q\left(\mathbf{x}^{(t)}\vert \mathbf{x}^{(0)} \right) =\mathcal{N}\left(\mathbf{x}^{(t)};\sqrt{\bar{\alpha}_t}\mathbf{x}^{(0)}, (1-\bar{\alpha}_t)\mathbf{I}\right)\]

&lt;p&gt;So, in other words, you don’t have to iterate the forward noising process $t$ times to get a sample $\mathbf{x}^{(t)}$. You can just sample it directly.&lt;/p&gt;

&lt;p&gt;I figured something similar held for the Bernoulli case. However, the authors didn’t actually demonstrate how this relationship is derived. I’ll leave the Gaussian case as an exercise and show the Bernoulli case instead.&lt;/p&gt;

&lt;p&gt;We can focus on an individual digit $\mathbf{x}^{(t)}_i$. The way I derived this was by denoting&lt;/p&gt;

\[\mathbf{x}^{(t)}_i = \mathbf{x}^{(t-1)}_i(1-\epsilon_t) + (1-\mathbf{x}^{(t-1)}_i)\epsilon_t = \mathbf{x}^{(t-1)}_i + \epsilon_t - 2\epsilon_t \mathbf{x}^{(t-1)}_i\]

&lt;p&gt;Where $\epsilon_t = \mathcal{B}(0.5\beta_t)$ is a Bernoulli random variable. This is just another way of representing the typical noising process as a probability of flipping bits.&lt;/p&gt;

&lt;p&gt;I used this recursively to represent $\mathbf{x}^{(t+1)}_i$ in terms of $\mathbf{x}^{(t-1)}_i$ and then simplified to find that:&lt;/p&gt;

\[\mathbf{x}^{(t+1)}_i = \mathbf{x}^{(t-1)}_i + \epsilon_t + \epsilon_{t+1} - \epsilon_t \epsilon_{t+1} - 2(\epsilon_t + \epsilon_{t+1} - \epsilon_t \epsilon_{t+1})\mathbf{x}^{(t-1)}_i\]

&lt;p&gt;denoting $\tilde{\epsilon}_ {t+1} := \epsilon_t + \epsilon_{t+1} - \epsilon_t \epsilon_{t+1}$, we see that&lt;/p&gt;

\[\mathbf{x}^{(t+1)}_i = \mathbf{x}^{(t-1)}_i + \tilde{\epsilon}_{t+1} - 2\tilde{\epsilon}_{t+1}\mathbf{x}^{(t-1)}_i\]

&lt;p&gt;Which is the same relationship as the original case! If we wanted to skip even further, say from $\mathbf{x}^{(t-1)}$ to $\mathbf{x}^{(t+2)}$, then we would derive that&lt;/p&gt;

\[\mathbf{x}^{(t+2)}_i = \mathbf{x}^{(t-1)}_i + \tilde{\epsilon}_{t+1} + \epsilon_{t+2} - {\epsilon}_{t+1}\epsilon_{t+2} - 2(\tilde{\epsilon}_{t+1} + \epsilon_{t+2} - {\epsilon}_{t+1}\epsilon_{t+2})\mathbf{x}^{(t-1)}_i\]

&lt;p&gt;So generally we have that&lt;/p&gt;

\[\tilde{\epsilon}_ {t+1} = \tilde{\epsilon}_{t} + \epsilon_{t+1} - \tilde{\epsilon}_{t}\epsilon_{t+1}\]

&lt;p&gt;Then the corresponding Bernoulli distribution is&lt;/p&gt;

\[\mathcal{B}(0.5(\tilde{\beta}_{t} + \beta_{t+1} - \beta_{t+1}\tilde{\beta}_{t})) := \mathcal{B}(0.5\tilde{\beta}_{t+1})\]

&lt;p&gt;And we have a recursive relationship for our desired values,&lt;/p&gt;

\[\tilde{\beta}_{t+1} = \tilde{\beta}_{t} + \beta_{t+1} - \beta_{t+1}\tilde{\beta}_{t}\]

&lt;p&gt;Then&lt;/p&gt;

\[q\left(\mathbf{x}^{(t)}\vert \mathbf{x}^{(0)} \right) =\mathcal{B}\left(\mathbf{x}^{(0)}(1-\tilde{\beta}_{t}) + 0.5\tilde{\beta}_{t}\right)\]

&lt;p&gt;Badda bing, badda boom.&lt;/p&gt;

&lt;h2 id=&quot;calculating-the-posterior-qleftmathbfxt-1vert-mathbfxtmathbfx0-right&quot;&gt;Calculating the Posterior $q\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)},\mathbf{x}^{(0)} \right)$&lt;/h2&gt;

&lt;p&gt;Another obstacle while computing the loss $K$ is the posterior,&lt;/p&gt;

\[q\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)},\mathbf{x}^{(0)} \right)\]

&lt;p&gt;Where $\mathbf{x}$ and $\mathbf{x}^{(t)}$ are given. The first time I saw this, I had no idea how to even interpret it, and the authors never even mention it beyond “oh, yeah, that’s the posterior.”&lt;/p&gt;

&lt;p&gt;But contextually, it seems like it should be analytically computable, and in fact you can find a &lt;a href=&quot;https://github.com/Sohl-Dickstein/Diffusion-Probabilistic-Models/blob/master/model.py#L203&quot;&gt;computation of the posterior in the source code of the Gaussian diffusion repo&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I eventually realized that the authors don’t mention it because it’s trivial to a keen Bayesian statistican. Essentially, you can think of this as a tiny Bayesian model within the larger system. The inspiration came to me while reading &lt;a href=&quot;http://www.stat.columbia.edu/~gelman/book/&quot;&gt;Bayesian Data Analysis, by Andrew Gelman&lt;/a&gt;, particularly section 2.5. This is coincidentally almost exactly the solution for the Gaussian posterior.&lt;/p&gt;

&lt;p&gt;Usually with a Bayesian system, you construct a sampling model $p(y\vert \theta)$ dependent on the parameters $\theta$. Then you establish a prior distribution on the parameters $p(\theta)$.&lt;/p&gt;

&lt;p&gt;When you finally collect data $y$ and want to determine the proper parameters $\theta$, you’ll need to calculate the posterior distribution (or something proportional to it):&lt;/p&gt;

\[p(\theta \vert y) = \frac{p(y\vert\theta)p(\theta)}{p(y)}\]

&lt;p&gt;we can translate this into our current case as follows:&lt;/p&gt;

\[y = \mathbf{x}^{(t)} \\
\theta = \mathbf{x}^{(t-1)} \\
p(\theta) = q\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(0)} \right) = \mathcal{B}\left(\mathbf{x}^{(0)}(1-\tilde{\beta}_{t-1}) + 0.5\tilde{\beta}_{t-1}\right) \\
p(y\vert \theta) = q\left(\mathbf{x}^{(t)}\vert \mathbf{x}^{(t-1)},\mathbf{x}^{(0)} \right) = \mathcal{B}\left(\mathbf{x}^{(t-1)}(1-\beta_{t}) + 0.5\beta_{t}\right) \\
p(\theta\vert y) = q\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(t)},\mathbf{x}^{(0)} \right) \\
p(y) = q\left(\mathbf{x}^{(t)}\vert \mathbf{x}^{(0)} \right)\]

&lt;p&gt;Now the given variables, $\mathbf{x}^{(t)}$ and $\mathbf{x}^{(0)}$, determine a prior distribution and a set of observations, so we can get to work calculating the posterior&lt;/p&gt;

\[p(\theta \vert y) = \frac{q\left(\mathbf{x}^{(t)}\vert \mathbf{x}^{(t-1)},\mathbf{x}^{(0)} \right)q\left(\mathbf{x}^{(t-1)}\vert \mathbf{x}^{(0)} \right)}{q\left(\mathbf{x}^{(t)}\vert \mathbf{x}^{(0)} \right)}\]

&lt;p&gt;Since we parameterize the Bernoulli distributions using the probability of observing 1, want to calculate $p(\theta =1\vert y)$ and thus we set $\mathbf{x}^{(t-1)} = 1$.&lt;/p&gt;

&lt;p&gt;I also ended up calculating the cases for $\mathbf{x}^{(t)} = 1$ and $\mathbf{x}^{(t)} = 0$ separately because it seemed easier. Then I combined them into a single equation:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;posterior = x_0*(1-self.beta_tilde_t[t-1]) + 0.5*self.beta_tilde_t[t-1]
posterior *= x_t * (1-0.5*beta_t) + (1 - x_t) * (0.5*beta_t)
normalizing_constant = x_t * self.q_conditional_prob_wrt_x_0(x_0, t) + (1-x_t) * (1-self.q_conditional_prob_wrt_x_0(x_0, t))
posterior = posterior / normalizing_constant
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;del&gt;Honestly, I’m still not totally sure if this needs to be normalized or something. I should probably put that on my long list of to-dos.&lt;/del&gt; EDIT (11/3/2022): The former documentation has been updated and now describes how to calculate a normalized posterior. I did, indeed, need to normalize the posterior. I spent an entire month trying to figure out why my diffusion implementation was apparently experiencing mode collapse. It was because the posterior needed to be normalized.&lt;/p&gt;

&lt;p&gt;Often, the normalization factor is intractable, so it is purposefully ommitted in many discussions of posterior calculation. It is very easy to calculate in this case, and I should have checked before assuming we did not need it.&lt;/p&gt;

&lt;p&gt;Do not be like me. Check whether the normalization factor is tractable.&lt;/p&gt;

&lt;h2 id=&quot;entropy-of-multivariate-bernoulli-distributions&quot;&gt;Entropy of Multivariate Bernoulli Distributions&lt;/h2&gt;

&lt;p&gt;This one was a doozy. While calculating that darn $K$ value, we find ourselves in need of the following entropies:&lt;/p&gt;

\[H_q(\mathbf{X}^{(T)}\vert \mathbf{X}^{(0)}) - H_q(\mathbf{X}^{(1)}\vert \mathbf{X}^{(0)}) - H_p(\mathbf{X}^{(T)})\]

&lt;p&gt;These are entropies of multivariate Bernoulli distributions. So, first thing’s first, the definition of the entropy of a discrete distribution $p(x)$ over $\mathcal{X}$ is&lt;/p&gt;

\[H(p(x)) = -\sum_{x\in\mathcal{X}}p(x)\log p(x)\]

&lt;p&gt;Now, for a single Bernoulli distribution with probability $0\leq c \leq 1$, it works out that&lt;/p&gt;

\[H(\mathcal{B}(c)) = -(c\log c + (1-c) \log (1-c))\]

&lt;p&gt;But life is not so simple when you get to the multivariate case. If we have $n$ Bernoulli distributions, each with probability $p_i$, then the probability of an outcome $x\in\{0,1\}^n$ is given by&lt;/p&gt;

\[p(x) = \prod_{i=1}^n x_i p_i + (1-x_i)(1-p_i)\]

&lt;p&gt;and there are $2^n$ values of $x$ in our entropy summation… If we are learning sequences of length 20, each loss calculation would involve summing $2^{20}=1048576$ products. That is not efficient.&lt;/p&gt;

&lt;p&gt;However! There are additional constraints at play which give us hope.&lt;/p&gt;

&lt;p&gt;Let’s consider $H_q(\mathbf{X}^{(T)}\vert \mathbf{X}^{(0)})$. Recall that&lt;/p&gt;

\[q\left(\mathbf{x}^{(T)}\vert \mathbf{x}^{(0)} \right) = \mathcal{B}\left(\mathbf{x}^{(0)}(1-\tilde{\beta}_{T}) + 0.5\tilde{\beta}_{T}\right)\]

&lt;p&gt;Consequently, each Bernoulli distribution can only have one of two probabilities:&lt;/p&gt;

\[p_i =
\begin{cases}
1-0.5\tilde{\beta}_T, &amp;amp; \text{if} &amp;amp; \mathbf{x}^{(0)}_i = 1 \\
0.5\tilde{\beta}_T, &amp;amp; \text{if} &amp;amp; \mathbf{x}^{(0)}_i = 0
\end{cases}\]

&lt;p&gt;It follows almost immediately that $\mathbf{x}^{(T)}_i = \mathbf{x}^{(0)}_i$, then the probability must be $1-0.5\tilde{\beta}_T$, and otherwise the probability of $\mathbf{x}^{(T)}_i$ is $0.5\tilde{\beta}_T$.&lt;/p&gt;

&lt;p&gt;In other words, the probability of any outcome $\mathbf{x}^{(T)}$ is totally determined by the number of digits it has in common with $\mathbf{x}^{(0)}$. If they agree in $k$ digits and disagree for the other $k-n$, then the probability of $\mathbf{x}^{(T)}$ is&lt;/p&gt;

\[(1-0.5\tilde{\beta}_T)^k (0.5\tilde{\beta}_T)^{n-k}\]

&lt;p&gt;So how many samples will have each probability? a bit of thought will convince you that there is $n$ choose $k$ ways to agree in $k$ digits.&lt;/p&gt;

&lt;p&gt;Now, how does this all tie back into entropy? Well, all three entropies are similar, but wrapping up the case of $H_q(\mathbf{X}^{(T)}\vert \mathbf{X}^{(0)})$, we can calculate that&lt;/p&gt;

\[H(p(x)) = -\sum_{x\in\mathcal{X}}p(x)\log p(x) \\
=-\sum_{k=0}^n {n\choose k}(1-0.5\tilde{\beta}_T)^k (0.5\tilde{\beta}_T)^{n-k}\log \left((1-0.5\tilde{\beta}_T)^k (0.5\tilde{\beta}_T)^{n-k}\right)\]

&lt;p&gt;Easy as.&lt;/p&gt;</content><author><name>Beau Horenberger</name></author><category term="blog" /><summary type="html">What is Bernoulli Diffusion? What is Bernoulli Diffusion?</summary></entry><entry><title type="html">The Mystery of the Frog Riddle</title><link href="http://localhost:4000/2022/08/16/mysteryofthefrogriddle.html" rel="alternate" type="text/html" title="The Mystery of the Frog Riddle" /><published>2022-08-16T00:00:00-04:00</published><updated>2022-08-16T00:00:00-04:00</updated><id>http://localhost:4000/2022/08/16/mysteryofthefrogriddle</id><content type="html" xml:base="http://localhost:4000/2022/08/16/mysteryofthefrogriddle.html">&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#problem-statement-suppose-you-must-lick-a-frog&quot; id=&quot;markdown-toc-problem-statement-suppose-you-must-lick-a-frog&quot;&gt;Problem Statement: Suppose You Must Lick A Frog&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#plot-twist-losing-my-marbles&quot; id=&quot;markdown-toc-plot-twist-losing-my-marbles&quot;&gt;Plot Twist: Losing My Marbles&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#clarifying-the-frog-problem&quot; id=&quot;markdown-toc-clarifying-the-frog-problem&quot;&gt;Clarifying the Frog Problem&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#shared-assumptions&quot; id=&quot;markdown-toc-shared-assumptions&quot;&gt;Shared Assumptions&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#frog-problem-formulation-1&quot; id=&quot;markdown-toc-frog-problem-formulation-1&quot;&gt;Frog Problem Formulation 1&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#frog-problem-formulation-2&quot; id=&quot;markdown-toc-frog-problem-formulation-2&quot;&gt;Frog Problem Formulation 2&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#the-boy-or-girl-paradox&quot; id=&quot;markdown-toc-the-boy-or-girl-paradox&quot;&gt;The Boy or Girl Paradox&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#the-crux&quot; id=&quot;markdown-toc-the-crux&quot;&gt;The Crux&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#conclusion&quot; id=&quot;markdown-toc-conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ps&quot; id=&quot;markdown-toc-ps&quot;&gt;PS&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Author’s Note:&lt;/p&gt;

&lt;p&gt;I have significantly overhauled this article since it was first published. Many readers crafted finely-tuned arguments, precisely identifying the logical weaknesses of my original post.&lt;/p&gt;

&lt;p&gt;In response, I have shuffled the logical weaknesses of the article around, rendering all previous discourse nonsensical.&lt;/p&gt;

&lt;h2 id=&quot;problem-statement-suppose-you-must-lick-a-frog&quot;&gt;Problem Statement: Suppose You Must Lick A Frog&lt;/h2&gt;

&lt;p&gt;Recently a friend of mine, Seong, posted an interesting video called “Can you solve the frog riddle? - Derek Abbot” in his &lt;a href=&quot;https://discord.gg/CywQETvt&quot;&gt;Discord server.&lt;/a&gt; The video describes a statistical puzzle:&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/cpwSGsb-rTs&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;The problem statement is as follows:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;…You’ve eaten a poisonous mushroom. To save your life, you need the antidote excreted by a certain species of frog. Unfortunately, only the female of the species produces the antidote, and to make matters worse, the male and female occur in equal numbers and look identical, with no way for you to tell them apart, except that the male has a distinctive croak…&lt;/p&gt;

  &lt;p&gt;To your left, you’ve spotted a frog on a tree stump, but before you start running to it, you’re startled by the croak of a male frog coming from a clearing in the opposite direction. There, you see two frogs, but you can’t tell which one made the sound… You only have time to go in one direction before you collapse.&lt;/p&gt;

  &lt;p&gt;What are your chances of survival if you head for the clearing and lick both of the frogs there? What about if you go to the tree stump?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The video eventually gets around to describing the proposed solution:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;So here’s the right answer: going for the clearing gives you a two in three chance of survival…&lt;/p&gt;

  &lt;p&gt;When we first see the two frogs, there are several possible combinations of male and female. If we write out the full list, we have what mathematicians call the sample space…&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The sample space for the frogs in the clearing looks like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Frog1 | Frog2
-------------
Male  | Male
Male  | Female
Female| Male
Female| Female
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then,&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Out of the four possible combinations, only one has two males… The croak gives us additional information. As soon as we know that one of the frogs is male, that tells us there can’t be a pair of females, which means we can eliminate that possibility from the sample space, leaving us with three possible combinations.&lt;/p&gt;

  &lt;p&gt;Of them, one still has two males, giving us our two in three chance… of getting a female.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;There you have it! It’s all clear, right? We see that probability is mysterious and confusing and you can always solve your problems by appealing to the sample space. There’s nothing left to talk about, case closed, see you later.&lt;/p&gt;

&lt;h2 id=&quot;plot-twist-losing-my-marbles&quot;&gt;Plot Twist: Losing My Marbles&lt;/h2&gt;

&lt;p&gt;It was late last night. I had just finished watching the frog video, and I was laying in bed feeling quite smug. Then, I received the following messages:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-08-16-mysteryofthefrogriddle/Pasted image 20220816172519.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-08-16-mysteryofthefrogriddle/Pasted image 20220816172544.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This made me feel bad.&lt;/p&gt;

&lt;p&gt;Let’s start with the base case. Suppose you have the bag with just one marble in it. Suppose this marble is equally likely to be red or black. If you were to draw the marble of the bag, it’s a one out of two, i.e. 50%, chance that the marble is black. No mystery there.&lt;/p&gt;

&lt;p&gt;Now, let’s take the bag with the unknown marble again. This time, we drop a red marble into the bag and give it a good shake. When we dump both marbles out of the bag, what are the odds we find a black marble? Well, let’s use the sample space approach from the frog video:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Marble1 | Marble2
-----------------
Black   | Black
Black   | Red
Red     | Black
Red     | Red
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But we know one of the marbles must be red, so &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Black Black&lt;/code&gt; can be crossed off the list. This leaves three possibilities, and two of them involve a black marble, so… There’s a two in three chance of finding a black marble?&lt;/p&gt;

&lt;p&gt;To be extremely clear, the conclusion here is this: dropping a red marble in the bag &lt;em&gt;increases the chance that the unknown marble will be black&lt;/em&gt;. You can extend this to show that as you add red marbles, the probability of the bag containing a black marble continues to rise.&lt;/p&gt;

&lt;p&gt;So what, do we just lay down and take this? Is this the reality we live in?&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-08-16-mysteryofthefrogriddle/Pasted image 20220816180915.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I think not.&lt;/p&gt;

&lt;h2 id=&quot;clarifying-the-frog-problem&quot;&gt;Clarifying the Frog Problem&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://stats.stackexchange.com/questions/201502/the-frog-riddle-conditional-probabilities&quot;&gt;We are not the first people to feel upset by this video.&lt;/a&gt; Additionally, &lt;a href=&quot;https://www.duckware.com/blog/the-ted-ed-frog-riddle-is-wrong/index.html&quot;&gt;we are not the first people to take a whack at correcting it.&lt;/a&gt; The cited attempt fixes the problem by assuming additional information. They assume males have a 50% chance of croaking, and females have a 0% chance of croaking. Then it follows that the probability of finding a female frog in the clearing matches the 2/3 from the original video. Another weird consequence is that the probability of the frog on the stump being female is now also 2/3, so both directions offer the same probability.&lt;/p&gt;

&lt;p&gt;I wanted to clarify the original problem so that it could be solved unambiguously, but I also wanted to keep the problem as close to the original formulation as possible.&lt;/p&gt;

&lt;p&gt;One way to remove ambiguity from the frog problem is by making it complete from a frequentist perspective. In other words, we should define the problem such that it contains sufficient information to set up and perform repeated trials. Then any mathematical proof about probabilities has a clear meaning: it is a statement about the quantity of each outcome after repeated trials (when the number of trials is very large). This comes with the added bonus that we can verify our theorems empirically.&lt;/p&gt;

&lt;p&gt;I found two formulations of the frog problem which are complete from the frequentist perspective. We will discuss both below.&lt;/p&gt;

&lt;h3 id=&quot;shared-assumptions&quot;&gt;Shared Assumptions&lt;/h3&gt;

&lt;p&gt;Both formulations use the following assumptions:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;The genders of frogs are independent and identically distributed.&lt;/li&gt;
  &lt;li&gt;$p(M)=p(F)=0.5$ for an arbitrarily sampled frog.&lt;/li&gt;
  &lt;li&gt;If you go to the stump, you will sample one frog.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;frog-problem-formulation-1&quot;&gt;Frog Problem Formulation 1&lt;/h3&gt;

&lt;p&gt;Additional assumptions:&lt;/p&gt;

&lt;ol start=&quot;4&quot;&gt;
  &lt;li&gt;If you go to the clearing, you will sample one frog and additionally receive a male frog.&lt;/li&gt;
  &lt;li&gt;If you go the clearing, there is a 50% chance you will sample before receiving the male frog (and a 50% chance of the converse).&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Note that this is equivalent to randomly assigning one of the frogs to be male (50/50 which frog gets chosen) and then randomly sampling the other frog’s gender.&lt;/p&gt;

&lt;p&gt;So what can we prove about this formulation?&lt;/p&gt;

&lt;p&gt;For the stump, it follows trivially from (2) and (3) that $p(M)=p(F)=0.5$, so you’ve got a 50% chance of getting a female frog.&lt;/p&gt;

&lt;p&gt;How about the clearing? Well, using (1), (2), and (4), we see that the frog we will sample has probabilities $p(M)=p(F)=0.5$. So what do our outcomes look like? This is where we must use assumption (5).&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Sample first, Sample is male (MM): $50\%*50\%=25\%$&lt;/li&gt;
  &lt;li&gt;Sample first, Sample is female (FM): $50\%*50\%=25\%$&lt;/li&gt;
  &lt;li&gt;Sample second, Sample is male (MM): $50\%*50\%=25\%$&lt;/li&gt;
  &lt;li&gt;Sample second, Sample is female (MF): $50\%*50\%=25\%$&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Now, adding these up, we see that (MM) has a probability of 50% whereas (FM) and (MF) together have a probability of 50%.&lt;/p&gt;

&lt;p&gt;Thus, it’s clear that there is only a 50% chance that you will survive if you run to the clearing.&lt;/p&gt;

&lt;p&gt;I’ve got the data to back it up:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;from random import randint

num_trials = 1000000
num_trials_survived = 0

for i in range(num_trials):
    both_frogs = []
    known_frog = ['M']
    unknown_frog = ['F'] if randint(0,1) else ['M']
    # Shuffle the known and unknown frog
    if randint(0,1):
        both_frogs = known_frog + unknown_frog
    else:
        both_frogs = unknown_frog + known_frog
    if 'F' in both_frogs:
        num_trials_survived += 1

print(num_trials_survived/num_trials) # 0.500412
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;frog-problem-formulation-2&quot;&gt;Frog Problem Formulation 2&lt;/h3&gt;

&lt;p&gt;Additional assumptions:&lt;/p&gt;

&lt;ol start=&quot;4&quot;&gt;
  &lt;li&gt;If you go to the clearing, you will sample two frogs. If both frogs are female, resample both frogs.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This approach was not intuitive to me. I read a lot of angry Facebook comments describing this method before I finally understood that it was different from Formulation 1.&lt;/p&gt;

&lt;p&gt;This approach is computationally annoying because each trial might involve resampling multiple times. (Note to self: is there a way that avoids resampling?) However, it meets all the criteria of the original frog problem, just like Formulation 1.&lt;/p&gt;

&lt;p&gt;The single frog on the stump is the same as before: (2) and (3) imply a 50% chance of survival.&lt;/p&gt;

&lt;p&gt;The two frogs in the clearing, however, are different. Let’s step through a single trial. For the first sample, there are four possible outcomes:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Sample 1
__________________________________
Outcome         | Probability
________________________________
M M             | 0.5*0.5 = 0.25
M F             | 0.5*0.5 = 0.25
F M             | 0.5*0.5 = 0.25
F F (Resample)  | 0.5*0.5 = 0.25
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If we drew (FF) and needed to resample, the odds would be identical for Sample 2.&lt;/p&gt;

&lt;p&gt;So what are the odds that you get (FF) for Sample 1, resample once, and then get (MF) for Sample 2? The answer is $0.25*0.25$. We can similarly calculate the odds of resampling an arbitrary number of times before getting (MM), (MF), or (FM).&lt;/p&gt;

&lt;p&gt;It follows that, for each trial, the actual probability for $MM$, $MF$, and $FM$ are all equal:&lt;/p&gt;

\[P(MM)=P(MF)=P(FM)=\sum_{n=1}^\infty 0.25^n = \frac{1}{3}\]

&lt;p&gt;Then it follows that the probability of survival is equal to $P(MF)+P(FM) = \frac{2}{3}$.&lt;/p&gt;

&lt;p&gt;Here’s the empirical evidence for those who lack faith:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;from random import randint

num_trials = 1000000
num_trials_survived = 0

def sample_frog():
    return ['F'] if randint(0,1) else ['M']

for i in range(num_trials):
    both_frogs = sample_frog() + sample_frog()
    while both_frogs == ['F', 'F']:
        both_frogs = sample_frog() + sample_frog()
    if 'F' in both_frogs:
        num_trials_survived += 1

print(num_trials_survived/num_trials) # 0.666342
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;the-boy-or-girl-paradox&quot;&gt;The Boy or Girl Paradox&lt;/h2&gt;

&lt;p&gt;Let me start by stating a subtle yet crucial mathematical fact:&lt;/p&gt;

\[\frac{2}{3}\neq \frac{1}{2}\]

&lt;p&gt;We have created two experimental setups which met all of the criteria from the original problem, and each setup produced different probabilities of survival. How? Why? Let’s reiterate what we know:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Both probabilities were derived incontrovertibly from their respective assumptions&lt;/li&gt;
  &lt;li&gt;In both formulations, there are two frogs in the clearing such that at least one frog is male&lt;/li&gt;
  &lt;li&gt;The only difference between the two formulations is how we sampled the two frogs in the clearing&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;It turns out that we have stumbled into the &lt;a href=&quot;https://en.wikipedia.org/wiki/Boy_or_Girl_paradox#Second_question&quot;&gt;Boy or Girl paradox&lt;/a&gt;. The paradox regards a set of two questions which first appeared in 1959 in the Scientific American. The questions were presented as statistics brain teasers. We are most interested in the second question of the two:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Mr. Smith has two children. At least one of them is a boy. What is the probability that both children are boys?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;It wasn’t until after publication that the author, Martin Gardner, realized the question was incomplete; the answer could be $\frac{1}{2}$ or $\frac{2}{3}$ depending on how we determined that “at least one of them is a boy.”&lt;/p&gt;

&lt;p&gt;According to Wikipedia, the two outcomes can be obtained from the following two sampling procedures:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;From all families with two children, one child is selected at random, and the sex of that child is specified to be a boy. This would yield an answer of 1/2.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;From all families with two children, at least one of whom is a boy, a family is chosen at random. This would yield the answer of 1/3.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Can we translate this into frog licking? Let’s start with formulating the question:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The clearing has two frogs. At least one of them croaks (and therefore is male). What is the probability that both frogs are male?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Now the sampling methods:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;From all clearings with two frogs, one frog is selected at random, and the sex of that frog is specified to be male. This would yield the answer of 1/2.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;From all clearings with two frogs, at least one of whom is a male, a clearing is chosen at random. This would yield the answer of 1/3.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;We can verify these map to the two Frog Problem Formulations above. Frog Problem Formulation 2 corresponds to selecting a clearing at random out of all clearings with two frogs, one of whom is male. This is why we only throw out (MM) samples.&lt;/p&gt;

&lt;p&gt;On the other hand, Frog Problem Formulation 1 corresponds to selecting a random frog and observing that it is male.&lt;/p&gt;

&lt;p&gt;Clearly, we are caught in a paradox. And now it’s time to resolve the paradox. We have to decide on a sampling method.&lt;/p&gt;

&lt;h2 id=&quot;the-crux&quot;&gt;The Crux&lt;/h2&gt;

&lt;p&gt;So here we are. I’ve tipped my hand. You know everything I know. One question remains.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Suppose that tomorrow I’m out wandering in a clearing. Behind me, I hear a croak. I turn around and see two frogs. What is the probability that at least one of the frogs is female?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;In my opinion,&lt;/em&gt; because I did not select the clearing specifically to guarantee that it would have at least one male, then it follows that the first sampling method from the previous section is the correct method, and the probability is thus 1/2.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;In my opinion,&lt;/em&gt; if you disagree with me, then you are a baboon and the game was rigged from the start.&lt;/p&gt;

&lt;p&gt;But I’ll be honest. I’m not 100% sure I’ve got the right answer here, much less that there’s a correct answer at all. But I have to follow my heart, and my heart is telling me that you’re an simpleton if you think the probability is 1/3.&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;It seems pretty fucking clear to me that this video sucks. At best, it leaves out essential assumptions. At worst, it’s straight-up wrong. I stayed up until 2AM thinking about this, and I &lt;em&gt;almost&lt;/em&gt; gave in to the belief that adding black marbles to the bag makes the red marble more likely. This video made me hit rock bottom.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2022-08-16-mysteryofthefrogriddle/Pasted image 20220816183317.png&quot; alt=&quot;Credit to 16mhz from the TPM Discord server&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ps&quot;&gt;PS&lt;/h2&gt;

&lt;p&gt;There are other famous problems where different sampling procedures produce different results, such as the &lt;a href=&quot;https://en.wikipedia.org/wiki/Bertrand_paradox_(probability)&quot;&gt;Bertrand paradox&lt;/a&gt;. The Bertrand paradox is still considered unresolved.&lt;/p&gt;

&lt;p&gt;Also, the Marble paradox is left as an exercise to the reader.&lt;/p&gt;</content><author><name>Beau Horenberger</name></author><category term="blog" /><summary type="html">Author’s Note:</summary></entry><entry><title type="html">What is an object? Object Detection and Philosophy… In Runescape</title><link href="http://localhost:4000/2022/07/19/runescapeobjectdetection.html" rel="alternate" type="text/html" title="What is an object? Object Detection and Philosophy… In Runescape" /><published>2022-07-19T00:00:00-04:00</published><updated>2022-07-19T00:00:00-04:00</updated><id>http://localhost:4000/2022/07/19/runescapeobjectdetection</id><content type="html" xml:base="http://localhost:4000/2022/07/19/runescapeobjectdetection.html">&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#the-means-justify-the-ends&quot; id=&quot;markdown-toc-the-means-justify-the-ends&quot;&gt;The means justify the ends&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#extracting-bounding-boxes-from-runelite&quot; id=&quot;markdown-toc-extracting-bounding-boxes-from-runelite&quot;&gt;Extracting bounding boxes from Runelite&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#calculating-bounding-boxes&quot; id=&quot;markdown-toc-calculating-bounding-boxes&quot;&gt;Calculating bounding boxes&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#exporting-the-data&quot; id=&quot;markdown-toc-exporting-the-data&quot;&gt;Exporting the data&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#approximating-whether-an-object-is-visible&quot; id=&quot;markdown-toc-approximating-whether-an-object-is-visible&quot;&gt;Approximating whether an object is visible&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#defining-images-and-objects&quot; id=&quot;markdown-toc-defining-images-and-objects&quot;&gt;Defining images and objects&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#what-is-an-object-like&quot; id=&quot;markdown-toc-what-is-an-object-like&quot;&gt;What is an object like?&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#surprise-were-talking-about-region-proposal&quot; id=&quot;markdown-toc-surprise-were-talking-about-region-proposal&quot;&gt;Surprise! We’re talking about region proposal!&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#the-visibility-model&quot; id=&quot;markdown-toc-the-visibility-model&quot;&gt;The visibility model&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#training-an-object-detector&quot; id=&quot;markdown-toc-training-an-object-detector&quot;&gt;Training an object detector&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#conclusion&quot; id=&quot;markdown-toc-conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;the-means-justify-the-ends&quot;&gt;The means justify the ends&lt;/h2&gt;

&lt;p&gt;This is a story about a very dope problem I stumbled upon while doing very dumb shit.&lt;/p&gt;

&lt;p&gt;First: the very dumb shit.&lt;/p&gt;

&lt;p&gt;I wanted to train an object detection algorithm to detect interactible objects (as opposed to scenery) in Runescape. I did this in two parts:&lt;/p&gt;

&lt;p&gt;1) Collect training data for an object detection algorithm&lt;/p&gt;

&lt;p&gt;2) Implement and train an object detection algorithm&lt;/p&gt;

&lt;p&gt;The first obvious question was data collection. Where in the world do you get training data for detecting interactible objects in Runescape? I programmed a Runelite plugin using the Runelite API which extracted “ground truth” data from the Runelite game client. This ground truth data contained bounding boxes around all interactible objects in the player’s field of view.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719172210.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;An example of the data that can be extracted from Runelite&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Collecting this ground truth data was not straightforward. I had to modify some existing Runelite plugins to calculate bounding boxes around objects of interest.&lt;/p&gt;

&lt;p&gt;Now: the dope problem.&lt;/p&gt;

&lt;p&gt;Once I had this data, I discovered we did not have sufficient information: the data describes all objects in the camera’s field of view, even if they are totally obscured from the player’s view. This is a problem, because obviously (although I never realized it until this problem popped up) I wanted to train the object detection algorithm to detect &lt;em&gt;visible objects&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;So I ended up having to solve the &lt;em&gt;visible object problem&lt;/em&gt;:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Suppose you have an image containing some object. Suppose the object might be partially or totally obscured by other objects in the image, but you aren’t sure. In fact, suppose you don’t even know what the object is supposed to be.  However, suppose there is one thing you know: You know where the object &lt;em&gt;would&lt;/em&gt; be in the image &lt;em&gt;if&lt;/em&gt; it were visible in the image. Can you guess whether the object is visible by looking at the image?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Before we solve this problem, I’ll talk about how I got the data. After that, though, we’ll start filtering visible vs invisible objects and then use the resulting data to train a YOLO classifier to identify interactible objects in Runescape.&lt;/p&gt;

&lt;h2 id=&quot;extracting-bounding-boxes-from-runelite&quot;&gt;Extracting bounding boxes from Runelite&lt;/h2&gt;

&lt;p&gt;Here’s the nitty gritty about how I got this data out of the game. You can skim this if you want, it’s cool, I get it.&lt;/p&gt;

&lt;h3 id=&quot;calculating-bounding-boxes&quot;&gt;Calculating bounding boxes&lt;/h3&gt;

&lt;p&gt;I discovered that Runelite has a built-in plugin called NPC Indicators which visually displays “convex hulls” around NPCs. This kind of calculation is quite similar to determining bounding boxes around objects, so it seemed obvious to start by attempting to modify this plugin.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220716195549.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;A default Runelite plugin that renders convex hulls around NPCs&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;I added a new setting to the plugin that calculated bounding boxes. Runelite’s API limits what data you can extract from the Runescape client, so I ended up having to start with the convex hull and calculate the equivalent bounding box. It was a pretty simple job, all things considered.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220716195954.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Quick code for turning a convex hull into a bounding box&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The results were not bad!&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220716201132.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;My modified plugin that calculates bounding boxes around NPCs&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;exporting-the-data&quot;&gt;Exporting the data&lt;/h3&gt;

&lt;p&gt;This bounding box data is ready to be extracted to CSV files. I extended the plugin so that it applied to all interactible objects instead of just non-player characters (NPCs). This was boring and not worth talking about. Then, I modified the built-in Screenshot plugin so that it periodically took screenshots and saved the corresponding bounding box data. The result was some nice-looking ground truth data:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220718202731.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;A sample of the training data in its natural form: image and csv pairs&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Let’s plot it:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719172210.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Visualizing the training data we obtained. Clearly it’s not what we wanted&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;So now I had arrived at the problem. These bounding boxes included objects which were completely obscured from view! Just look at the Man on the top-right of the screen:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719172335.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;This guy is not visible&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;This was unacceptable as ground truth training data. It would have been nice if I could ask the game for this information, since surely it knows which objects are visible. Unfortunately, I searched and searched, but I couldn’t find a way to determine if objects are visible using the Runelite API. So what can we do?&lt;/p&gt;

&lt;h2 id=&quot;approximating-whether-an-object-is-visible&quot;&gt;Approximating whether an object is visible&lt;/h2&gt;

&lt;h3 id=&quot;defining-images-and-objects&quot;&gt;Defining images and objects&lt;/h3&gt;

&lt;p&gt;Yeah, this is where things got a little weird. I wanted to take a down-and-dirty, model-based approach to filtering this bounding box data into “visible” and “not visible.” How would I build a model?&lt;/p&gt;

&lt;p&gt;Suppose we’re dealing with an $n\times m$ black-and-white image&lt;/p&gt;

\[I(x,y): \mathbb{Z}_n \times \mathbb{Z}_m \rightarrow \mathbb{Z}_{255}\]

&lt;p&gt;By definition, $I(x,y)$ tells the intensity value for pixel $(x,y)$. We know certain subsets of the pixels constitute visible objects. We assume visible objects are rectangular regions of pixels. Then there are an unknown amount, $k$, of rectangular regions of the image ${r_0,r_1,\ldots,r_p}$, where $r_i\subset \mathbb{Z}_n\times\mathbb{Z}_m$, which are visible objects.&lt;/p&gt;

&lt;h3 id=&quot;what-is-an-object-like&quot;&gt;What is an object like?&lt;/h3&gt;

&lt;p&gt;What can we assume about visible objects? One assumption is that subregions of a visible object have similar intensity histograms. Let’s look at an example from the previous images. Here we compare the distribution of intensities among the top and bottom halves of this goblin.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719211010.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Regions from the same object tend to have similar intensity histograms&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;While they’re not exactly the same, there’s certainly similarity. We can approximate the intensity similarity using histogram intersection:&lt;/p&gt;

&lt;p&gt;\(s_{intensity}(r_i, r_j) = \sum_{k=0}^{255}\text{min}(t_i^k,t_j^k)\)
Where $t_i^k$ is the quantity of pixels in region $r_i$ with intensity $k$. The similarity score of the top and bottom halves of this goblin is 398.&lt;/p&gt;

&lt;p&gt;Another similar concept is texture similarity, which uses the spatial intensity gradient instead of the raw intensity values. We can also generalize these concepts to color images.&lt;/p&gt;

&lt;h3 id=&quot;surprise-were-talking-about-region-proposal&quot;&gt;Surprise! We’re talking about region proposal!&lt;/h3&gt;

&lt;p&gt;Thinking about “what is an object” reminded me of some algorithms I saw in my computer vision class. This led me to discover the Selective Search Algorithm (SSA), which is exactly what we were looking for.&lt;/p&gt;

&lt;p&gt;Region proposal has been thoroughly studied in computer vision. According to the &lt;a href=&quot;http://www.huppelen.nl/publications/selectiveSearchDraft.pdf&quot;&gt;paper describing the SSA,&lt;/a&gt; region proposal concerns “generating possible object locations for use in object recognition.”&lt;/p&gt;

&lt;p&gt;The SSA used image segmentation along with metrics such as color similarity, intensity similarity, and texture similarity to generate a large set of regions. Region proposal algorithms tend to produce lots of false positives, as they cast a wide net and let a down-stream classifier filter these further.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719223250.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Region proposals from the original SSA paper&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Indeed, early object detectors were basically just model-based region proposer followed by a classifier. For example, the &lt;a href=&quot;https://towardsdatascience.com/r-cnn-fast-r-cnn-faster-r-cnn-yolo-object-detection-algorithms-36d53571365e&quot;&gt;R-CNN&lt;/a&gt; operated in two stages (image source &lt;a href=&quot;https://towardsdatascience.com/r-cnn-fast-r-cnn-faster-r-cnn-yolo-object-detection-algorithms-36d53571365e&quot;&gt;here&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;1)Generate a ton of region proposals from the image using &lt;a href=&quot;https://learnopencv.com/selective-search-for-object-detection-cpp-python/&quot;&gt;Selective Search Algorithm&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;2) Resize each region to some fixed dimensions and feed it into a CNN classifier&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719174426.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;the-visibility-model&quot;&gt;The visibility model&lt;/h3&gt;

&lt;p&gt;So, how does this relate guessing whether an object is visible given an image and the object’s bounding box? This is the “model” I settled on:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;An object is visible if and only if its bounding box is (approximately) generated by Selective Search Algorithm&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;So I generated region proposals using SSA, and if any of these proposals had an &lt;a href=&quot;https://en.wikipedia.org/wiki/Jaccard_index&quot;&gt;Intersection over Union (IoU)&lt;/a&gt; with an object bounding box close to 1, then we call them a match and declare the object visible.&lt;/p&gt;

&lt;p&gt;That’s it! Sounds stupid, right? Well fuck off, I was pretty proud of this little trick.&lt;/p&gt;

&lt;p&gt;So does it work? See for yourself:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719174900.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Left: Objects labeled “visible” by SSA. Right: Objects labeled “invisible” by SSA&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719175132.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Left: Objects labeled “visible” by SSA. Right: Objects labeled “invisible” by SSA&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Come on, that’s not bad! Maybe it’s a little overly cautious, but I think this will filter out a nice dataset of visible objects! So that’s the trick! That’s how I created training data for visually detecting interactible objects in Runescape.&lt;/p&gt;

&lt;h2 id=&quot;training-an-object-detector&quot;&gt;Training an object detector&lt;/h2&gt;
&lt;p&gt;I used &lt;a href=&quot;https://pytorch.org/hub/ultralytics_yolov5/&quot;&gt;YOLOV5&lt;/a&gt; and trained on a bunch of training data collected from around Lumbridge area in Runescape. The results were not too bad:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719224900.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Using a trained YOLOV5 to detect interactible objects&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/runescapeobjectdetection/Pasted image 20220719225052.png&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Using a trained YOLOV5 to detect interactible objects&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Nobody’s calling it perfect, but it’s pretty fast and not terribly inaccurate! This thing is pretty good at guessing what objects you can click in Runescape.&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;There is no conclusion. The human condition drives us forward, hurtling ourselves blindly into the unknown. I leapfrog from idea to idea, and each hop manifests ripples on the surface of the water. These are my signature, my proof that I was here. It seems you have found one of my ripples.&lt;/p&gt;</content><author><name>Beau Horenberger</name></author><category term="blog" /><summary type="html">The means justify the ends The means justify the ends</summary></entry><entry><title type="html">Egyptians and the Rhind Mathematical Papyrus: Egyptian Arithmetic (2)</title><link href="http://localhost:4000/2022/06/18/egyptianmath2.html" rel="alternate" type="text/html" title="Egyptians and the Rhind Mathematical Papyrus: Egyptian Arithmetic (2)" /><published>2022-06-18T00:00:00-04:00</published><updated>2022-06-18T00:00:00-04:00</updated><id>http://localhost:4000/2022/06/18/egyptianmath2</id><content type="html" xml:base="http://localhost:4000/2022/06/18/egyptianmath2.html">&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#intro&quot; id=&quot;markdown-toc-intro&quot;&gt;Intro&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#hieroglyphic&quot; id=&quot;markdown-toc-hieroglyphic&quot;&gt;Hieroglyphic&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#egyptian-numerals&quot; id=&quot;markdown-toc-egyptian-numerals&quot;&gt;Egyptian Numerals&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#adding-and-multiplying&quot; id=&quot;markdown-toc-adding-and-multiplying&quot;&gt;Adding And Multiplying&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#division-and-egyptian-fractions&quot; id=&quot;markdown-toc-division-and-egyptian-fractions&quot;&gt;Division and Egyptian Fractions&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#fractions&quot; id=&quot;markdown-toc-fractions&quot;&gt;Fractions&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#division&quot; id=&quot;markdown-toc-division&quot;&gt;Division&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#conclusion&quot; id=&quot;markdown-toc-conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;p&gt;If you’ve read &lt;a href=&quot;https://horenbergerb.github.io/2022/05/26/egyptianmath1.html&quot;&gt;the first article in this series&lt;/a&gt;, then you may be aware of the Rhind Mathematical Papyrus. The RMP is an Egyptian scroll and one of the earliest written mathematical documents. Rather than diving straight into the RMP, this article discusses the written Egyptian language, hieroglyphic, as well as the Egyptian number system and basic Egyptian arithmetic.&lt;/p&gt;

&lt;p&gt;Arithmetic may sound like trivial material to some, but the Egyptians did not have the intellectual infrastructure we take for granted today. The Egyptian methods and notation we will discuss are over 3000 years old and were practically the first written mathematics in Egypt. They are a far cry from modern algebra.&lt;/p&gt;

&lt;h2 id=&quot;hieroglyphic&quot;&gt;Hieroglyphic&lt;/h2&gt;

&lt;p&gt;You don’t really need to know about hieroglyphs to understand Egyptian numbers, but I’m going to tell you about it anyways.&lt;/p&gt;

&lt;p&gt;This section is a criminally-reductive paraphrasing of “Middle Egyptian: An Introduction to the Language and Culture of Hieroglyphs” by James P. Allen.&lt;/p&gt;

&lt;p&gt;The first known Egyptian writing is dated around 3200BC, near the beginning of Egypt. The language survived until around 1100AD, and it has many distinct stages of life. The stage which interests us most is Middle Egyptian (2100BC-1600BC). Middle Egyptian is one of the best-understood eras of Hieroglyphic. The RMP was written in Middle Egyptian.&lt;/p&gt;

&lt;p&gt;Middle Egyptian was composed of around 500 unique hieroglyphs. Each hieroglyph was an illustration. Every hieroglyph could be used in each of three ways:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;As an &lt;em&gt;ideogram&lt;/em&gt;, meaning that the hieroglyph means what it depicts. For example, a hieroglyph depicting a house, if it is used as an ideogram, is supposed to convey the concept of a house.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;As a &lt;em&gt;phonogram&lt;/em&gt;, meaning that the hieroglyph is supposed to convey the sound of pronouncing the word associated with the hieroglyph’s ideogram. For example, we can communicate the word “belief” by using the following pictures as phonograms:&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://www.researchgate.net/profile/Philipp-Wicke-3/publication/316168050/figure/fig6/AS:484112994705409@1492432940097/Exemplary-use-of-the-rebus-principle-with-Emojis-Here-the-Emoji-Unicode-U-1F41D-for.png&quot; alt=&quot;Using phonograms to communicate spoken words in writing&quot; /&gt;&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Using phonograms to communicate spoken words in writing&lt;/em&gt;&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;As a &lt;em&gt;determinative&lt;/em&gt;, meaning that it indicates whether other hieroglyphs should be read as ideograms or phonograms. Words were made by groupings of hieroglyphs ending with a determinative that instructed you how to read them.&lt;/li&gt;
&lt;/ol&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/Relief_of_Nofer.jpg&quot; alt=&quot;Hieroglyphs on the Relief of Nofer from the Boston Museum of Fine Arts&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Hieroglyphs on the Relief of Nofer from the Boston Museum of Fine Arts&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;There’s, like, a lot more to understanding hieroglyphic, but these three concepts outline the basic functionality.&lt;/p&gt;

&lt;p&gt;The Egyptians also wrote in hieratic, which was essentially the cursive version of Hieroglyph. Hieratic was more common for scrolls and bureaucratic texts, while hieroglyphic would be used for rituals and decoration in tombs and palaces.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/6/66/Scribe%27s_exercise_tablet_1.jpg&quot; alt=&quot;Hieratic writing, &amp;quot;Be on your guard against all who are subordinate to you... Trust no brother, know no friend, make no intimates.&amp;quot; Probably lyrics by an Egyptian rapper or something&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Hieratic writing, “Be on your guard against all who are subordinate to you… Trust no brother, know no friend, make no intimates.”&lt;sup&gt;&lt;a href=&quot;https://collections.mfa.org/objects/136183/relief-of-nofer?ctx=de17a16a-c1f5-4149-849e-fde75b21deea&amp;amp;idx=12&quot;&gt;6&lt;/a&gt;&lt;/sup&gt; Probably lyrics by an Egyptian rapper or something&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;egyptian-numerals&quot;&gt;Egyptian Numerals&lt;/h2&gt;

&lt;p&gt;Before written language, it is commonly believed counting was performed through the use of tally marks.&lt;/p&gt;

&lt;p&gt;Carving notches into bones is the earliest concrete evidence of counting, possibly going as far back as 30,000BC.&lt;sup&gt;&lt;a href=&quot;https://web.archive.org/web/20111213011551/http://www.thocp.net/timeline/0000.htm&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; There is usually debate surrounding any example of tally marks in the pre-language era, something like, “you don’t really know they were counting! They could have just been goofing around!” Sure, whatever.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://web.archive.org/web/20111213011600im_/http://www.thocp.net/timeline/pictures/tally_sticks_wolvebones_30000bc.gif&quot; alt=&quot;Counting with tally marks?&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Counting?&lt;sup&gt;&lt;a href=&quot;https://web.archive.org/web/20111213011551/http://www.thocp.net/timeline/0000.htm&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;It should come as no surprise, then, that the Egyptian symbol for 1 appears to be simply a tally mark, and for small numbers, they just wrote more tally marks.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/2_and_3_example.png&quot; alt=&quot;Egyptian hieratic depiction of the numbers 2 and 3 from the RMP&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Egyptian hieratic depiction of the numbers 2 and 3 from the RMP&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Tally marks quickly became inconvenient for larger numbers, so new symbols were created to represent these numbers. Coincidentally, the Egyptians used a base 10 numeral system. Perhaps there is some relationship to counting on fingers?&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/hieratic_numerals.png&quot; alt=&quot;Behold, numbers&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Behold, numbers&lt;sup&gt;&lt;a href=&quot;https://www.britannica.com/science/hieratic-numeral&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Numbers were represented as groupings of these symbols. A number is equal to the sum of its substituent hieroglyphics.&lt;sup&gt;&lt;a href=&quot;https://books.google.com/books/about/A_History_of_Mathematics.html?id=h50fAQAAIAAJ&quot;&gt;5&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;For example, here is the number 17 depicted in the RMP:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/17_rmp.png&quot; alt=&quot;The number 17&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;The number 17&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;Warning:&lt;/strong&gt; The Egyptians didn’t give a fuck, and they apparently invented multiple symbols to represent the same numbers. For example, the RMP often depicts 4 as a single horizontal bar (half of an 8, if you will). I haven’t found any scholarly sources discussing this. We all just have to live with it.&lt;/p&gt;

&lt;h2 id=&quot;adding-and-multiplying&quot;&gt;Adding And Multiplying&lt;/h2&gt;

&lt;p&gt;Egyptians were fairly comfortable with arithmetic, i.e. adding, multiplying, and dividing. They had somewhat standardized procedures for these operations. They did not use algebraic symbols like our $+$ and $*$ signs, so specifying the operation to be performed was done in words or intuited from the context.&lt;/p&gt;

&lt;p&gt;Adding two numbers was pretty simple to the Egyptians. You literally put them together, and if you’re feeling really generous, you can reduce it to make it prettier.&lt;/p&gt;

&lt;p&gt;Egyptian multiplication was a little more complex. Using modern algebra, you can think of it like this:&lt;/p&gt;

&lt;p&gt;Say you want to calculate $33*47$.&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/rhindmathematica0000robi_h8l4&quot;&gt;7&lt;/a&gt;&lt;/sup&gt; Calculating this directly might be annoying, so the Egyptians would break it up into easier products:&lt;/p&gt;

\[33*47 = (1 + 10 + 20 + 2)*47 =\]

\[1*47\]

\[+10*47\]

\[+20*47\]

\[+2*47\]

&lt;p&gt;If the Egyptians didn’t know how they wanted to break apart a number, they would use the base 2 decomposition:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/Robins_multiplication.png&quot; alt=&quot;Multiplication using powers of two&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Multiplication using powers of two&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/rhindmathematica0000robi_h8l4&quot;&gt;7&lt;/a&gt;&lt;/sup&gt;&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Scholars generally regard this as “absolutely nuts,” because it’s crazy that the Egyptians figured out every number can be represented as a sum of powers of two. Some sources suggest this method of multiplication by doubling may have originated from Africa.&lt;sup&gt;&lt;a href=&quot;https://books.google.com/books/about/A_History_of_Mathematics.html?id=h50fAQAAIAAJ&quot;&gt;5&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;This idea of breaking apart a number into a convenient sum is &lt;em&gt;huge&lt;/em&gt; in Egyptian mathematics. It was also commonly applied to division.&lt;/p&gt;

&lt;h2 id=&quot;division-and-egyptian-fractions&quot;&gt;Division and Egyptian Fractions&lt;/h2&gt;

&lt;h3 id=&quot;fractions&quot;&gt;Fractions&lt;/h3&gt;

&lt;p&gt;Okay, this is where shit starts to get really weird. First, let’s talk about fractions. In hieratic, any number $n$ could be modified by putting a dot above it in order to represent $\frac{1}{n}$.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/1_over_8_rmp.png&quot; alt=&quot;The fraction 1/8&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;The fraction 1/8&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;In proper Egyptian Hieroglyphic, the eye symbol &lt;em&gt;er&lt;/em&gt; was used instead of a dot. &lt;em&gt;er&lt;/em&gt; can mean “from” or “of,” perhaps intending to convey &lt;img src=&quot;/images/one_third.png&quot; alt=&quot;one third&quot; /&gt; as “(one) of 3.”&lt;/p&gt;

&lt;p&gt;There were also, of course, special symbols for certain common fractions:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/fractions_reference.png&quot; alt=&quot;Table of common fraction symbols&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Table of common fraction symbols.&lt;sup&gt;&lt;a href=&quot;https://en.wikisource.org/wiki/A_History_Of_Mathematical_Notations/Volume_1/Egyptians&quot;&gt;8&lt;/a&gt;&lt;/sup&gt;&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The way that Egyptians used these fractions was weird. They preferred not to repeat fractions. Depicting $\frac{2}{5}$ as &lt;img src=&quot;/images/one_fifth.png&quot; alt=&quot;one fifth&quot; /&gt; &lt;img src=&quot;/images/one_fifth.png&quot; alt=&quot;one fifth&quot; /&gt; was considered “unfinished.” One was expected to instead calculate (or look up) a sum of unique unit fractions equal to $\frac{2}{5}$.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/2_over_n_table_5_rmp.png&quot; alt=&quot;The 2nd row of the RMP's 2/n table calculates 2/5 as a sum of unique unit fractions&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;The 2nd row of the RMP’s 2/n table calculates $\frac{2}{5}=\frac{1}{3}+\frac{1}{15}$&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;In fact, the Rhind Mathematical Papyrus begins with a massive table called the “2/n table” which calculates a unique sum of unit fractions for $\frac{2}{n}$ starting with $n=3$ and going all the way to $n=101$! That’s bonkers.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/2_over_n_table_column_one_rmp.png&quot; alt=&quot;The first column of the 2/n table covering n=3 through n=15&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;The first column of the 2/n table covering n=3 through n=15. The $n$ value for each row appears on the right-hand side. Values in red denote the sums of unit fractions.&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;It’s not clear why the Egyptians felt the need to represent vulgar fractions as the sum of unique unit fractions. One hypothesis is that the common procedure for dividing (ex. splitting 2 loaves of bread equally among 5 men) made these sums natural and obvious to Egyptians. We’ll discuss this in more detail in the next article of the series.&lt;/p&gt;

&lt;h3 id=&quot;division&quot;&gt;Division&lt;/h3&gt;

&lt;p&gt;Alright, I’m running out of steam here, so let’s wrap this up. Division was a mess. I am, once again, going to pull an example straight out of Gay Robins’ &lt;em&gt;The Rhind Mathematical Papyrus&lt;/em&gt;. To divide 47 by 33, the Egyptians would, in their own words, “treat 33 so as to obtain 47.” For example, they might simply observe that&lt;/p&gt;

\[47 = 1*33 + \frac{1}{3}*33 + \frac{1}{11}*33 \implies\]

\[47 = (1+\frac{1}{3}+\frac{1}{11})33 \implies\]

\[\frac{47}{33} = 1+\frac{1}{3}+\frac{1}{11}\]

&lt;p&gt;In this case, we obviously got very lucky with our divisors of 33, so the solution was “easy.” If we instead divide 33 by 47, things get nasty. The Egyptians would again break 47 into a convenient sum and just go to town:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/robins_division.png&quot; alt=&quot;Dividing 33 by 47 like an Egyptian&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Dividing 33 by 47 like an Egyptian&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/rhindmathematica0000robi_h8l4&quot;&gt;7&lt;/a&gt;&lt;/sup&gt;&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Note that the 3 with a double bar above it represents $\frac{2}{3}$. Although $\frac{2}{3}$ isn’t a unit fraction, it apparently didn’t bother the Egyptians, and they frequently included it in their sums.&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;So now you’ve got the basic idea of how Egyptian arithmetic was performed. With the “how” out of the way, you are free to consider the “why?”. Why did the Egyptians prefer sums of nonrepeating unit fractions? Why did they use powers of 2 when multiplying? I dunno.&lt;/p&gt;

&lt;p&gt;Egyptian mathematics is one of the first well-documented mathematical cultures in human history. We take for granted our sleek mathematical concepts and notations, and we often consider our ways to be obvious or “natural.” Effective, unambiguous fraction notation didn’t pop up until at least 500AD, thousands of years after the beginning of written math.&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/rhindmathematica0000robi_h8l4&quot;&gt;7&lt;/a&gt;&lt;/sup&gt; These things are apparently not intuitive until after the fact. Perhaps we should treat the fundamentals of modern mathematics with a little more respect, or perhaps with a little more skepticism…&lt;/p&gt;</content><author><name>Beau Horenberger</name></author><category term="blog" /><summary type="html"></summary></entry><entry><title type="html">Egyptians and the Rhind Mathematical Papyrus: Historical Context (1)</title><link href="http://localhost:4000/2022/05/26/egyptianmath1.html" rel="alternate" type="text/html" title="Egyptians and the Rhind Mathematical Papyrus: Historical Context (1)" /><published>2022-05-26T00:00:00-04:00</published><updated>2022-05-26T00:00:00-04:00</updated><id>http://localhost:4000/2022/05/26/egyptianmath1</id><content type="html" xml:base="http://localhost:4000/2022/05/26/egyptianmath1.html">&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#preface&quot; id=&quot;markdown-toc-preface&quot;&gt;Preface&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#intro&quot; id=&quot;markdown-toc-intro&quot;&gt;Intro&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#egypt-a-timeline-up-to-the-rmp&quot; id=&quot;markdown-toc-egypt-a-timeline-up-to-the-rmp&quot;&gt;Egypt: A Timeline Up To The RMP&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#the-rhind-mathematical-papyrus&quot; id=&quot;markdown-toc-the-rhind-mathematical-papyrus&quot;&gt;The Rhind Mathematical Papyrus&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#book-i-arithmetic&quot; id=&quot;markdown-toc-book-i-arithmetic&quot;&gt;Book I: Arithmetic&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#book-ii-geometry&quot; id=&quot;markdown-toc-book-ii-geometry&quot;&gt;Book II: Geometry&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#book-iii-miscellaneous&quot; id=&quot;markdown-toc-book-iii-miscellaneous&quot;&gt;Book III: Miscellaneous&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#conclusion&quot; id=&quot;markdown-toc-conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;preface&quot;&gt;Preface&lt;/h2&gt;

&lt;p&gt;Recently I had the idea that I might appreciate mathematics more if I understood how it originated. “I’m so clever,” I thought, “I’ll just Google ‘Ancient Egyptian Mathematics’ and then everything will make sense.” Surprise! Nobody has a complete understanding of Egyptian mathematics. There are many mysteries about how Egyptians performed mathematical operations and how Egyptians understood mathematics.&lt;/p&gt;

&lt;p&gt;To make matters worse, I’m beginning to suspect that there’s not a simple solution. I’m not going to have a breakthrough and think “Oh, &lt;em&gt;that’s&lt;/em&gt; what mathematics meant to Egyptians!” The deeper I dig, the more mysteries present themselves…&lt;/p&gt;

&lt;p&gt;As such, this series of blog posts is an attempt to document my experience of digging ever deeper in search of answers which don’t exist.&lt;/p&gt;

&lt;p&gt;I’ll warn you now; this first post is going reference Wikipedia. Deal with it.&lt;/p&gt;

&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;p&gt;We start with a very brief history of Egypt from its origin up to the point at which the Rhind Mathematical Papyrus was written. Next we describe the RMP and discuss simple observations about the problems it contained.&lt;/p&gt;

&lt;h2 id=&quot;egypt-a-timeline-up-to-the-rmp&quot;&gt;Egypt: A Timeline Up To The RMP&lt;/h2&gt;

&lt;p&gt;Set the scene in Egypt, circa 3500 BC, along the Nile. It was well over 5000 years ago. Large cultures along the Nile have been practicing agriculture and animal husbandry, making pottery, and generally having a good time. There were stone, copper, and obsidians tools, there was jewelry and painted ceramics, and there was an ongoing consolidation of power around the Nile valley.&lt;/p&gt;

&lt;p&gt;In passing, note that the earliest known Hieroglyphic writing appeared suddenly in 3250BC, already a complete writing system. Its origins are unknown.&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/ALLEN2014MiddleEgyptianAnIntroductionToTheLanguageAndCultureOfHieroglyphs/mode/2up&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://www.thoughtco.com/thmb/HR4ROK-3AhAmrtKS0BC3YIk8sfo=/4898x3391/filters:no_upscale():max_bytes(150000):strip_icc()/Map_of_Egypt-f1a95b7e0515423aaa66bad08b627d50.jpg&quot; alt=&quot;A map of ancient Egypt&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;A map of ancient Egypt&lt;sup&gt;&lt;a href=&quot;https://www.thoughtco.com/predynastic-egypt-beginners-guide-172128&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;We will boldly proclaim the beginning of Egyptian civilization to be placed around 3000BC, in what is called the Early Dynastic Period. At this point, power in Egyptian society began to consolidate under Dynastic kings. There were more elaborately constructed tombs and government institutions.&lt;/p&gt;

&lt;p&gt;Around 2686BC, things really started to take off during the Old Kingdom period of Egypt. “Major advances in architecture, art, and technology were made during the Old Kingdom, fueled by the increased agricultural productivity and resulting population, made possible by a well-developed central administration.”&lt;sup&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Ancient_Egypt&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; Shit like the Giza pyramids and Great Sphinx happened next. There were large, coordinated government operations involving collecting taxes (mathematics is important for taxes).&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/en/timeline/pr44hfmar3p9o4kq975b3mhp2tqmrns.png&quot; alt=&quot;A timeline, as promised&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;A timeline, as promised&lt;sup&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Ancient_Egypt&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Next there was government collapse, food shortages, re-emergence of organized societies, more kings, innovation in the arts, kingdoms weakening, introduction of the composite bow (by the invading Hyksos), war campaigns, and eventually (surprisingly) prosperity by the time you reach 1500BC.&lt;sup&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Ancient_Egypt&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; It was a busy era.&lt;/p&gt;

&lt;h2 id=&quot;the-rhind-mathematical-papyrus&quot;&gt;The Rhind Mathematical Papyrus&lt;/h2&gt;

&lt;p&gt;This happens to be around the time that the Rhind Mathematical Papyrus (RMP) was written. The RMP is basically a huge scroll detailing many mathematical problems and solutions. Its design suggests that it was intended to be used by a teacher to assign problems to students.&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/ALLEN2014MiddleEgyptianAnIntroductionToTheLanguageAndCultureOfHieroglyphs/mode/2up&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; It was written near 1550BC.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://curiosmos.com/wp-content/uploads/2020/09/Rhind-mathematical-papyrus.jpg&quot; alt=&quot;A sample of the Rhind Mathematical Papyrus&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;A sample of the Rhind Mathematical Papyrus&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The original RMP is lost. The available copy that exists today claims to be written by a scribe named Ahmes approximately 200 years after the original RMP was written. The scroll itself is about 13 inches tall and would have been 13 ft long altogether.&lt;/p&gt;

&lt;p&gt;The RMP is one of the major bodies of evidence about ancient Egyptian math and how it related to Egyptian society. It contains “a series of general mathematical problems, which are nevertheless concrete and representative of the practical day-to-day situations that were expected of the graduating apprentice.”&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/SpalingerTheRhindMathematicalPapyrusAsAHistoricalDocumentSAK171990/page/n9/mode/2up&quot;&gt;9&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;Scholars generally agree that the scroll is divided into three parts, which we refer to as “Book 1: Arithmetic,” “Book 2: Geometry,” and “Book 3: Miscellaneous.”&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/ALLEN2014MiddleEgyptianAnIntroductionToTheLanguageAndCultureOfHieroglyphs/mode/2up&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; These, in turn, are divided into ordered problems, which we typically refer to by number. For example, problem 39 is in Book 1 and concerns distributing 100 bread loaves among 10 men unequally according to some algebraic rules.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/rmp_roadmap.png&quot; alt=&quot;A roadmap of the Rhind Mathematical Papyrus&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;A roadmap of the Rhind Mathematical Papyrus&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/Peet_1923/page/n1/mode/2up&quot;&gt;8&lt;/a&gt;&lt;/sup&gt;&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;We will finish this article by hinting at the flavor of the three books.&lt;/p&gt;

&lt;h3 id=&quot;book-i-arithmetic&quot;&gt;Book I: Arithmetic&lt;/h3&gt;

&lt;p&gt;This is basically the “bread-sharing” part of the book. Many of the problems describe dividing up bread to share among men in different ways. However, there are also mathematical problems which offer no concrete context. One of which solves a linear equation. Many of the others regard the use of “&lt;a href=&quot;https://en.wikipedia.org/wiki/Egyptian_fraction&quot;&gt;Egyptian fractions&lt;/a&gt;,” which involved determining and proving identities such as&lt;/p&gt;

\[\frac{4}{10}=\frac{1}{3} + \frac{1}{15}\]

&lt;p&gt;Egyptian fractions will be discussed further in future articles. Their nature is still not totally understood, and frankly, I think it is very interesting.&lt;/p&gt;

&lt;h3 id=&quot;book-ii-geometry&quot;&gt;Book II: Geometry&lt;/h3&gt;

&lt;p&gt;The problems in Book II were about measurement of length, area, and volume. They also measured slope (degree of flatness) and “lack of quality indicating a dilution factor in such commodities as bread and beer.”&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/rhindmathematica0000robi_h8l4&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;All of these measurements have convenient practical motivations. Area, for example, was used in taxation.&lt;sup&gt;&lt;a href=&quot;https://daily.jstor.org/tax-day-ancient-egypt/&quot;&gt;5&lt;/a&gt;&lt;/sup&gt; A government agent, the “holder of the cord,” would measure the area of property where grain was grown, and the property owner would be taxed a percentage of their total crop.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/rope_measurement.png&quot; alt=&quot;Measuring area with a rope&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;em&gt;Taxation goes way back&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/rhindmathematica0000robi_h8l4&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Volume was commonly used for measuring grain or flower as well as liquids such as beer. For example, RMP section 42 computes the volume of a circular granary in terms of barrels.&lt;sup&gt;&lt;a href=&quot;https://books.google.com/books?id=8c10QYoGa4UC&quot;&gt;6&lt;/a&gt;&lt;/sup&gt; This kind of math would be useful for knowing how much grain your kingdom possesses and preventing famines and governmental collapse.&lt;/p&gt;

&lt;h3 id=&quot;book-iii-miscellaneous&quot;&gt;Book III: Miscellaneous&lt;/h3&gt;

&lt;p&gt;Book III is full of miscellaneous problems. No grand narrative that I can weave off the top of my head. There’s more Egyptian fraction problems, some vaguely humorous problems, and a lot of other stuff. Here’s an example problem:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;A bag of three precious metals, gold, silver and lead, has been purchased for 84 sha’ty, which is a monetary unit. All three substances weigh the same, and a deben is a unit of weight. 1 deben of gold costs 12 sha’ty, 1 deben of silver costs 6 sha’ty, and 1 deben of lead costs 3 sha’ty. Find the common weight W of any of the three metals in the bag.&lt;sup&gt;&lt;a href=&quot;https://archive.org/details/rhindmathematica0000robi_h8l4&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;Egypt had a lot going on. Their civilization is so ancient that it is difficult to retrieve and interpret their artifacts. However, what we have discovered has given us many insights into what the life of an Egyptian may have been like. The Rhind Mathematical Papyrus is one of these windows into the past. What can we learn from it? Follow me on Twitter to find out.&lt;/p&gt;</content><author><name>Beau Horenberger</name></author><category term="blog" /><summary type="html"></summary></entry><entry><title type="html">Where Am I? Estimating Location In Runescape With The Mini-Map</title><link href="http://localhost:4000/2022/03/04/runescapelocationfinding.html" rel="alternate" type="text/html" title="Where Am I? Estimating Location In Runescape With The Mini-Map" /><published>2022-03-04T00:00:00-05:00</published><updated>2022-03-04T00:00:00-05:00</updated><id>http://localhost:4000/2022/03/04/runescapelocationfinding</id><content type="html" xml:base="http://localhost:4000/2022/03/04/runescapelocationfinding.html">&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#solving-runescape-so-i-can-finally-quit-&quot; id=&quot;markdown-toc-solving-runescape-so-i-can-finally-quit-&quot;&gt;Solving Runescape So I Can Finally Quit &lt;a name=&quot;Solving-Runescape-So-I-Can-Finally-Quit&quot;&gt;&lt;/a&gt;&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#if-the-mini-map-is-oriented-north-&quot; id=&quot;markdown-toc-if-the-mini-map-is-oriented-north-&quot;&gt;If The Mini-Map Is Oriented North &lt;a name=&quot;If-The-Mini-Map-Is-Oriented-North&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#if-the-mini-map-is-not-oriented-north-&quot; id=&quot;markdown-toc-if-the-mini-map-is-not-oriented-north-&quot;&gt;If The Mini-Map Is Not Oriented North &lt;a name=&quot;If-The-Mini-Map-Is-Not-Oriented-North&quot;&gt;&lt;/a&gt;&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#extracting-angle-information-from-the-compass-by-transforming-between-features-&quot; id=&quot;markdown-toc-extracting-angle-information-from-the-compass-by-transforming-between-features-&quot;&gt;Extracting Angle Information From The Compass By Transforming Between Features &lt;a name=&quot;Extracting-Angle-Information-From-The-Compass-By-Transforming-Between-Features&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#rotating-the-mini-map-&quot; id=&quot;markdown-toc-rotating-the-mini-map-&quot;&gt;Rotating The Mini-Map &lt;a name=&quot;Rotating-The-Mini-Map&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#conclusion-&quot; id=&quot;markdown-toc-conclusion-&quot;&gt;Conclusion &lt;a name=&quot;Conclusion&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#appendix-&quot; id=&quot;markdown-toc-appendix-&quot;&gt;Appendix &lt;a name=&quot;Appendix&quot;&gt;&lt;/a&gt;&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#blogutilitiesipynb&quot; id=&quot;markdown-toc-blogutilitiesipynb&quot;&gt;blog/utilities.ipynb&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# see appendix for more info
&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blog&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;utilities&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ipynb&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;solving-runescape-so-i-can-finally-quit-&quot;&gt;Solving Runescape So I Can Finally Quit &lt;a name=&quot;Solving-Runescape-So-I-Can-Finally-Quit&quot;&gt;&lt;/a&gt;&lt;/h1&gt;

&lt;p&gt;Runescape is a boring video game for losers. In the game, your location is represented to you in both a world map and a mini-map. My goal was to estimate the player’s location on the world map using only the mini-map. Real-time location estimation is the first step in breaking the game so that it can play itself and we can all go home.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;world_map_lumbridge&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/images/rotation_estimation/world_map_lumbridge.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;north_oriented_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/images/rotation_estimation/north_oriented_map.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subplots&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dpi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;north_oriented_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'The player&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\'&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s minimap'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;world_map_lumbridge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'A small piece of the world map'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subplots_adjust&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wspace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/rotation_estimation/rotation_estimation_3_0.png&quot; alt=&quot;png&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;if-the-mini-map-is-oriented-north-&quot;&gt;If The Mini-Map Is Oriented North &lt;a name=&quot;If-The-Mini-Map-Is-Oriented-North&quot;&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;So we’re given an image of the mini-map, and we estimate the corresponding location on the world map. If the mini-map is north-facing, this is a fairly simple problem. We can simply take the map from the mini-map and template search to find it on the world map.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;cropped_mini_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/images/rotation_estimation/cropped_mini_map.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# template search
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TM_CCOEFF_NORMED&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;matchTemplate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cropped_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;world_map_lumbridge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;min_val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;min_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minMaxLoc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# plot the estimated match
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;template_match_plotted&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;world_map_lumbridge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rectangle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;template_match_plotted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cropped_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cropped_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;show_images&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cropped_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;template_match_plotted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The cropped mini-map'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The corresponding template match (Good)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/rotation_estimation/rotation_estimation_5_0.png&quot; alt=&quot;png&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;if-the-mini-map-is-not-oriented-north-&quot;&gt;If The Mini-Map Is Not Oriented North &lt;a name=&quot;If-The-Mini-Map-Is-Not-Oriented-North&quot;&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;In this case, we can’t apply a template search right away. The map is crooked, so we won’t get good detections&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;crooked_mini_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/images/rotation_estimation/crooked_mini_map.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# template search
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TM_CCOEFF_NORMED&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;matchTemplate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;crooked_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;world_map_lumbridge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;min_val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;min_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minMaxLoc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# plot the estimated match
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result_plotted&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;world_map_lumbridge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rectangle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result_plotted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;crooked_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;crooked_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;show_images&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;crooked_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result_plotted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The rotated mini-map'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The corresponding template match (Bad)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/rotation_estimation/rotation_estimation_7_0.png&quot; alt=&quot;png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;So, how could we convert a rotated mini-map back into a north-facing minimap?&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;north_east_oriented_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/images/rotation_estimation/north_east_oriented_map.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;show_images&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;north_east_oriented_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;north_oriented_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The map we are given'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The map we want to convert to'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/rotation_estimation/rotation_estimation_9_0.png&quot; alt=&quot;png&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;extracting-angle-information-from-the-compass-by-transforming-between-features-&quot;&gt;Extracting Angle Information From The Compass By Transforming Between Features &lt;a name=&quot;Extracting-Angle-Information-From-The-Compass-By-Transforming-Between-Features&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;If we can determine the angle of rotation, then we can rotate the mini-map image to match its north-facing counterpart. We can estimate the angle of rotation using the compass. The first step is to detect “features” on the rotated compass and correspond them to features on the north-facing compass. First we detect features using the SIFT algorithm.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;compass_north&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/images/rotation_estimation/compass_north.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;COLOR_BGR2GRAY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/images/rotation_estimation/compass_northeast.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;COLOR_BGR2GRAY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Initiate SIFT detector
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sift&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SIFT_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# find the keypoints and descriptors with SIFT
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kp1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;des1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sift&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;detectAndCompute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;kp2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;des2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sift&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;detectAndCompute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;compass_north_east_features&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;compass_north_features&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compass_north&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;compass_north_east_features&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;drawKeypoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kp1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compass_north_east_features&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DRAW_MATCHES_FLAGS_DEFAULT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;compass_north_features&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;drawKeypoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kp2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compass_north_features&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DRAW_MATCHES_FLAGS_DEFAULT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;show_images&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north_features&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compass_north_east_features&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Features for north compass'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Features for north-east compass'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/rotation_estimation/rotation_estimation_11_0.png&quot; alt=&quot;png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Next we pair the features between the compasses using Flann matcher, which takes advantage of the gradient information represented in SIFT features. We won’t go into details on how this works. We use Flann to get acceptable matches according to some threshold&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;FLANN_INDEX_KDTREE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;index_params&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;algorithm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FLANN_INDEX_KDTREE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trees&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;search_params&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;checks&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;flann&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FlannBasedMatcher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index_params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;search_params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;matches&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;flann&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;knnMatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;des1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;des2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;lowe_ratio_threshold&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.7&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;good_matches&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;matches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;distance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lowe_ratio_threshold&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;distance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;good_matches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

        
&lt;span class=&quot;n&quot;&gt;img_matches&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;empty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compass_north&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dtype&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uint8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;drawMatches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kp1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compass_north&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kp2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
               &lt;span class=&quot;n&quot;&gt;good_matches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;img_matches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;flags&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DrawMatchesFlags_NOT_DRAW_SINGLE_POINTS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img_matches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;matplotlib.image.AxesImage at 0x7fc6f4a09d30&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/rotation_estimation/rotation_estimation_13_1.png&quot; alt=&quot;png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Now we want to calculate an explicit translation between the paired features of the two compasses. We can do this if we make an assumption that the compasses are related by an affine function, i.e. a mix of scaling, rotation, and translation. In reality, we should find out that the transformation is almost entirely rotation with very little scaling.&lt;/p&gt;

&lt;p&gt;A 2D affine transformation involving a scaling by $s_x, s_y$, shearing by $c_x, c_y$, rotation by $\theta$, and a translation by $x_t, y_t$, can be represented in 3D as a linear transformation with the help of homogenous coordinates,&lt;/p&gt;

\[M = 
  \left[ {\begin{array}{cc}
    s_x\cos{\theta} &amp;amp; -c_x\sin{\theta}  &amp;amp; x\\
    c_y\sin{\theta} &amp;amp; s_y\cos{\theta}  &amp;amp; y\\
    0 &amp;amp; 0 &amp;amp; 1\\
  \end{array} } \right]\]

&lt;p&gt;So that we can map a feature at $(x,y)$ on the original image to the corresponding feature at $(x’, y’)$ on the final image&lt;/p&gt;

\[M 
    \left[ {\begin{array}{cc}
    x\\
    y\\
    1\\
  \end{array} } \right]
    =
    \left[ {\begin{array}{cc}
    x'\\
    y'\\
    1'\\
  \end{array} } \right]\]

&lt;p&gt;We will approximate the best of these matrices for mapping between the features of the two compasses using OpenCV’s EstimateAffine2D. Then we can simply calculate $\theta$ from the matrix we obtain.&lt;/p&gt;

&lt;p&gt;EstimateAffine2D uses Random Sample Consensus, or RANSAC, to estimate the affine transformation from our limited set of sample points.&lt;/p&gt;

&lt;p&gt;##&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;src_pts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;float32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kp1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;queryIdx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pt&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;good_matches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reshape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;dst_pts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;float32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kp2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trainIdx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pt&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;good_matches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reshape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;M&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mask&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;estimateAffine2D&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;src_pts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dst_pts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RANSAC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;M&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;array([[  0.57565154,   0.85025771, -14.11907287],
       [ -0.8060638 ,   0.58425459,  44.51285597]])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Wow, very cool. Let’s assume that $c_x, s_x \approxeq 1$. Then we can calculate our angle of rotation as $\arctan{(\sin{\theta},\cos{\theta})}=\arctan{(-M_{01}, M_{00})}$&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arctan2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;M&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;M&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-0.9756521224680054
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is about $.3\pi$ radians. Let’s get convert that to English.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;angle_degrees&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;180.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;angle_degrees&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-55.90074889039763
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Very nice. Looks like we’ve got our angle, boys. I’m a little worried about the simplifying assumptions we made (i.e. that $c_x, s_x \approxeq 1$), but I’ve found that in practice this does a pretty darn good job of consistently approximating the angle. It also doesn’t matter, since our mini-map correction will use the whole translation matrix.&lt;/p&gt;

&lt;h3 id=&quot;rotating-the-mini-map-&quot;&gt;Rotating The Mini-Map &lt;a name=&quot;Rotating-The-Mini-Map&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Okay, let’s bring it home now. We need to use the calculated transformation to rotate our mini-map so that it is once again north-facing. Let’s try it with our compass first.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;rows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cols&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;corrected_compass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;warpAffine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;M&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cols&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;show_images&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compass_north_east&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;corrected_compass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The compass we were given'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The corrected compass we computed'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'gray'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/rotation_estimation/rotation_estimation_21_0.png&quot; alt=&quot;png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Great, now let’s try the mini-map&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;crooked_mini_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/images/rotation_estimation/crooked_mini_map.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;corrected_mini_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;warpAffine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;crooked_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;M&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cols&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;show_images&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;crooked_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;corrected_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The mini-map we were given'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The corrected mini-map we computed'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/rotation_estimation/rotation_estimation_23_0.png&quot; alt=&quot;png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I resized to make sure the mini-map is actually the same size as the compass we used to calculate the transformation. This makes the procedure more reliable in the face of weird translation shenanigans.&lt;/p&gt;

&lt;p&gt;Finally, we can resize to the proper scale for a template search, trim off the gross bits on the corners, and figure out where in the world we are&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;rows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cols&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;corrected_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;trim&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sqrt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rows&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rows&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cols&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cols&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;final_mini_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;corrected_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;final_mini_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale_img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;final_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# template search
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TM_CCOEFF_NORMED&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;matchTemplate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;final_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;world_map_lumbridge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;min_val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;min_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minMaxLoc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# plot the estimated match
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;template_match_plotted&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;world_map_lumbridge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rectangle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;template_match_plotted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;final_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;final_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;show_images&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;final_mini_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;template_match_plotted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The corrected mini-map'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'The corresponding template match (Good)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/rotation_estimation/rotation_estimation_25_0.png&quot; alt=&quot;png&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;conclusion-&quot;&gt;Conclusion &lt;a name=&quot;Conclusion&quot;&gt;&lt;/a&gt;&lt;/h1&gt;

&lt;p&gt;Runescape is a horrible game. All you do is grind repetitive tasks to gain experience and gold pieces. Anyone could play it. Why can’t a computer? I’m trying to design a representation of the game that makes it playable by a computer in a human-like way. To do this, I’m breaking the game into conceptual components that I can model mathematically. For example, here we have established that the player is a point on a two-dimensional surface, and that the coordinates of both the player and world locations can be established using computer vision along with a copy of the world map.&lt;/p&gt;

&lt;p&gt;The next thing I will be exploring is using object detection to detect interactable components of the screen, such as “seeing” that there is a goblin which I can attack. I’ll also be working on the Ratcatchers quest in OSRS because my stupid computer can’t do it for me.&lt;/p&gt;

&lt;h1 id=&quot;appendix-&quot;&gt;Appendix &lt;a name=&quot;Appendix&quot;&gt;&lt;/a&gt;&lt;/h1&gt;

&lt;h2 id=&quot;blogutilitiesipynb&quot;&gt;blog/utilities.ipynb&lt;/h2&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;cv2&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;matplotlib&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pyplot&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;scale_img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale_percent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale_percent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale_percent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dim&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interpolation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;INTER_AREA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;load_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;COLOR_BGR2RGB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cvtColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale_img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;show_images&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;img2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wspace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dpi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subplots&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dpi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dpi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;axes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subplots_adjust&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wspace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wspace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;make_grayscale_and_resize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;new_img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cvtColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;COLOR_RGB2GRAYSCALE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;new_img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale_img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new_img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_img&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>Beau Horenberger</name></author><category term="blog" /><summary type="html"></summary></entry></feed>